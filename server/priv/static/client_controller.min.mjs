var f=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},N=class{static fromArray(t,r){let n=r||new ue;for(let i=t.length-1;i>=0;--i)n=new Y(t[i],n);return n}[Symbol.iterator](){return new Ze(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof ue}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function v(e,t){return new Y(e,t)}function c(e,t){return N.fromArray(e,t)}var Ze=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof ue)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},ue=class extends N{},Y=class extends N{constructor(t,r){super(),this.head=t,this.tail=r}},fe=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return le(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=le(this.rawBuffer,this.bitOffset,i),o=le(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=le(this.rawBuffer,this.bitOffset,r),s=le(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(It("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(It("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function le(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Nt={};function It(e,t){Nt[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Nt[e]=!0)}var ce=class e extends f{static isResult(t){return t instanceof e}},$=class extends ce{constructor(t){super(),this[0]=t}isOk(){return!0}},m=class extends ce{constructor(t){super(),this[0]=t}isOk(){return!1}};function y(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!zt(n)||!zt(i)||!Ar(n,i)||kr(n,i)||Or(n,i)||Lr(n,i)||vr(n,i)||jr(n,i)||Er(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,u]=br(n);for(let d of l(n))r.push(u(n,d),u(i,d))}return!0}function br(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function kr(e,t){return e instanceof Date&&(e>t||e<t)}function Or(e,t){return!(e instanceof fe)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function Lr(e,t){return Array.isArray(e)&&e.length!==t.length}function vr(e,t){return e instanceof Map&&e.size!==t.size}function jr(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Er(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function zt(e){return typeof e=="object"&&e!==null}function Ar(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}var b=class extends f{constructor(t){super(),this[0]=t}},k=class extends f{};var Wt=new WeakMap,Qe=new DataView(new ArrayBuffer(8)),et=0;function tt(e){let t=Wt.get(e);if(t!==void 0)return t;let r=et++;return et===2147483647&&(et=0),Wt.set(e,r),r}function rt(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function it(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Ut(e){Qe.setFloat64(0,e);let t=Qe.getInt32(0),r=Qe.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function Br(e){return it(e.toString())}function Sr(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return tt(e);if(e instanceof Date)return Ut(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+C(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+C(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+rt(C(n),C(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+rt(C(o),it(s))|0}}return r}function C(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Ut(e);case"string":return it(e);case"bigint":return Br(e);case"object":return Sr(e);case"symbol":return tt(e);case"function":return tt(e);default:return 0}}var U=5,st=Math.pow(2,U),qr=st-1,Cr=st/2,Tr=st/4,E=0,M=1,q=2,R=3,ot={type:q,bitmap:0,array:[]};function ae(e,t){return e>>>t&qr}function Se(e,t){return 1<<ae(e,t)}function Nr(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function lt(e,t){return Nr(e&t-1)}function T(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Ir(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function nt(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Dt(e,t,r,n,i,s){let o=C(t);if(o===n)return{type:R,hash:o,array:[{type:E,k:t,v:r},{type:E,k:i,v:s}]};let l={val:!1};return pe(ut(ot,e,o,t,r,l),e,n,i,s,l)}function pe(e,t,r,n,i,s){switch(e.type){case M:return zr(e,t,r,n,i,s);case q:return ut(e,t,r,n,i,s);case R:return Wr(e,t,r,n,i,s)}}function zr(e,t,r,n,i,s){let o=ae(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:M,size:e.size+1,array:T(e.array,o,{type:E,k:n,v:i})};if(l.type===E)return y(n,l.k)?i===l.v?e:{type:M,size:e.size,array:T(e.array,o,{type:E,k:n,v:i})}:(s.val=!0,{type:M,size:e.size,array:T(e.array,o,Dt(t+U,l.k,l.v,r,n,i))});let u=pe(l,t+U,r,n,i,s);return u===l?e:{type:M,size:e.size,array:T(e.array,o,u)}}function ut(e,t,r,n,i,s){let o=Se(r,t),l=lt(e.bitmap,o);if(e.bitmap&o){let u=e.array[l];if(u.type!==E){let a=pe(u,t+U,r,n,i,s);return a===u?e:{type:q,bitmap:e.bitmap,array:T(e.array,l,a)}}let d=u.k;return y(n,d)?i===u.v?e:{type:q,bitmap:e.bitmap,array:T(e.array,l,{type:E,k:n,v:i})}:(s.val=!0,{type:q,bitmap:e.bitmap,array:T(e.array,l,Dt(t+U,d,u.v,r,n,i))})}else{let u=e.array.length;if(u>=Cr){let d=new Array(32),a=ae(r,t);d[a]=ut(ot,t+U,r,n,i,s);let h=0,p=e.bitmap;for(let _=0;_<32;_++){if(p&1){let w=e.array[h++];d[_]=w}p=p>>>1}return{type:M,size:u+1,array:d}}else{let d=Ir(e.array,l,{type:E,k:n,v:i});return s.val=!0,{type:q,bitmap:e.bitmap|o,array:d}}}}function Wr(e,t,r,n,i,s){if(r===e.hash){let o=ft(e,n);if(o!==-1)return e.array[o].v===i?e:{type:R,hash:r,array:T(e.array,o,{type:E,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:R,hash:r,array:T(e.array,l,{type:E,k:n,v:i})}}return pe({type:q,bitmap:Se(e.hash,t),array:[e]},t,r,n,i,s)}function ft(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(y(t,e.array[n].k))return n;return-1}function Be(e,t,r,n){switch(e.type){case M:return Mr(e,t,r,n);case q:return Ur(e,t,r,n);case R:return Dr(e,n)}}function Mr(e,t,r,n){let i=ae(r,t),s=e.array[i];if(s!==void 0){if(s.type!==E)return Be(s,t+U,r,n);if(y(n,s.k))return s}}function Ur(e,t,r,n){let i=Se(r,t);if(!(e.bitmap&i))return;let s=lt(e.bitmap,i),o=e.array[s];if(o.type!==E)return Be(o,t+U,r,n);if(y(n,o.k))return o}function Dr(e,t){let r=ft(e,t);if(!(r<0))return e.array[r]}function ct(e,t,r,n){switch(e.type){case M:return Fr(e,t,r,n);case q:return Pr(e,t,r,n);case R:return Rr(e,n)}}function Fr(e,t,r,n){let i=ae(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===E){if(!y(s.k,n))return e}else if(o=ct(s,t+U,r,n),o===s)return e;if(o===void 0){if(e.size<=Tr){let l=e.array,u=new Array(e.size-1),d=0,a=0,h=0;for(;d<i;){let p=l[d];p!==void 0&&(u[a]=p,h|=1<<d,++a),++d}for(++d;d<l.length;){let p=l[d];p!==void 0&&(u[a]=p,h|=1<<d,++a),++d}return{type:q,bitmap:h,array:u}}return{type:M,size:e.size-1,array:T(e.array,i,o)}}return{type:M,size:e.size,array:T(e.array,i,o)}}function Pr(e,t,r,n){let i=Se(r,t);if(!(e.bitmap&i))return e;let s=lt(e.bitmap,i),o=e.array[s];if(o.type!==E){let l=ct(o,t+U,r,n);return l===o?e:l!==void 0?{type:q,bitmap:e.bitmap,array:T(e.array,s,l)}:e.bitmap===i?void 0:{type:q,bitmap:e.bitmap^i,array:nt(e.array,s)}}return y(n,o.k)?e.bitmap===i?void 0:{type:q,bitmap:e.bitmap^i,array:nt(e.array,s)}:e}function Rr(e,t){let r=ft(e,t);if(r<0)return e;if(e.array.length!==1)return{type:R,hash:e.hash,array:nt(e.array,r)}}function Ft(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===E){t(s.v,s.k);continue}Ft(s,t)}}}var K=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Be(this.root,0,C(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?ot:this.root,s=pe(i,0,C(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=ct(this.root,0,C(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Be(this.root,0,C(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Ft(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+rt(C(r),C(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!y(t.get(n,!r),r))throw Mt}),!0}catch(r){if(r===Mt)return!1;throw r}}},Mt=Symbol();var Hr=void 0;function O(e){return e}function F(e){return e.toString()}function at(e){let t=Rt(e);return t?N.fromArray(Array.from(t).map(r=>r.segment)):N.fromArray(e.match(/./gsu))}var Pt;function Rt(e){if(globalThis.Intl&&Intl.Segmenter)return Pt||=new Intl.Segmenter,Pt.segment(e)[Symbol.iterator]()}function Ht(e){let t,r=Rt(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new $([t,e.slice(t.length)]):new m(Hr)}function pt(e,t){return N.fromArray(e.split(t))}var Gt=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),hi=new RegExp(`^[${Gt}]*`),mi=new RegExp(`[${Gt}]*$`);function D(){return K.new()}function qe(e){return N.fromArray(e.entries())}function Vt(e,t,r){return r.set(e,t)}function X(e,t,r){return Vt(t,r,e)}function Qr(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=v(i,n)}}}function en(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return Qr(n,c([]));{let i=r.head[0];e=r.tail,t=v(i,n)}}}function mt(e){return en(qe(e),c([]))}function on(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=v(i,n)}}}function V(e){return on(e,c([]))}function ln(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return V(s);{let o=n.head;e=n.tail,t=i,r=v(i(o),s)}}}function P(e,t){return ln(e,t,c([]))}function Z(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function un(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return s;{let u=i.head;e=i.tail,t=o(s,u,l),r=o,n=l+1}}}function _t(e,t,r){return un(e,t,r,0)}function wt(e,t){for(;;){let r=e,n=t;if(n>0){let s=Ht(r);if(s.isOk())e=s[0][1],t=n-1;else return r}else return r}}function xt(e,t){if(t==="")return at(e);{let n=e,i=pt(n,t);return P(i,O)}}function Ne(e,t,r){return e?t:r()}var Ie=class extends f{constructor(t){super(),this.all=t}};function tr(e){return new Ie(c([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function rr(e){return tr((t,r,n,i)=>e(t))}function Ot(){return new Ie(c([]))}var ee=class extends f{constructor(t){super(),this.content=t}},L=class extends f{constructor(t,r,n,i,s,o,l){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=l}},we=class extends f{constructor(t){super(),this.subtree=t}},te=class extends f{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}};function Bn(e){if(e instanceof te)return new m(void 0);{let t=e[0],r=e[1],n=wt(t,2);return new $([n,r])}}function Sn(e,t,r){return _t(e,t,(n,i,s)=>{let o=r+"-"+F(s);return nr(i,n,o)})}function nr(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof ee)return i;if(n instanceof we){let o=n.subtree;e=o(),t=i,r=s}else{let o=n.attrs,l=n.children,u=Z(o,i,(d,a)=>{let h=Bn(a);if(h.isOk()){let p=h[0][0],_=h[0][1];return X(d,s+"-"+p,_)}else return d});return Sn(l,u,s)}}}function ir(e){return nr(e,D(),"0")}function Cn(e,t){return new te(e,t,!1)}function Lt(e){return Cn("href",e)}function re(e,t,r){return e==="area"?new L("","",e,t,c([]),!1,!0):e==="base"?new L("","",e,t,c([]),!1,!0):e==="br"?new L("","",e,t,c([]),!1,!0):e==="col"?new L("","",e,t,c([]),!1,!0):e==="embed"?new L("","",e,t,c([]),!1,!0):e==="hr"?new L("","",e,t,c([]),!1,!0):e==="img"?new L("","",e,t,c([]),!1,!0):e==="input"?new L("","",e,t,c([]),!1,!0):e==="link"?new L("","",e,t,c([]),!1,!0):e==="meta"?new L("","",e,t,c([]),!1,!0):e==="param"?new L("","",e,t,c([]),!1,!0):e==="source"?new L("","",e,t,c([]),!1,!0):e==="track"?new L("","",e,t,c([]),!1,!0):e==="wbr"?new L("","",e,t,c([]),!1,!0):new L("","",e,t,r,!1,!1)}function ne(e){return new ee(e)}var vt=class extends f{constructor(t){super(),this.dict=t}};function ur(){return new vt(D())}var We=class extends f{constructor(t){super(),this[0]=t}},Me=class extends f{constructor(t,r){super(),this[0]=t,this[1]=r}},Ue=class extends f{constructor(t,r){super(),this[0]=t,this[1]=r}};function fr(e){return y(e.created,D())&&y(e.removed,ur())&&y(e.updated,D())}var De=class extends f{constructor(t){super(),this[0]=t}},Fe=class extends f{constructor(t,r){super(),this[0]=t,this[1]=r}},ie=class extends f{constructor(t){super(),this[0]=t}},B=class extends f{constructor(t){super(),this[0]=t}},se=class extends f{constructor(t,r){super(),this[0]=t,this[1]=r}},Pe=class extends f{constructor(t,r){super(),this[0]=t,this[1]=r}};var xe=class extends f{},Re=class extends f{constructor(t,r){super(),this[0]=t,this[1]=r}},He=class extends f{constructor(t){super(),this[0]=t}},ge=class extends f{constructor(t){super(),this[0]=t}};var jt=class extends f{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var Ge=class extends f{constructor(t){super(),this.name=t}},Ve=class extends f{constructor(t){super(),this.name=t}},Je=class extends f{constructor(t){super(),this.selector=t}},ye=class extends f{};function cr(e,t,r){return new jt(e,t,r,new k)}globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Le(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:l}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let u=document.createTextNode(o.content);l.replaceChild(u,s),n??=u}else{let u=document.createTextNode(o.content);l.appendChild(u),n??=u}else if(o.tag!==void 0){let u=Un({prev:s,next:o,dispatch:r,stack:i});s?s!==u&&l.replaceChild(u,s):l.appendChild(u),n??=u}}return n}function Un({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),l;if(ke.has(o))l=ke.get(o);else{let x=new Map;ke.set(o,x),l=x}let u=s?new Set(l.keys()):null,d=s?new Set(Array.from(e.attributes,x=>x.name)):null,a=null,h=null,p=null;if(s&&t.tag==="textarea"){let x=t.children[Symbol.iterator]().next().value?.content;x!==void 0&&(o.value=x)}let _=[];for(let x of t.attrs){let g=x[0],j=x[1];if(x.as_property)o[g]!==j&&(o[g]=j),s&&d.delete(g);else if(g.startsWith("on")){let W=g.slice(2),Xe=r(j,W==="input");l.has(W)||o.addEventListener(W,Oe),l.set(W,Xe),s&&u.delete(W)}else if(g.startsWith("data-lustre-on-")){let W=g.slice(15),Xe=r(Dn);l.has(W)||o.addEventListener(W,Oe),l.set(W,Xe),o.setAttribute(g,j),s&&(u.delete(W),d.delete(g))}else g.startsWith("delegate:data-")||g.startsWith("delegate:aria-")?(o.setAttribute(g,j),_.push([g.slice(10),j])):g==="class"?a=a===null?j:a+" "+j:g==="style"?h=h===null?j:h+j:g==="dangerous-unescaped-html"?p=j:(o.getAttribute(g)!==j&&o.setAttribute(g,j),(g==="value"||g==="selected")&&(o[g]=j),s&&d.delete(g))}if(a!==null&&(o.setAttribute("class",a),s&&d.delete("class")),h!==null&&(o.setAttribute("style",h),s&&d.delete("style")),s){for(let x of d)o.removeAttribute(x);for(let x of u)l.delete(x),o.removeEventListener(x,Oe)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let x of o.assignedElements())for(let[g,j]of _)x.hasAttribute(g)||x.setAttribute(g,j)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(p!==null)return o.innerHTML=p,o;let w=o.firstChild,S=null,I=null,z=null,Ke=Ye(t).next().value;if(s&&Ke!==void 0&&Ke.key!==void 0&&Ke.key!==""){S=new Set,I=pr(e),z=pr(t);for(let x of Ye(t))w=Fn(w,x,o,n,z,I,S)}else for(let x of Ye(t))n.unshift({prev:w,next:x,parent:o}),w=w?.nextSibling;for(;w;){let x=w.nextSibling;o.removeChild(w),w=x}return o}var ke=new WeakMap;function Oe(e){let t=e.currentTarget;if(!ke.has(t)){t.removeEventListener(e.type,Oe);return}let r=ke.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,Oe);return}r.get(e.type)(e)}function Dn(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let l=o.split(".");for(let u=0,d=s,a=e;u<l.length;u++)u===l.length-1?d[l[u]]=a[l[u]]:(d[l[u]]??={},a=a[l[u]],d=d[l[u]]);return s},{data:n})}}function pr(e){let t=new Map;if(e)for(let r of Ye(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function Fn(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let u=e.nextSibling;r.removeChild(e),e=u}if(s.size===0)return n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let l=s.get(t.key);if(!l&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!l&&e!==null){let u=document.createTextNode("");return r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e}return!l||l===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e)}function*Ye(e){for(let t of e.children)yield*dr(t)}function*dr(e){e.subtree!==void 0?yield*dr(e.subtree()):yield e}var At=class e{static start({init:t,update:r,view:n},i,s){if(!be())return new m(new ye);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new m(new Je(i));let l=new e(o,t(s),r,n);return new $(u=>l.send(u))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.setTimeout(()=>this.#i(n.all.toArray(),!0),0)}root;send(t){if(t instanceof ie){if(t[0]instanceof ge){this.#t=window.clearTimeout(this.#t),this.#n=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let u=s(l);u instanceof $&&this.send(new B(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Le(i,r,n)}}else if(t instanceof B){let r=t[0],n=t[1]??!1;this.#n.push(r),n?(this.#t=window.clearTimeout(this.#t),this.#i()):this.#t||(this.#t=window.setTimeout(()=>this.#i()))}else if(t instanceof se){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof xe)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#n=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#n=[];#t;#i(t=[]){this.#t=void 0,this.#o(t);let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let u=s(l);u instanceof $&&this.send(new B(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Le(i,r,n)}#o(t=[]){for(;this.#n.length>0;){let r=this.#n.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;){let r=t.shift(),n=l=>this.send(new B(l)),i=(l,u)=>this.root.dispatchEvent(new CustomEvent(l,{detail:u,bubbles:!0,composed:!0})),s=()=>{},o=this.root;r({dispatch:n,emit:i,select:s,root:o})}this.#n.length>0&&this.#o(t)}},Wn=At.start,Et=({init:e,update:t,view:r,on_attribute_change:n},i)=>{if(!be())return new m(new ye);if(!i.includes("-"))return new m(new Ge(i));if(window.customElements.get(i))return new m(new Ve(i));let[s,o]=e(void 0),l=n instanceof b,u=class extends HTMLElement{static get observedAttributes(){return l?n[0].entries().map(([a])=>a):[]}constructor(){super(),this.attachShadow({mode:"open"}),this.internals=this.attachInternals(),l&&n[0].forEach((a,h)=>{let p=`__mirrored__${h}`;Object.defineProperty(this,h,{get(){return this[p]},set(_){let w=this[p];if(this.#t&&y(w,_))return;this[p]=_;let S=a(_);S instanceof m||(this.#r.push(S[0]),this.#t&&!this.#n&&(this.#n=window.requestAnimationFrame(()=>this.#i())))}})})}connectedCallback(){this.#l().finally(()=>{this.#i(o.all.toArray(),!0),this.#t=!0})}attributeChangedCallback(a,h,p){h!==p&&(this[a]=p)}disconnectedCallback(){this.#s=null,this.#r=[],this.#n=window.cancelAnimationFrame(this.#n),this.#t=!1}send(a){if(a instanceof ie){if(a[0]instanceof ge){this.#n=window.cancelAnimationFrame(this.#n),this.#r=[],this.#s=a[0][0];let h=r(this.#s),p=(w,S=!1)=>I=>{let z=w(I);z instanceof $&&this.send(new B(z[0],S))},_=this.shadowRoot.childNodes[this.#e.length]??this.shadowRoot.appendChild(document.createTextNode(""));Le(_,h,p)}}else if(a instanceof B){let h=a[0],p=a[1]??!1;this.#r.push(h),p?(this.#n=window.cancelAnimationFrame(this.#n),this.#i()):this.#n||(this.#n=window.requestAnimationFrame(()=>this.#i()))}else if(a instanceof se){let h=a[0],p=a[1];this.dispatchEvent(new CustomEvent(h,{detail:p,bubbles:!0,composed:!0}))}}#e=[];#s=s;#r=[];#n;#t=!0;#i(a=[]){if(!this.#t)return;this.#n=void 0,this.#o(a);let h=r(this.#s),p=(w,S=!1)=>I=>{let z=w(I);z instanceof $&&this.send(new B(z[0],S))},_=this.shadowRoot.childNodes[this.#e.length]??this.shadowRoot.appendChild(document.createTextNode(""));Le(_,h,p)}#o(a=[]){for(;this.#r.length>0;){let h=this.#r.shift(),[p,_]=t(this.#s,h);a=a.concat(_.all.toArray()),this.#s=p}for(;a.length>0;){let h=a.shift(),p=I=>this.send(new B(I)),_=(I,z)=>this.dispatchEvent(new CustomEvent(I,{detail:z,bubbles:!0,composed:!0})),w=()=>{},S=this.shadowRoot;h({dispatch:p,emit:_,select:w,root:S})}this.#r.length>0&&this.#o(a)}async#l(){let a=[];for(let p of document.querySelectorAll("link[rel=stylesheet]"))p.sheet||a.push(new Promise((_,w)=>{p.addEventListener("load",_),p.addEventListener("error",w)}));for(await Promise.allSettled(a);this.#e.length;)this.#e.shift().remove(),this.shadowRoot.firstChild.remove();this.shadowRoot.adoptedStyleSheets=this.getRootNode().adoptedStyleSheets;let h=[];for(let p of document.styleSheets)try{this.shadowRoot.adoptedStyleSheets.push(p)}catch{try{let _=new CSSStyleSheet;for(let w of p.cssRules)_.insertRule(w.cssText,_.cssRules.length);this.shadowRoot.adoptedStyleSheets.push(_)}catch{let _=p.ownerNode.cloneNode();this.shadowRoot.prepend(_),this.#e.push(_),h.push(new Promise((w,S)=>{_.onload=w,_.onerror=S}))}}return Promise.allSettled(h)}};return window.customElements.define(i,u),new $(void 0)},Bt=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new $(l=>o.send(l))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#n=i,this.#t=i(t),this.#l=s,this.#i=new Map,this.#o=ir(this.#t),this.#u(r.all.toArray())}send(t){if(t instanceof De){for(let r of t[0]){let n=this.#l.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof m||this.#r.push(i)}this.#u()}else if(t instanceof Fe)this.#r=this.#r.concat(t[0].toArray()),this.#u(t[1].all.toArray());else if(!(t instanceof ie))if(t instanceof B)this.#r.push(t[0]),this.#u();else if(t instanceof se){let r=new Me(t[0],t[1]);for(let[n,i]of this.#i)i(r)}else if(t instanceof Pe){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof m)return;this.#r.push(n[0]),this.#u()}else if(t instanceof Re){let r=mt(this.#l),n=new Ue(r,this.#t);this.#i=this.#i.set(t[0],t[1]),t[1](n)}else t instanceof He&&(this.#i=this.#i.delete(t[0]))}#e;#s;#r;#n;#t;#i;#o;#l;#u(t=[]){this.#f(t);let r=this.#n(this.#e),n=elements(this.#t,r);if(!fr(n)){let i=new We(n);for(let[s,o]of this.#i)o(i)}this.#t=r,this.#o=n.handlers}#f(t=[]){for(;this.#r.length>0;){let r=this.#r.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;)t.shift()({dispatch:l=>this.send(new B(l)),emit:(l,u)=>this.root.dispatchEvent(new CustomEvent(l,{detail:u,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#f(t)}},Mn=Bt.start,be=()=>globalThis.window&&window.document;var ve=class extends f{constructor(t,r,n,i,s,o,l){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=l}};function Pn(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return V(n);{let i=r.head,s=r.tail,o=i===""||i==="."?n:i===".."&&n.hasLength(0)?c([]):i===".."&&n.atLeastLength(1)?n.tail:v(i,n);e=s,t=o}}}function Rn(e){return Pn(e,c([]))}function hr(e){return Rn(xt(e,"/"))}function St(e,t){return re("h1",e,t)}function mr(e,t){return re("nav",e,t)}function _r(e,t){return re("div",e,t)}function qt(e,t){return re("a",e,t)}var Vn={handle_external_links:!1,handle_internal_links:!0},rc=window?.location?.href;var Ct=(e,t=Vn)=>{document.addEventListener("click",r=>{let n=wr(r.target);if(n)try{let i=new URL(n.href),s=$r(i),o=i.host!==window.location.host;return!t.handle_external_links&&o||!t.handle_internal_links&&!o?void 0:(r.preventDefault(),o||(window.history.pushState({},"",n.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",r=>{r.preventDefault();let n=new URL(window.location.href),i=$r(n);window.requestAnimationFrame(()=>{n.hash&&document.getElementById(n.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:r})=>{e(r)}),window.addEventListener("modem-replace",({detail:r})=>{e(r)})};var wr=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:wr(e.parentElement),$r=e=>new ve(e.protocol?new b(e.protocol.slice(0,-1)):new k,new k,e.hostname?new b(e.hostname):new k,e.port?new b(Number(e.port)):new k,e.pathname,e.search?new b(e.search.slice(1)):new k,e.hash?new b(e.hash.slice(1)):new k);function xr(e){return rr(t=>Ne(!be(),void 0,()=>Ct(r=>{let i=e(r);return t(i)})))}var oe=class extends f{},Tt=class extends f{},je=class extends f{constructor(t){super(),this[0]=t}};function Yn(e){let t=hr(e.path);return t.hasLength(1)&&t.head==="wibble"?new je(new oe):t.hasLength(1)&&t.head==="wobble"?new je(new Tt):new je(new oe)}function Kn(e){return[new oe,xr(Yn)]}function Xn(e,t){return[t[0],Ot()]}function Zn(e){return _r(c([]),c([mr(c([]),c([qt(c([Lt("/wibble")]),c([ne("Go to wibble")])),qt(c([Lt("/wobble")]),c([ne("Go to wobble")]))])),e instanceof oe?St(c([]),c([ne("You're on wibble")])):St(c([]),c([ne("You're on wobble")]))]))}function gr(){return cr(Kn,Xn,Zn)}var yr="client-controller";Et(gr(),yr);
