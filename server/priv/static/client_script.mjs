var Ue=Object.defineProperty;var oe=e=>{throw TypeError(e)};var Te=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var C=(e,t,n)=>Te(e,typeof t!="symbol"?t+"":t,n),ae=(e,t,n)=>t.has(e)||oe("Cannot "+n);var Y=(e,t,n)=>(ae(e,t,"read from private field"),n?n.call(e):t.get(e)),le=(e,t,n)=>t.has(e)?oe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),V=(e,t,n,r)=>(ae(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class R{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class N{static fromArray(t,n){let r=n||new J;for(let i=t.length-1;i>=0;--i)r=new me(t[i],r);return r}[Symbol.iterator](){return new qe(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof J}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function Le(e,t){return new me(e,t)}function Fe(e,t){return N.fromArray(e,t)}var z;class qe{constructor(t){le(this,z);V(this,z,t)}next(){if(Y(this,z)instanceof J)return{done:!0};{let{head:t,tail:n}=Y(this,z);return V(this,z,n),{value:t,done:!1}}}}z=new WeakMap;class J extends N{}class me extends N{constructor(t,n){super(),this.head=t,this.tail=n}}class M{constructor(t,n,r){C(this,"bitSize");C(this,"byteSize");C(this,"bitOffset");C(this,"rawBuffer");if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return k(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;const n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<n;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;const r=this.bitSize%8;if(r){const i=8-r;if(this.rawBuffer[n]>>i!==t.rawBuffer[n]>>i)return!1}}else{for(let i=0;i<n;i++){const s=k(this.rawBuffer,this.bitOffset,i),u=k(t.rawBuffer,t.bitOffset,i);if(s!==u)return!1}const r=this.bitSize%8;if(r){const i=k(this.rawBuffer,this.bitOffset,n),s=k(t.rawBuffer,t.bitOffset,n),u=8-r;if(i>>u!==s>>u)return!1}}return!0}get buffer(){if(de("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(de("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function k(e,t,n){if(t===0)return e[n]??0;{const r=e[n]<<t&255,i=e[n+1]>>8-t;return r|i}}class Be{constructor(t){this.value=t}}const pe={};function de(e,t){pe[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),pe[e]=!0)}function Re(e,t,n){if(n??(n=e.bitSize),Se(e,t,n),t===n)return new M(new Uint8Array);if(t===0&&n===e.bitSize)return e;t+=e.bitOffset,n+=e.bitOffset;const r=Math.trunc(t/8),s=Math.trunc((n+7)/8)-r;let u;return r===0&&s===e.rawBuffer.byteLength?u=e.rawBuffer:u=new Uint8Array(e.rawBuffer.buffer,e.rawBuffer.byteOffset+r,s),new M(u,n-t,t%8)}function Pe(e,t,n,r,i){if(Se(e,t,n),t===n)return 0;t+=e.bitOffset,n+=e.bitOffset;const s=t%8===0,u=n%8===0;if(s&&u)return We(e,t/8,n/8);const f=n-t,c=Math.trunc(t/8),o=Math.trunc((n-1)/8);if(c==o){const a=255>>t%8,p=(8-n%8)%8;return(e.rawBuffer[c]&a)>>p}return f<=53?Ve(e.rawBuffer,t,n):Xe(e.rawBuffer,t,n)}function We(e,t,n,r,i){return n-t<=6?Ke(e.rawBuffer,t,n):Ye(e.rawBuffer,t,n)}function Ke(e,t,n,r,i){let s=0;for(let u=n-1;u>=t;u--)s*=256,s+=e[u];return s}function Ye(e,t,n,r,i){let s=0n;for(let u=n-1;u>=t;u--)s*=256n,s+=BigInt(e[u]);return Number(s)}function Ve(e,t,n,r,i){const s=t%8===0;let u=Math.trunc(t/8),f=0;if(s){let c=n-t,o=1;for(;c>=8;)f+=e[u++]*o,o*=256,c-=8;f+=(e[u]>>8-c)*o}else{const c=t%8,o=8-c;let a=n-t,p=1;for(;a>=8;){const l=e[u]<<c|e[u+1]>>o;f+=(l&255)*p,p*=256,a-=8,u++}if(a>0){const l=a-Math.max(0,a-o);let w=(e[u]&(1<<o)-1)>>o-l;a-=l,a>0&&(w*=2**a,w+=e[u+1]>>8-a),f+=w*p}}return f}function Xe(e,t,n,r,i){const s=t%8===0;let u=Math.trunc(t/8),f=0n;if(s){let c=n-t,o=0n;for(;c>=8;)f+=BigInt(e[u++])<<o,o+=8n,c-=8;f+=BigInt(e[u]>>8-c)<<o}else{const c=t%8,o=8-c;let a=n-t,p=0n;for(;a>=8;){const l=e[u]<<c|e[u+1]>>o;f+=BigInt(l&255)<<p,p+=8n,a-=8,u++}if(a>0){const l=a-Math.max(0,a-o);let w=(e[u]&(1<<o)-1)>>o-l;a-=l,a>0&&(w<<=a,w+=e[u+1]>>8-a),f+=BigInt(w)<<p}}return Number(f)}function Se(e,t,n){if(t<0||t>e.bitSize||n<t||n>e.bitSize){const r=`Invalid bit array slice: start = ${t}, end = ${n}, bit size = ${e.bitSize}`;throw new globalThis.Error(r)}}class P extends R{static isResult(t){return t instanceof P}}class x extends P{constructor(t){super(),this[0]=t}isOk(){return!0}}class j extends P{constructor(t){super(),this[0]=t}isOk(){return!1}}function O(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!he(r)||!he(i)||!tt(r,i)||Ge(r,i)||Je(r,i)||Ze(r,i)||Qe(r,i)||ve(r,i)||et(r,i))return!1;const u=Object.getPrototypeOf(r);if(u!==null&&typeof u.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[f,c]=He(r);for(let o of f(r))n.push(c(r,o),c(i,o))}return!0}function He(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function Ge(e,t){return e instanceof Date&&(e>t||e<t)}function Je(e,t){return!(e instanceof M)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function Ze(e,t){return Array.isArray(e)&&e.length!==t.length}function Qe(e,t){return e instanceof Map&&e.size!==t.size}function ve(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function et(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function he(e){return typeof e=="object"&&e!==null}function tt(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}const ye=new WeakMap,X=new DataView(new ArrayBuffer(8));let H=0;function Z(e){const t=ye.get(e);if(t!==void 0)return t;const n=H++;return H===2147483647&&(H=0),ye.set(e,n),n}function Q(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function ee(e){let t=0;const n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function _e(e){X.setFloat64(0,e);const t=X.getInt32(0),n=X.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function nt(e){return ee(e.toString())}function rt(e){const t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{const r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return Z(e);if(e instanceof Date)return _e(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+y(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+y(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+Q(y(r),y(i))|0});else{const r=Object.keys(e);for(let i=0;i<r.length;i++){const s=r[i],u=e[s];n=n+Q(y(u),ee(s))|0}}return n}function y(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return _e(e);case"string":return ee(e);case"bigint":return nt(e);case"object":return rt(e);case"symbol":return Z(e);case"function":return Z(e);default:return 0}}const B=5,te=Math.pow(2,B),it=te-1,st=te/2,ut=te/4,d=0,m=1,h=2,A=3,ne={type:h,bitmap:0,array:[]};function U(e,t){return e>>>t&it}function W(e,t){return 1<<U(e,t)}function ft(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function re(e,t){return ft(e&t-1)}function g(e,t,n){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function ct(e,t,n){const r=e.length,i=new Array(r+1);let s=0,u=0;for(;s<t;)i[u++]=e[s++];for(i[u++]=n;s<r;)i[u++]=e[s++];return i}function v(e,t){const n=e.length,r=new Array(n-1);let i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function $e(e,t,n,r,i,s){const u=y(t);if(u===r)return{type:A,hash:u,array:[{type:d,k:t,v:n},{type:d,k:i,v:s}]};const f={val:!1};return T(ie(ne,e,u,t,n,f),e,r,i,s,f)}function T(e,t,n,r,i,s){switch(e.type){case m:return ot(e,t,n,r,i,s);case h:return ie(e,t,n,r,i,s);case A:return at(e,t,n,r,i,s)}}function ot(e,t,n,r,i,s){const u=U(n,t),f=e.array[u];if(f===void 0)return s.val=!0,{type:m,size:e.size+1,array:g(e.array,u,{type:d,k:r,v:i})};if(f.type===d)return O(r,f.k)?i===f.v?e:{type:m,size:e.size,array:g(e.array,u,{type:d,k:r,v:i})}:(s.val=!0,{type:m,size:e.size,array:g(e.array,u,$e(t+B,f.k,f.v,n,r,i))});const c=T(f,t+B,n,r,i,s);return c===f?e:{type:m,size:e.size,array:g(e.array,u,c)}}function ie(e,t,n,r,i,s){const u=W(n,t),f=re(e.bitmap,u);if((e.bitmap&u)!==0){const c=e.array[f];if(c.type!==d){const a=T(c,t+B,n,r,i,s);return a===c?e:{type:h,bitmap:e.bitmap,array:g(e.array,f,a)}}const o=c.k;return O(r,o)?i===c.v?e:{type:h,bitmap:e.bitmap,array:g(e.array,f,{type:d,k:r,v:i})}:(s.val=!0,{type:h,bitmap:e.bitmap,array:g(e.array,f,$e(t+B,o,c.v,n,r,i))})}else{const c=e.array.length;if(c>=st){const o=new Array(32),a=U(n,t);o[a]=ie(ne,t+B,n,r,i,s);let p=0,l=e.bitmap;for(let w=0;w<32;w++){if((l&1)!==0){const Ne=e.array[p++];o[w]=Ne}l=l>>>1}return{type:m,size:c+1,array:o}}else{const o=ct(e.array,f,{type:d,k:r,v:i});return s.val=!0,{type:h,bitmap:e.bitmap|u,array:o}}}}function at(e,t,n,r,i,s){if(n===e.hash){const u=se(e,r);if(u!==-1)return e.array[u].v===i?e:{type:A,hash:n,array:g(e.array,u,{type:d,k:r,v:i})};const f=e.array.length;return s.val=!0,{type:A,hash:n,array:g(e.array,f,{type:d,k:r,v:i})}}return T({type:h,bitmap:W(e.hash,t),array:[e]},t,n,r,i,s)}function se(e,t){const n=e.array.length;for(let r=0;r<n;r++)if(O(t,e.array[r].k))return r;return-1}function F(e,t,n,r){switch(e.type){case m:return lt(e,t,n,r);case h:return pt(e,t,n,r);case A:return dt(e,r)}}function lt(e,t,n,r){const i=U(n,t),s=e.array[i];if(s!==void 0){if(s.type!==d)return F(s,t+B,n,r);if(O(r,s.k))return s}}function pt(e,t,n,r){const i=W(n,t);if((e.bitmap&i)===0)return;const s=re(e.bitmap,i),u=e.array[s];if(u.type!==d)return F(u,t+B,n,r);if(O(r,u.k))return u}function dt(e,t){const n=se(e,t);if(!(n<0))return e.array[n]}function ue(e,t,n,r){switch(e.type){case m:return ht(e,t,n,r);case h:return yt(e,t,n,r);case A:return gt(e,r)}}function ht(e,t,n,r){const i=U(n,t),s=e.array[i];if(s===void 0)return e;let u;if(s.type===d){if(!O(s.k,r))return e}else if(u=ue(s,t+B,n,r),u===s)return e;if(u===void 0){if(e.size<=ut){const f=e.array,c=new Array(e.size-1);let o=0,a=0,p=0;for(;o<i;){const l=f[o];l!==void 0&&(c[a]=l,p|=1<<o,++a),++o}for(++o;o<f.length;){const l=f[o];l!==void 0&&(c[a]=l,p|=1<<o,++a),++o}return{type:h,bitmap:p,array:c}}return{type:m,size:e.size-1,array:g(e.array,i,u)}}return{type:m,size:e.size,array:g(e.array,i,u)}}function yt(e,t,n,r){const i=W(n,t);if((e.bitmap&i)===0)return e;const s=re(e.bitmap,i),u=e.array[s];if(u.type!==d){const f=ue(u,t+B,n,r);return f===u?e:f!==void 0?{type:h,bitmap:e.bitmap,array:g(e.array,s,f)}:e.bitmap===i?void 0:{type:h,bitmap:e.bitmap^i,array:v(e.array,s)}}return O(r,u.k)?e.bitmap===i?void 0:{type:h,bitmap:e.bitmap^i,array:v(e.array,s)}:e}function gt(e,t){const n=se(e,t);if(n<0)return e;if(e.array.length!==1)return{type:A,hash:e.hash,array:v(e.array,n)}}function Oe(e,t){if(e===void 0)return;const n=e.array,r=n.length;for(let i=0;i<r;i++){const s=n[i];if(s!==void 0){if(s.type===d){t(s.v,s.k);continue}Oe(s,t)}}}class b{static fromObject(t){const n=Object.keys(t);let r=b.new();for(let i=0;i<n.length;i++){const s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=b.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new b(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;const r=F(this.root,0,y(t),t);return r===void 0?n:r.v}set(t,n){const r={val:!1},i=this.root===void 0?ne:this.root,s=T(i,0,y(t),t,n,r);return s===this.root?this:new b(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;const n=ue(this.root,0,y(t),t);return n===this.root?this:n===void 0?b.new():new b(n,this.size-1)}has(t){return this.root===void 0?!1:F(this.root,0,y(t),t)!==void 0}entries(){if(this.root===void 0)return[];const t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){Oe(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+Q(y(n),y(r))|0}),t}equals(t){if(!(t instanceof b)||this.size!==t.size)return!1;try{return this.forEach((n,r)=>{if(!O(t.get(r,!n),n))throw ge}),!0}catch(n){if(n===ge)return!1;throw n}}}const ge=Symbol();function wt(e,t){return _t(e,t)}function bt(e,t){let r=e,i=wt(r,t);return i}function mt(e){let t=_(e);return t}function K(e,t){if(e.isOk()){let n=e[0];return new x(t(n))}else{let n=e[0];return new j(n)}}function D(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new j(n)}}function L(e,t){if(e.isOk()){let n=e[0];return new x(n)}else return new j(t)}const Bt=void 0;function ze(e){return/^[-+]?(\d+)$/.test(e)?new x(parseInt(e)):new j(Bt)}function q(e){return e.toString()}function St(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function _t(e,t){return e+t}function $t(e,t){const n=e[Symbol.iterator]();let r=n.next().value||"",i=n.next();for(;!i.done;)r=r+t+i.value,i=n.next();return r}function we(e){console.log(e)}function _(e){const t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return Ot(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return St(e);if(Array.isArray(e))return`#(${e.map(_).join(", ")})`;if(e instanceof N)return Et(e);if(e instanceof Be)return It(e);if(e instanceof M)return xt(e);if(e instanceof R)return jt(e);if(e instanceof b)return zt(e);if(e instanceof Set)return`//js(Set(${[...e].map(_).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){const n=[];for(const r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return At(e)}function Ot(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];switch(r){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:r<" "||r>"~"&&r<" "?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}}return t+='"',t}function zt(e){let t="dict.from_list([",n=!0;return e.forEach((r,i)=>{n||(t=t+", "),t=t+"#("+_(i)+", "+_(r)+")",n=!1}),t+"])"}function At(e){var s,u;const t=((u=(s=Object.getPrototypeOf(e))==null?void 0:s.constructor)==null?void 0:u.name)||"Object",n=[];for(const f of Object.keys(e))n.push(`${_(f)}: ${_(e[f])}`);const r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function jt(e){const t=Object.keys(e).map(n=>{const r=_(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Et(e){return`[${e.toArray().map(_).join(", ")}]`}function xt(e){return`<<${Array.from(e.buffer).join(", ")}>>`}function It(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function fe(e,t){return e<t?e:t}function Ae(e,t){return e>t?e:t}function Ct(e,t){return".dl"+q(e)+".dc"+q(t)}function ce(e){let t=document.querySelector(e);return t?new x(t):new j}function kt(e){e.focus()}function je(e,t){return t in e.dataset?new x(e.dataset[t]):new j(void 0)}function $(e){return e.preventDefault()}function Mt(e){return e.key}function Dt(e){return e.shiftKey}function Nt(e,t){return window.addEventListener(e,t)}class Ut extends R{constructor(t,n){super(),this.issue=t,this.cause=n}}function I(e){return new Ut(e,Fe([]))}function G(e){return new j(I(e))}function Tt(e){let t=Le(bt("error: ",e.issue),e.cause);return $t(t," <- ")}function Lt(e){let t=je(e,"lc"),n=D(t,ze);return L(n,I("Failed to read line count data"))}function Ft(e){let t=je(e,"cc"),n=D(t,ze);return L(n,I("Failed to read column count data"))}const qt="line-container";function Rt(e){let t=ce("#L"+q(e)+"."+qt);return L(t,I("Failed to find non-empty line"))}let Ee=16;function Pt(e){Ee=e}function xe(){return Ee}let Ie=1;function Wt(e){Ie=e}function Ce(){return Ie}let ke=16;function Kt(e){ke=e}function Yt(){return ke}function Vt(e,t){return new x(void 0)}function Me(e,t){return D((()=>{let n=ce("#audit-page"),r=L(n,I("Failed to find audit page"));return D(r,Lt)})(),n=>{if(t>0&&e===n)return G("Line is "+q(n)+", cannot go further down");if(t<0&&e===1)return G("Line is 1, cannot go further up");if(t===0)return G("Step is zero");{let r=Ae(1,fe(n,e+t)),i=Rt(r);if(i.isOk()){let s=i[0];return K(Ft(s),u=>[r,u])}else return Me(r,t>0&&r===n?-1:t>0||t<0&&r===1?1:t<0?-1:0)}})}function De(e,t){let n=ce(Ct(e,t)),r=L(n,I("Failed to find line discussion to focus"));return K(r,kt)}function E(e){return D(Me(xe(),e),t=>{let n=t[0],r=t[1];return K(De(n,fe(r,Ce())),i=>(Pt(n),Kt(r)))})}function be(e){let t=(()=>{let n=Ae(1,Ce()+e);return fe(n,Yt())})();return K(De(xe(),t),n=>Wt(t))}function Xt(e,t){let n=Dt(e),r=Mt(e);return!n&&r==="ArrowUp"?($(e),E(-1)):!n&&r==="ArrowDown"?($(e),E(1)):n&&r==="ArrowUp"?($(e),E(-5)):n&&r==="ArrowDown"?($(e),E(5)):r==="PageUp"?($(e),E(-20)):r==="PageDown"?($(e),E(20)):r==="ArrowLeft"?($(e),be(-1)):r==="ArrowRight"?($(e),be(1)):t()}function Ht(){return we("Starting page navigation"),Nt("keydown",e=>{Gt("got event "+mt(e),"src/o11a/client/page_navigation.gleam",19);let t=Xt(e,()=>Vt());if(!(t.isOk()&&!t[0])){let n=t[0];return we(Tt(n))}})}function Gt(e,t,n){var f;const r="\x1B[90m",i="\x1B[39m",s=`${t}:${n}`,u=S(e);if(typeof process=="object"&&((f=process.stderr)!=null&&f.write)){const c=`${r}${s}${i}
${u}
`;process.stderr.write(c)}else if(typeof Deno=="object"){const c=`${r}${s}${i}
${u}
`;Deno.stderr.writeSync(new TextEncoder().encode(c))}else{const c=`${s}
${u}`;console.log(c)}return e}function Jt(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];r==`
`?t+="\\n":r=="\r"?t+="\\r":r=="	"?t+="\\t":r=="\f"?t+="\\f":r=="\\"?t+="\\\\":r=='"'?t+='\\"':r<" "||r>"~"&&r<" "?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}return t+='"',t}function Zt(e){let t="dict.from_list([",n=!0,r=[];return e.forEach((i,s)=>{r.push([s,i])}),r.sort(),r.forEach(([i,s])=>{n||(t=t+", "),t=t+"#("+S(i)+", "+S(s)+")",n=!1}),t+"])"}function Qt(e){const t=Object.keys(e).map(n=>{const r=S(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function vt(e){var s,u;const t=((u=(s=Object.getPrototypeOf(e))==null?void 0:s.constructor)==null?void 0:u.name)||"Object",n=[];for(const f of Object.keys(e))n.push(`${S(f)}: ${S(e[f])}`);const r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function S(e){const t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return Jt(e);if(t==="bigint"||t==="number")return e.toString();if(Array.isArray(e))return`#(${e.map(S).join(", ")})`;if(e instanceof N)return`[${e.toArray().map(S).join(", ")}]`;if(e instanceof Be)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof M)return en(e);if(e instanceof R)return Qt(e);if(tn(e))return Zt(e);if(e instanceof Set)return`//js(Set(${[...e].map(S).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){const n=[];for(const r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return vt(e)}function en(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),n=Re(e,e.bitOffset,t),r=e.bitSize%8;if(r>0){let i=Pe(e,t,e.bitSize),s=Array.from(n.rawBuffer),u=`${i}:size(${r})`;return s.length===0?`<<${u}>>`:`<<${Array.from(n.rawBuffer).join(", ")}, ${u}>>`}else return`<<${Array.from(n.rawBuffer).join(", ")}>>`}function tn(e){try{return e instanceof b}catch{return!1}}document.addEventListener("DOMContentLoaded",Ht);
