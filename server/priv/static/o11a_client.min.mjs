var c=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},F=class{static fromArray(t,r){let n=r||new en;for(let i=t.length-1;i>=0;--i)n=new jt(t[i],n);return n}[Symbol.iterator](){return new Us(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof en}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function m(e,t){return new jt(e,t)}function l(e,t){return F.fromArray(e,t)}var Us=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof en)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},en=class extends F{},jt=class extends F{constructor(t,r){super(),this.head=t,this.tail=r}},ze=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Qr(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=Qr(this.rawBuffer,this.bitOffset,i),o=Qr(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=Qr(this.rawBuffer,this.bitOffset,r),s=Qr(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(ol("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(ol("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function Qr(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Et=class{constructor(t){this.value=t}},sl={};function ol(e,t){sl[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),sl[e]=!0)}function pr(e,t,r){if(r??=e.bitSize,al(e,t,r),t===r)return new ze(new Uint8Array);if(t===0&&r===e.bitSize)return e;t+=e.bitOffset,r+=e.bitOffset;let n=Math.trunc(t/8),s=Math.trunc((r+7)/8)-n,o;return n===0&&s===e.rawBuffer.byteLength?o=e.rawBuffer:o=new Uint8Array(e.rawBuffer.buffer,e.rawBuffer.byteOffset+n,s),new ze(o,r-t,t%8)}function ll(e,t,r,n,i){if(al(e,t,r),t===r)return 0;t+=e.bitOffset,r+=e.bitOffset;let s=t%8===0,o=r%8===0;if(s&&o)return mp(e,t/8,r/8,n,i);let u=r-t,a=Math.trunc(t/8),p=Math.trunc((r-1)/8);if(a==p){let f=255>>t%8,d=(8-r%8)%8,y=(e.rawBuffer[a]&f)>>d;if(i){let A=2**(u-1);y>=A&&(y-=A*2)}return y}return u<=53?xp(e.rawBuffer,t,r,n,i):wp(e.rawBuffer,t,r,n,i)}function mp(e,t,r,n,i){return r-t<=6?$p(e.rawBuffer,t,r,n,i):hp(e.rawBuffer,t,r,n,i)}function $p(e,t,r,n,i){let s=r-t,o=0;if(n)for(let u=t;u<r;u++)o*=256,o+=e[u];else for(let u=r-1;u>=t;u--)o*=256,o+=e[u];if(i){let u=2**(s*8-1);o>=u&&(o-=u*2)}return o}function hp(e,t,r,n,i){let s=r-t,o=0n;if(n)for(let u=t;u<r;u++)o*=256n,o+=BigInt(e[u]);else for(let u=r-1;u>=t;u--)o*=256n,o+=BigInt(e[u]);if(i){let u=1n<<BigInt(s*8-1);o>=u&&(o-=u*2n)}return Number(o)}function xp(e,t,r,n,i){let s=t%8===0,o=r-t,u=Math.trunc(t/8),a=0;if(n){if(!s){let p=8-t%8;a=e[u++]&(1<<p)-1,o-=p}for(;o>=8;)a*=256,a+=e[u++],o-=8;o>0&&(a*=2**o,a+=e[u]>>8-o)}else if(s){let p=r-t,f=1;for(;p>=8;)a+=e[u++]*f,f*=256,p-=8;a+=(e[u]>>8-p)*f}else{let p=t%8,f=8-p,d=r-t,y=1;for(;d>=8;){let A=e[u]<<p|e[u+1]>>f;a+=(A&255)*y,y*=256,d-=8,u++}if(d>0){let A=d-Math.max(0,d-f),N=(e[u]&(1<<f)-1)>>f-A;d-=A,d>0&&(N*=2**d,N+=e[u+1]>>8-d),a+=N*y}}if(i){let p=2**(r-t-1);a>=p&&(a-=p*2)}return a}function wp(e,t,r,n,i){let s=t%8===0,o=r-t,u=Math.trunc(t/8),a=0n;if(n){if(!s){let p=8-t%8;a=BigInt(e[u++]&(1<<p)-1),o-=p}for(;o>=8;)a*=256n,a+=BigInt(e[u++]),o-=8;o>0&&(a<<=BigInt(o),a+=BigInt(e[u]>>8-o))}else if(s){let p=r-t,f=0n;for(;p>=8;)a+=BigInt(e[u++])<<f,f+=8n,p-=8;a+=BigInt(e[u]>>8-p)<<f}else{let p=t%8,f=8-p,d=r-t,y=0n;for(;d>=8;){let A=e[u]<<p|e[u+1]>>f;a+=BigInt(A&255)<<y,y+=8n,d-=8,u++}if(d>0){let A=d-Math.max(0,d-f),N=(e[u]&(1<<f)-1)>>f-A;d-=A,d>0&&(N<<=d,N+=e[u+1]>>8-d),a+=BigInt(N)<<y}}if(i){let p=2n**BigInt(r-t-1);a>=p&&(a-=p*2n)}return Number(a)}function al(e,t,r){if(t<0||t>e.bitSize||r<t||r>e.bitSize){let n=`Invalid bit array slice: start = ${t}, end = ${r}, bit size = ${e.bitSize}`;throw new globalThis.Error(n)}}var cr=class e extends c{static isResult(t){return t instanceof e}},_=class extends cr{constructor(t){super(),this[0]=t}isOk(){return!0}},h=class extends cr{constructor(t){super(),this[0]=t}isOk(){return!1}};function k(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!ul(n)||!ul(i)||!Lp(n,i)||yp(n,i)||bp(n,i)||vp(n,i)||kp(n,i)||Op(n,i)||Sp(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[u,a]=gp(n);for(let p of u(n))r.push(a(n,p),a(i,p))}return!0}function gp(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function yp(e,t){return e instanceof Date&&(e>t||e<t)}function bp(e,t){return!(e instanceof ze)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function vp(e,t){return Array.isArray(e)&&e.length!==t.length}function kp(e,t){return e instanceof Map&&e.size!==t.size}function Op(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Sp(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function ul(e){return typeof e=="object"&&e!==null}function Lp(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function Me(e,t){return t===0?0:e%t}function me(e,t){return Math.trunc(fr(e,t))}function fr(e,t){return t===0?0:e/t}function ye(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let u in s)o[u]=s[u];return o}var $=class extends c{constructor(t){super(),this[0]=t}},w=class extends c{};function dr(e){return!k(e,new w)}function tn(e,t){if(e instanceof $){let r=e[0];return new _(r)}else return new h(t)}function Tt(e,t){return e instanceof $?e[0]:t}function rn(e,t){if(e instanceof $){let r=e[0];return new $(t(r))}else return new w}function cl(e){return e instanceof $?e[0]:new w}function Ap(e,t){return!k(P(t,e),new h(void 0))}function pl(e,t){return Ap(t,e)}function G(e,t,r){return dl(t,r,e)}function jp(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head[0],s=r.head[1];e=r.tail,t=G(n,i,s)}}}function Qn(e){return jp(e,Z())}function Ep(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function Tp(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return Ep(n,l([]));{let i=r.head[0];e=r.tail,t=m(i,n)}}}function Gs(e){return Tp(ei(e),l([]))}function Zs(e,t){return fl(t,e)}function Ks(e){return e[1]}function _l(e,t){let r=e[0],n=e[1];return[r,t(n)]}function zp(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function et(e){return zp(e,0)}function Vs(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function T(e){return Vs(e,l([]))}function Xs(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return!1;if(r.atLeastLength(1)&&k(r.head,n)){let i=r.head;return!0}else e=r.tail,t=n}}function nn(e){if(e.hasLength(0))return new h(void 0);{let t=e.head;return new _(t)}}function Mp(e){return(t,r)=>{let n=P(t,e(r));if(n.isOk()){let i=n[0];return G(t,e(r),m(r,i))}else return G(t,e(r),l([r]))}}function Cp(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return T(s);{let o=n.head,u=n.tail,a=i(o)?m(o,s):s;e=u,t=i,r=a}}}function qt(e,t){return Cp(e,t,l([]))}function Ip(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return T(s);{let o=n.head,u=n.tail,a=(()=>{let p=i(o);if(p.isOk()){let f=p[0];return m(f,s)}else return s})();e=u,t=i,r=a}}}function Pe(e,t){return Ip(e,t,l([]))}function Np(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return T(s);{let o=n.head;e=n.tail,t=i,r=m(i(o),s)}}}function j(e,t){return Np(e,t,l([]))}function Bp(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return T(u);{let a=i.head,p=i.tail,f=m(s(a,o),u);e=p,t=s,r=o+1,n=f}}}function sn(e,t){return Bp(e,t,0,l([]))}function Wp(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return T(s);if(n.hasLength(0))return T(s);{let u=n.head;e=n.tail,t=i-1,r=m(u,s)}}}function Qs(e,t){return Wp(e,t,l([]))}function Dp(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function ft(e,t){return Dp(T(e),t)}function Fp(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return T(n);{let i=r.head;e=r.tail,t=Vs(i,n)}}}function _r(e){return Fp(e,l([]))}function on(e,t){let r=j(e,t);return _r(r)}function le(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function eo(e,t){return le(e,Z(),Mp(t))}function $l(e,t,r){let n=le(e,[t,l([])],(i,s)=>{let o=i[0],u=i[1],a=r(o,s),p=a[0],f=a[1];return[p,m(f,u)]});return _l(n,T)}function Pp(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return s;{let a=i.head;e=i.tail,t=o(s,a,u),r=o,n=u+1}}}function mr(e,t,r){return Pp(e,t,r,0)}function to(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new h(void 0);{let i=r.head,s=r.tail;if(n(i))return new _(i);e=s,t=n}}}function Jp(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return T(s);{let o=n.head,u=n.tail;pl(i,o)?(e=u,t=i,r=s):(e=u,t=G(i,o,void 0),r=m(o,s))}}}function ro(e){return Jp(e,Z(),l([]))}function Hp(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return s;e=n,t=i-1,r=m(n,s)}}function hl(e,t){return Hp(e,t,l([]))}function Rp(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.atLeastLength(1)&&k(i.head[0],s)){let a=i.head[0],p=i.tail;return Vs(u,m([a,o],p))}else if(i.atLeastLength(1)){let a=i.head;e=i.tail,t=s,r=o,n=m(a,u)}else return T(m([s,o],u))}}function no(e,t,r){return Rp(e,t,r,l([]))}function Yp(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return[T(o),T(u)];{let a=i.head,p=i.tail;s(a)?(e=p,t=s,r=m(a,o),n=u):(e=p,t=s,r=o,n=m(a,u))}}}function xl(e,t){return Yp(e,t,l([]),l([]))}function Up(e,t){if(e.hasLength(0))return new h(void 0);{let r=e.head,n=e.tail;return new _(le(n,r,t))}}function wl(e){return Up(e,(t,r)=>r)}function gl(e){return!!e.isOk()}function R(e,t){if(e.isOk()){let r=e[0];return new _(t(r))}else{let r=e[0];return new h(r)}}function tt(e,t){if(e.isOk()){let r=e[0];return new _(r)}else{let r=e[0];return new h(t(r))}}function M(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new h(r)}}function Ae(e,t){return M(e,t)}function K(e,t){return e.isOk()?e[0]:t}function Q(e,t){if(e.isOk()){let r=e[0];return new _(r)}else return new h(t)}function zt(e,t){if(e.isOk()){let r=e[0];return new _(r)}else{let r=e[0];return t(r)}}function cn(e,t){return oo(e,t)}function bl(e){let r=e,n=$r(r),i=T(n);return je(i)}var V=class extends c{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function Xp(e,t){return tt(e,r=>j(r,t))}function lo(e){return co(e)}function vl(e){return t=>{if(e.hasLength(0))return new h(l([new V("another type",ce(t),l([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new _(s)}else return vl(n)(t)}}}function Qp(e,t){let r=t,n=vl(l([co,o=>R(kl(o),v)])),i=(()=>{let o=n(r);if(o.isOk())return o[0];{let u=l(["<",ce(r),">"]),a=je(u);return a}})(),s=e;return new V(s.expected,s.found,m(i,e.path))}function ao(e,t){return r=>{let n=new V("field","nothing",l([]));return M(Ol(r,e),i=>{let o=tn(i,l([n])),u=M(o,t);return Xp(u,a=>Qp(a,e))})}}var Sl=new WeakMap,po=new DataView(new ArrayBuffer(8)),fo=0;function _o(e){let t=Sl.get(e);if(t!==void 0)return t;let r=fo++;return fo===2147483647&&(fo=0),Sl.set(e,r),r}function mo(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function ho(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Al(e){po.setFloat64(0,e);let t=po.getInt32(0),r=po.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function tf(e){return ho(e.toString())}function rf(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return _o(e);if(e instanceof Date)return Al(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+Ee(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+Ee(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+mo(Ee(n),Ee(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+mo(Ee(o),ho(s))|0}}return r}function Ee(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Al(e);case"string":return ho(e);case"bigint":return tf(e);case"object":return rf(e);case"symbol":return _o(e);case"function":return _o(e);default:return 0}}var He=5,xo=Math.pow(2,He),nf=xo-1,sf=xo/2,of=xo/4,pe=0,Je=1,be=2,Ct=3,wo={type:be,bitmap:0,array:[]};function pn(e,t){return e>>>t&nf}function ii(e,t){return 1<<pn(e,t)}function uf(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function go(e,t){return uf(e&t-1)}function Te(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function lf(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function $o(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function jl(e,t,r,n,i,s){let o=Ee(t);if(o===n)return{type:Ct,hash:o,array:[{type:pe,k:t,v:r},{type:pe,k:i,v:s}]};let u={val:!1};return fn(yo(wo,e,o,t,r,u),e,n,i,s,u)}function fn(e,t,r,n,i,s){switch(e.type){case Je:return af(e,t,r,n,i,s);case be:return yo(e,t,r,n,i,s);case Ct:return cf(e,t,r,n,i,s)}}function af(e,t,r,n,i,s){let o=pn(r,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:Je,size:e.size+1,array:Te(e.array,o,{type:pe,k:n,v:i})};if(u.type===pe)return k(n,u.k)?i===u.v?e:{type:Je,size:e.size,array:Te(e.array,o,{type:pe,k:n,v:i})}:(s.val=!0,{type:Je,size:e.size,array:Te(e.array,o,jl(t+He,u.k,u.v,r,n,i))});let a=fn(u,t+He,r,n,i,s);return a===u?e:{type:Je,size:e.size,array:Te(e.array,o,a)}}function yo(e,t,r,n,i,s){let o=ii(r,t),u=go(e.bitmap,o);if(e.bitmap&o){let a=e.array[u];if(a.type!==pe){let f=fn(a,t+He,r,n,i,s);return f===a?e:{type:be,bitmap:e.bitmap,array:Te(e.array,u,f)}}let p=a.k;return k(n,p)?i===a.v?e:{type:be,bitmap:e.bitmap,array:Te(e.array,u,{type:pe,k:n,v:i})}:(s.val=!0,{type:be,bitmap:e.bitmap,array:Te(e.array,u,jl(t+He,p,a.v,r,n,i))})}else{let a=e.array.length;if(a>=sf){let p=new Array(32),f=pn(r,t);p[f]=yo(wo,t+He,r,n,i,s);let d=0,y=e.bitmap;for(let A=0;A<32;A++){if(y&1){let N=e.array[d++];p[A]=N}y=y>>>1}return{type:Je,size:a+1,array:p}}else{let p=lf(e.array,u,{type:pe,k:n,v:i});return s.val=!0,{type:be,bitmap:e.bitmap|o,array:p}}}}function cf(e,t,r,n,i,s){if(r===e.hash){let o=bo(e,n);if(o!==-1)return e.array[o].v===i?e:{type:Ct,hash:r,array:Te(e.array,o,{type:pe,k:n,v:i})};let u=e.array.length;return s.val=!0,{type:Ct,hash:r,array:Te(e.array,u,{type:pe,k:n,v:i})}}return fn({type:be,bitmap:ii(e.hash,t),array:[e]},t,r,n,i,s)}function bo(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(k(t,e.array[n].k))return n;return-1}function ni(e,t,r,n){switch(e.type){case Je:return pf(e,t,r,n);case be:return ff(e,t,r,n);case Ct:return df(e,n)}}function pf(e,t,r,n){let i=pn(r,t),s=e.array[i];if(s!==void 0){if(s.type!==pe)return ni(s,t+He,r,n);if(k(n,s.k))return s}}function ff(e,t,r,n){let i=ii(r,t);if(!(e.bitmap&i))return;let s=go(e.bitmap,i),o=e.array[s];if(o.type!==pe)return ni(o,t+He,r,n);if(k(n,o.k))return o}function df(e,t){let r=bo(e,t);if(!(r<0))return e.array[r]}function vo(e,t,r,n){switch(e.type){case Je:return _f(e,t,r,n);case be:return mf(e,t,r,n);case Ct:return $f(e,n)}}function _f(e,t,r,n){let i=pn(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===pe){if(!k(s.k,n))return e}else if(o=vo(s,t+He,r,n),o===s)return e;if(o===void 0){if(e.size<=of){let u=e.array,a=new Array(e.size-1),p=0,f=0,d=0;for(;p<i;){let y=u[p];y!==void 0&&(a[f]=y,d|=1<<p,++f),++p}for(++p;p<u.length;){let y=u[p];y!==void 0&&(a[f]=y,d|=1<<p,++f),++p}return{type:be,bitmap:d,array:a}}return{type:Je,size:e.size-1,array:Te(e.array,i,o)}}return{type:Je,size:e.size,array:Te(e.array,i,o)}}function mf(e,t,r,n){let i=ii(r,t);if(!(e.bitmap&i))return e;let s=go(e.bitmap,i),o=e.array[s];if(o.type!==pe){let u=vo(o,t+He,r,n);return u===o?e:u!==void 0?{type:be,bitmap:e.bitmap,array:Te(e.array,s,u)}:e.bitmap===i?void 0:{type:be,bitmap:e.bitmap^i,array:$o(e.array,s)}}return k(n,o.k)?e.bitmap===i?void 0:{type:be,bitmap:e.bitmap^i,array:$o(e.array,s)}:e}function $f(e,t){let r=bo(e,t);if(r<0)return e;if(e.array.length!==1)return{type:Ct,hash:e.hash,array:$o(e.array,r)}}function El(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===pe){t(s.v,s.k);continue}El(s,t)}}}var qe=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=ni(this.root,0,Ee(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?wo:this.root,s=fn(i,0,Ee(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=vo(this.root,0,Ee(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:ni(this.root,0,Ee(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){El(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+mo(Ee(r),Ee(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!k(t.get(n,!r),r))throw Ll}),!0}catch(r){if(r===Ll)return!1;throw r}}},Ll=Symbol();var si=void 0,Tl={};function J(e){return e}function dt(e){return/^[-+]?(\d+)$/.test(e)?new _(parseInt(e)):new h(si)}function v(e){return e.toString()}function oi(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let r=t.indexOf("e");return r>=0?t.slice(0,r)+".0"+t.slice(r):t+".0"}}function so(e,t,r){return typeof e.replaceAll<"u"?e.replaceAll(t,r):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)}function rt(e){if(e==="")return 0;let t=ui(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function $r(e){let t=ui(e);return t?F.fromArray(Array.from(t).map(r=>r.segment)):F.fromArray(e.match(/./gsu))}var ql;function ui(e){if(globalThis.Intl&&Intl.Segmenter)return ql||=new Intl.Segmenter,ql.segment(e)[Symbol.iterator]()}function li(e){let t,r=ui(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new _([t,e.slice(t.length)]):new h(si)}function It(e){return[e.charCodeAt(0)|0,e.slice(1)]}function ae(e){return e.toLowerCase()}function oo(e,t){return e+t}function uo(e,t){return F.fromArray(e.split(t))}function ne(e,t){let r=e[Symbol.iterator](),n=r.next().value||"",i=r.next();for(;!i.done;)n=n+t+i.value,i=r.next();return n}function je(e){let t="";for(let r of e)t=t+r;return t}function Oo(e,t,r){if(r<=0||t>=e.length)return"";let n=ui(e);if(n){for(;t-- >0;)n.next();let i="";for(;r-- >0;){let s=n.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+r).join("")}function ie(e,t,r){return e.slice(t,t+r)}function dn(e,t){return e.indexOf(t)>=0}function Nt(e,t){return e.startsWith(t)}function hr(e,t){let r=e.indexOf(t);if(r>=0){let n=e.slice(0,r),i=e.slice(r+t.length);return new _([n,i])}else return new h(si)}var Ml=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),xf=new RegExp(`^[${Ml}]*`),wf=new RegExp(`[${Ml}]*$`);function Cl(e){return e.replace(xf,"")}function Il(e){return e.replace(wf,"")}function nt(e){console.log(e)}function So(e){typeof process=="object"&&process.stdout?.write?process.stdout.write(e):typeof Deno=="object"?Deno.stdout.writeSync(new TextEncoder().encode(e)):console.log(e)}function un(e){return Math.floor(e)}function Lo(e){return Math.round(e)}function ln(){let e=Math.random();return e===1?ln():e}function Nl(e){return new Et(e)}function Bl(e){return F.fromArray(Array.from(e).map(t=>t.codePointAt(0)))}function Ao(e){return e.value}function Z(){return qe.new()}function ei(e){return F.fromArray(e.entries())}function fl(e,t){return t.delete(e)}function P(e,t){let r=e.get(t,Tl);return r===Tl?new h(si):new _(r)}function dl(e,t,r){return r.set(e,t)}function ce(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof cr)return"Result";if(e instanceof F)return"List";if(e instanceof ze)return"BitArray";if(e instanceof qe)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function jo(e,t){return gf(e,ce(t))}function gf(e,t){return new h(F.fromArray([new V(e,t,F.fromArray([]))]))}function co(e){return typeof e=="string"?new _(e):jo("String",e)}function kl(e){return Number.isInteger(e)?new _(e):jo("Int",e)}function Ol(e,t){let r=()=>jo("Dict",e);if(e instanceof qe||e instanceof WeakMap||e instanceof Map){let n=P(e,t);return new _(n.isOk()?new $(n[0]):new w)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?zl(e,t,()=>new _(new w)):zl(e,t,r)}function zl(e,t,r){try{return t in e?new _(new $(e[t])):r()}catch{return r()}}function Re(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return yf(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return oi(e);if(Array.isArray(e))return`#(${e.map(Re).join(", ")})`;if(e instanceof F)return Of(e);if(e instanceof Et)return Sf(e);if(e instanceof ze)return`<<${Wl(e,"")}>>`;if(e instanceof c)return kf(e);if(e instanceof qe)return bf(e);if(e instanceof Set)return`//js(Set(${[...e].map(Re).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return vf(e)}function yf(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];switch(n){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}}return t+='"',t}function bf(e){let t="dict.from_list([",r=!0;return e.forEach((n,i)=>{r||(t=t+", "),t=t+"#("+Re(i)+", "+Re(n)+")",r=!1}),t+"])"}function vf(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${Re(s)}: ${Re(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function kf(e){let t=Object.keys(e).map(r=>{let n=Re(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Of(e){return`[${e.toArray().map(Re).join(", ")}]`}function Sf(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function Wl(e,t){if(e.bitSize===0)return t;for(let r=0;r<e.byteSize-1;r++)t+=e.byteAt(r).toString(),t+=", ";if(e.byteSize*8===e.bitSize)t+=e.byteAt(e.byteSize-1).toString();else{let r=e.bitSize%8;t+=e.byteAt(e.byteSize-1)>>8-r,t+=`:size(${r})`}return t}function Af(e){return-1*e}function ti(e){return e>=0?Lo(e):0-Lo(Af(e))}function ai(e,t){return e<t?e:t}function Eo(e,t){return e>t?e:t}function io(e){let t=ln()*e,r=un(t);return ti(r)}function Dl(e){let r=e,n=bl(r);return n}function _n(e,t,r){let i=e,s=so(i,t,r);return s}function he(e,t,r){if(r<0)return"";if(t<0){let s=rt(e)+t;return s<0?"":Oo(e,s,r)}else return Oo(e,t,r)}function Bt(e,t){let n=e,i=cn(n,t);return i}function ci(e){let r=je(e);return r}function xr(e){let r=Cl(e);return Il(r)}function _t(e,t){for(;;){let r=e,n=t;if(n>0){let s=li(r);if(s.isOk())e=s[0][1],t=n-1;else return r}else return r}}function se(e,t){if(t==="")return $r(e);{let n=e,i=uo(n,t);return j(i,J)}}function Ef(e){let r=Bl(e);return j(r,Nl)}function Fl(e){return Ef(e)}function wr(e){let t=Re(e);return t}function Hl(e,t){if(e instanceof qe||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new _(new w):new _(new $(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof F){let n=0;for(let i of e){if(n===t)return new _(new $(i));n++}return new h("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new _(new $(e[t])):new _(new w):new h(r?"Indexable":"Dict")}function Rl(e,t,r,n,i){if(!(e instanceof F||Array.isArray(e))){let o=new Ie("List",ce(e),i);return[i,F.fromArray([o])]}let s=[];for(let o of e){let u=t(o),[a,p]=u;if(p instanceof jt){let[f,d]=r(u,n.toString());return[i,d]}s.push(a),n++}return[F.fromArray(s),i]}function Yl(e){return Number.isInteger(e)?new _(e):new h(0)}function Ul(e){return typeof e=="string"?new _(e):new h(0)}function Gl(e){return e==null}var Ie=class extends c{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},ve=class extends c{constructor(t){super(),this.function=t}};function ke(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new _(n):new h(i)}function Y(e){return new ve(t=>[e,l([])])}function Mf(e,t){return new ve(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function Cf(e,t,r){for(;;){let n=e,i=t,s=r;if(s.hasLength(0))return i;{let o=s.head,u=s.tail,a=o.function(n),p=a;if(a[1].hasLength(0))return p;e=n,t=i,r=u}}}function If(e,t){return new ve(r=>{let n=e.function(r),i=n;return n[1].hasLength(0)?i:Cf(r,i,t)})}function zo(e){return new ve(t=>{if(Gl(t))return[new w,l([])];{let n=e.function(t),i=n[0],s=n[1];return[new $(i),s]}})}function Zl(e,t){return l([new Ie(e,ce(t),l([]))])}function Kl(e,t,r){let n=r(e);return n.isOk()?[n[0],l([])]:[n[0],l([new Ie(t,ce(e),l([]))])]}function Nf(e){return k(!0,e)?[!0,l([])]:k(!1,e)?[!1,l([])]:[!1,Zl("Bool",e)]}function Bf(e){return Kl(e,"Int",Yl)}function gr(e,t){return new ve(r=>[e,Zl(t,r)])}var yr=new ve(Nf),Oe=new ve(Bf);function Wf(e){return Kl(e,"String",Ul)}var S=new ve(Wf);function it(e){return new ve(t=>Rl(t,e.function,(r,n)=>mn(r,l([n])),0,l([])))}function mn(e,t){let r=If(S,l([Mf(Oe,v)])),n=j(t,s=>{let o=s,u=ke(o,r);return u.isOk()?u[0]:"<"+ce(o)+">"}),i=j(e[1],s=>{let o=s;return new Ie(o.expected,o.found,ft(n,s.path))});return[e[0],i]}function Vl(e,t,r,n,i){for(;;){let s=e,o=t,u=r,a=n,p=i;if(s.hasLength(0)){let f=u(a);return mn(f,T(o))}else{let f=s.head,d=s.tail,y=Hl(a,f);if(y.isOk()&&y[0]instanceof $){let A=y[0][0];e=d,t=m(f,o),r=u,n=A,i=p}else{if(y.isOk()&&y[0]instanceof w)return p(a,m(f,o));{let A=y[0],Lt=[u(a)[0],l([new Ie(A,ce(a),l([]))])];return mn(Lt,T(o))}}}}}function Mo(e,t,r){return new ve(n=>{let i=Vl(e,l([]),t.function,n,(f,d)=>{let N=[t.function(f)[0],l([new Ie("Field","Nothing",l([]))])];return mn(N,T(d))}),s=i[0],o=i[1],u=r(s).function(n),a=u[0],p=u[1];return[a,ft(o,p)]})}function Xl(e,t){return new ve(r=>Vl(e,l([]),t.function,r,(n,i)=>{let u=[t.function(n)[0],l([new Ie("Field","Nothing",l([]))])];return mn(u,T(i))}))}function b(e,t,r){return Mo(l([e]),t,r)}function Co(e){return JSON.stringify(e)}function Ql(e){return Object.fromEntries(e)}function ea(){return null}function ta(e){try{let t=JSON.parse(e);return new _(t)}catch(t){return new h(Df(t,e))}}function Df(e,t){return Ff(e)?new fi:Pf(e,t)}function Ff(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Pf(e,t){let r=[Jf,Hf,Yf,Rf];for(let n of r){let i=n(e,t);if(i)return i}return new mt("",0)}function Jf(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=pi(r[1]);return new mt(n,-1)}function Hf(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=pi(r[1]),i=Number(r[2]);return new mt(n,i)}function Rf(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=Uf(i,s,t),u=pi(t[o]);return new mt(u,o)}function Yf(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=pi(r[2]);return new mt(n,0)}function pi(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function Uf(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var fi=class extends c{},mt=class extends c{constructor(t){super(),this[0]=t}};var Io=class extends c{constructor(t){super(),this[0]=t}};function Gf(e,t){return Ae(ta(e),r=>{let n=ke(r,t);return tt(n,i=>new Io(i))})}function Bo(e,t){return Gf(e,t)}function Wo(e){return Co(e)}function xe(e){return e}function Wt(e){return e}function ra(){return ea()}function na(e,t){if(e instanceof $){let r=e[0];return t(r)}else return ra()}function st(e){return Ql(e)}var O=class extends c{constructor(t,r,n,i,s,o,u){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=u}};function Xf(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function Ue(e,t){return new _((()=>{let r=t;return new O(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new $(e))})())}function Qf(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("#")&&u===0){let a=s.slice(1);return Ue(a,o)}else if(s.startsWith("#")){let a=s.slice(1),p=ie(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,d.host,d.port,d.path,new $(p),d.fragment)})();return Ue(a,f)}else{if(s==="")return new _((()=>{let a=o;return new O(a.scheme,a.userinfo,a.host,a.port,a.path,new $(i),a.fragment)})());{let p=It(s)[1];e=i,t=p,r=o,n=u+1}}}}function $t(e,t){return Qf(e,e,t,0)}function ed(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("?")){let a=s.slice(1),p=ie(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,d.host,d.port,p,d.query,d.fragment)})();return $t(a,f)}else if(s.startsWith("#")){let a=s.slice(1),p=ie(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,d.host,d.port,p,d.query,d.fragment)})();return Ue(a,f)}else{if(s==="")return new _((()=>{let a=o;return new O(a.scheme,a.userinfo,a.host,a.port,i,a.query,a.fragment)})());{let p=It(s)[1];e=i,t=p,r=o,n=u+1}}}}function vr(e,t){return ed(e,e,t,0)}function Ye(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let o=n.slice(1),u=(()=>{let a=i;return new O(a.scheme,a.userinfo,a.host,new $(s),a.path,a.query,a.fragment)})();return $t(o,u)}else if(n.startsWith("#")){let o=n.slice(1),u=(()=>{let a=i;return new O(a.scheme,a.userinfo,a.host,new $(s),a.path,a.query,a.fragment)})();return Ue(o,u)}else if(n.startsWith("/")){let o=(()=>{let u=i;return new O(u.scheme,u.userinfo,u.host,new $(s),u.path,u.query,u.fragment)})();return vr(n,o)}else return n===""?new _((()=>{let o=i;return new O(o.scheme,o.userinfo,o.host,new $(s),o.path,o.query,o.fragment)})()):new h(void 0)}}function _i(e,t){if(e.startsWith(":0")){let r=e.slice(2);return Ye(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return Ye(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return Ye(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return Ye(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return Ye(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return Ye(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return Ye(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return Ye(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return Ye(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return Ye(r,t,9)}else{if(e.startsWith(":"))return new h(void 0);if(e.startsWith("?")){let r=e.slice(1);return $t(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return Ue(r,t)}else return e.startsWith("/")?vr(e,t):e===""?new _(t):new h(void 0)}}function ia(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s==="")return new _((()=>{let a=o;return new O(a.scheme,a.userinfo,new $(i),a.port,a.path,a.query,a.fragment)})());if(s.startsWith(":")){let a=ie(i,0,u),p=(()=>{let f=o;return new O(f.scheme,f.userinfo,new $(a),f.port,f.path,f.query,f.fragment)})();return _i(s,p)}else if(s.startsWith("/")){let a=ie(i,0,u),p=(()=>{let f=o;return new O(f.scheme,f.userinfo,new $(a),f.port,f.path,f.query,f.fragment)})();return vr(s,p)}else if(s.startsWith("?")){let a=s.slice(1),p=ie(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,new $(p),d.port,d.path,d.query,d.fragment)})();return $t(a,f)}else if(s.startsWith("#")){let a=s.slice(1),p=ie(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,new $(p),d.port,d.path,d.query,d.fragment)})();return Ue(a,f)}else{let p=It(s)[1];e=i,t=p,r=o,n=u+1}}}function td(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s==="")return new _((()=>{let a=o;return new O(a.scheme,a.userinfo,new $(s),a.port,a.path,a.query,a.fragment)})());if(s.startsWith("]")&&u===0){let a=s.slice(1);return _i(a,o)}else if(s.startsWith("]")){let a=s.slice(1),p=ie(i,0,u+1),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,new $(p),d.port,d.path,d.query,d.fragment)})();return _i(a,f)}else{if(s.startsWith("/")&&u===0)return vr(s,o);if(s.startsWith("/")){let a=ie(i,0,u),p=(()=>{let f=o;return new O(f.scheme,f.userinfo,new $(a),f.port,f.path,f.query,f.fragment)})();return vr(s,p)}else if(s.startsWith("?")&&u===0){let a=s.slice(1);return $t(a,o)}else if(s.startsWith("?")){let a=s.slice(1),p=ie(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,new $(p),d.port,d.path,d.query,d.fragment)})();return $t(a,f)}else if(s.startsWith("#")&&u===0){let a=s.slice(1);return Ue(a,o)}else if(s.startsWith("#")){let a=s.slice(1),p=ie(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,new $(p),d.port,d.path,d.query,d.fragment)})();return Ue(a,f)}else{let a=It(s),p=a[0],f=a[1];if(Xf(p))e=i,t=f,r=o,n=u+1;else return ia(i,i,o,0)}}}}function rd(e,t){return td(e,e,t,0)}function nd(e,t){return ia(e,e,t,0)}function br(e,t){if(e.startsWith("["))return rd(e,t);if(e.startsWith(":")){let r=(()=>{let n=t;return new O(n.scheme,n.userinfo,new $(""),n.port,n.path,n.query,n.fragment)})();return _i(e,r)}else return e===""?new _((()=>{let r=t;return new O(r.scheme,r.userinfo,new $(""),r.port,r.path,r.query,r.fragment)})()):nd(e,t)}function id(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("@")&&u===0){let a=s.slice(1);return br(a,o)}else if(s.startsWith("@")){let a=s.slice(1),p=ie(i,0,u),f=(()=>{let d=o;return new O(d.scheme,new $(p),d.host,d.port,d.path,d.query,d.fragment)})();return br(a,f)}else{if(s==="")return br(i,o);if(s.startsWith("/"))return br(i,o);if(s.startsWith("?"))return br(i,o);if(s.startsWith("#"))return br(i,o);{let p=It(s)[1];e=i,t=p,r=o,n=u+1}}}}function sd(e,t){return id(e,e,t,0)}function Do(e,t){if(e==="//")return new _((()=>{let r=t;return new O(r.scheme,r.userinfo,new $(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return sd(r,t)}else return vr(e,t)}function od(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("/")&&u===0)return Do(s,o);if(s.startsWith("/")){let a=ie(i,0,u),p=(()=>{let f=o;return new O(new $(ae(a)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment)})();return Do(s,p)}else if(s.startsWith("?")&&u===0){let a=s.slice(1);return $t(a,o)}else if(s.startsWith("?")){let a=s.slice(1),p=ie(i,0,u),f=(()=>{let d=o;return new O(new $(ae(p)),d.userinfo,d.host,d.port,d.path,d.query,d.fragment)})();return $t(a,f)}else if(s.startsWith("#")&&u===0){let a=s.slice(1);return Ue(a,o)}else if(s.startsWith("#")){let a=s.slice(1),p=ie(i,0,u),f=(()=>{let d=o;return new O(new $(ae(p)),d.userinfo,d.host,d.port,d.path,d.query,d.fragment)})();return Ue(a,f)}else{if(s.startsWith(":")&&u===0)return new h(void 0);if(s.startsWith(":")){let a=s.slice(1),p=ie(i,0,u),f=(()=>{let d=o;return new O(new $(ae(p)),d.userinfo,d.host,d.port,d.path,d.query,d.fragment)})();return Do(a,f)}else{if(s==="")return new _((()=>{let a=o;return new O(a.scheme,a.userinfo,a.host,a.port,i,a.query,a.fragment)})());{let p=It(s)[1];e=i,t=p,r=o,n=u+1}}}}}function ud(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return T(n);{let i=r.head,s=r.tail,o=i===""||i==="."?n:i===".."&&n.hasLength(0)?l([]):i===".."&&n.atLeastLength(1)?n.tail:m(i,n);e=s,t=o}}}function ld(e){return ud(e,l([]))}function Fo(e){return ld(se(e,"/"))}function Po(e){let t=(()=>{let u=e.fragment;if(u instanceof $){let a=u[0];return l(["#",a])}else return l([])})(),r=(()=>{let u=e.query;if(u instanceof $){let a=u[0];return m("?",m(a,t))}else return t})(),n=m(e.path,r),i=(()=>{let u=e.host,a=Nt(e.path,"/");if(u instanceof $&&!a&&u[0]!==""){let p=u[0];return m("/",n)}else return n})(),s=(()=>{let u=e.host,a=e.port;if(u instanceof $&&a instanceof $){let p=a[0];return m(":",m(v(p),i))}else return i})(),o=(()=>{let u=e.scheme,a=e.userinfo,p=e.host;if(u instanceof $&&a instanceof $&&p instanceof $){let f=u[0],d=a[0],y=p[0];return m(f,m("://",m(d,m("@",m(y,s)))))}else if(u instanceof $&&a instanceof w&&p instanceof $){let f=u[0],d=p[0];return m(f,m("://",m(d,s)))}else if(u instanceof $&&a instanceof $&&p instanceof w){let f=u[0];return m(f,m(":",s))}else if(u instanceof $&&a instanceof w&&p instanceof w){let f=u[0];return m(f,m(":",s))}else if(u instanceof w&&a instanceof w&&p instanceof $){let f=p[0];return m("//",m(f,s))}else return s})();return ci(o)}var ad=new O(new w,new w,new w,new w,"",new w,new w);function mi(e){return od(e,e,ad,0)}function Ge(e,t,r){return e?t:r()}var $n=class extends c{constructor(t){super(),this.all=t}};function sa(e){return new $n(l([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function Be(e){return sa((t,r,n,i)=>e(t))}function B(){return new $n(l([]))}function $i(e){return new $n(le(e,l([]),(t,r)=>{let n=r.all;return ft(t,n)}))}var xt=class extends c{constructor(t){super(),this.content=t}},U=class extends c{constructor(t,r,n,i,s,o,u){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=u}},Ze=class extends c{constructor(t){super(),this.subtree=t}},wt=class extends c{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},kr=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function md(e){if(e instanceof wt)return new h(void 0);{let t=e[0],r=e[1],n=_t(t,2);return new _([n,r])}}function $d(e,t,r){return mr(e,t,(n,i,s)=>{let o=r+"-"+v(s);return oa(i,n,o)})}function oa(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof xt)return i;if(n instanceof Ze){let o=n.subtree;e=o(),t=i,r=s}else{let o=n.attrs,u=n.children,a=le(o,i,(p,f)=>{let d=md(f);if(d.isOk()){let y=d[0][0],A=d[0][1];return G(p,s+"-"+y,A)}else return p});return $d(u,a,s)}}}function ua(e){return oa(e,Z(),"0")}function x(e,t){return new wt(e,t,!1)}function aa(e,t){return new kr("on"+e,t)}function ca(e,t){if(e instanceof wt){let r=e[0],n=e[1],i=e.as_property;return new wt(r,n,i)}else{let r=e[0],n=e[1];return new kr(r,i=>R(n(i),t))}}function pa(e){return x("style",le(e,"",(t,r)=>{let n=r[0],i=r[1];return t+n+":"+i+";"}))}function g(e){return x("class",e)}function gt(e,t){return x("data-"+e,t)}function I(e){return x("id",e)}function fa(e){return x("value",e)}function Ho(e){return x("placeholder",e)}function Or(e){return x("href",e)}function Ro(e){return x("rel",e)}function we(e,t,r){return e==="area"?new U("","",e,t,l([]),!1,!0):e==="base"?new U("","",e,t,l([]),!1,!0):e==="br"?new U("","",e,t,l([]),!1,!0):e==="col"?new U("","",e,t,l([]),!1,!0):e==="embed"?new U("","",e,t,l([]),!1,!0):e==="hr"?new U("","",e,t,l([]),!1,!0):e==="img"?new U("","",e,t,l([]),!1,!0):e==="input"?new U("","",e,t,l([]),!1,!0):e==="link"?new U("","",e,t,l([]),!1,!0):e==="meta"?new U("","",e,t,l([]),!1,!0):e==="param"?new U("","",e,t,l([]),!1,!0):e==="source"?new U("","",e,t,l([]),!1,!0):e==="track"?new U("","",e,t,l([]),!1,!0):e==="wbr"?new U("","",e,t,l([]),!1,!0):new U("","",e,t,r,!1,!1)}function da(e,t){if(e instanceof U){let r=e.namespace,n=e.tag,i=e.attrs,s=e.children,o=e.self_closing,u=e.void;return new U(t,r,n,i,s,o,u)}else if(e instanceof Ze){let r=e.subtree;return new Ze(()=>da(r(),t))}else return e}function _a(e,t){return e(j(t,r=>{let n=r[0],i=r[1];return da(i,n)}))}function Lr(e,t,r,n){return new U("",e,t,r,n,!1,!1)}function Ar(e){return new xt(e)}function ee(e){return we("lustre-fragment",l([pa(l([["display","contents"]]))]),e)}function Sr(e,t){if(e instanceof xt){let r=e.content;return new xt(r)}else if(e instanceof Ze){let r=e.subtree;return new Ze(()=>Sr(r(),t))}else{let r=e.key,n=e.namespace,i=e.tag,s=e.attrs,o=e.children,u=e.self_closing,a=e.void;return new Ze(()=>new U(r,n,i,j(s,p=>ca(p,t)),j(o,p=>Sr(p,t)),u,a))}}var hn=class extends c{constructor(t){super(),this.dict=t}};function hi(){return new hn(Z())}function Yo(e,t){let r=e.dict,n=P(r,t);return gl(n)}function ma(e,t){return new hn(Zs(e.dict,t))}var hd=void 0;function Uo(e,t){return new hn(G(e.dict,t,hd))}var xi=class extends c{constructor(t){super(),this[0]=t}},wi=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},gi=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function xa(e){return k(e.created,Z())&&k(e.removed,hi())&&k(e.updated,Z())}var xn=class extends c{constructor(t){super(),this[0]=t}},bi=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},wn=class extends c{constructor(t){super(),this[0]=t}},Ke=class extends c{constructor(t){super(),this[0]=t}},gn=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},yn=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};var bn=class extends c{},vn=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},kn=class extends c{constructor(t){super(),this[0]=t}},vi=class extends c{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Go(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:u}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let a=document.createTextNode(o.content);u.replaceChild(a,s),n??=a}else{let a=document.createTextNode(o.content);u.appendChild(a),n??=a}else if(o.tag!==void 0){let a=wd({prev:s,next:o,dispatch:r,stack:i});s?s!==a&&u.replaceChild(a,s):u.appendChild(a),n??=a}}return n}function wd({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),u;if(On.has(o))u=On.get(o);else{let W=new Map;On.set(o,W),u=W}let a=s?new Set(u.keys()):null,p=s?new Set(Array.from(e.attributes,W=>W.name)):null,f=null,d=null,y=null;if(s&&t.tag==="textarea"){let W=t.children[Symbol.iterator]().next().value?.content;W!==void 0&&(o.value=W)}let A=[];for(let W of t.attrs){let D=W[0],te=W[1];if(W.as_property)o[D]!==te&&(o[D]=te),s&&p.delete(D);else if(D.startsWith("on")){let Le=D.slice(2),Ys=r(te,Le==="input");u.has(Le)||o.addEventListener(Le,Sn),u.set(Le,Ys),s&&a.delete(Le)}else if(D.startsWith("data-lustre-on-")){let Le=D.slice(15),Ys=r(gd);u.has(Le)||o.addEventListener(Le,Sn),u.set(Le,Ys),o.setAttribute(D,te),s&&(a.delete(Le),p.delete(D))}else D.startsWith("delegate:data-")||D.startsWith("delegate:aria-")?(o.setAttribute(D,te),A.push([D.slice(10),te])):D==="class"?f=f===null?te:f+" "+te:D==="style"?d=d===null?te:d+te:D==="dangerous-unescaped-html"?y=te:(o.getAttribute(D)!==te&&o.setAttribute(D,te),(D==="value"||D==="selected")&&(o[D]=te),s&&p.delete(D))}if(f!==null&&(o.setAttribute("class",f),s&&p.delete("class")),d!==null&&(o.setAttribute("style",d),s&&p.delete("style")),s){for(let W of p)o.removeAttribute(W);for(let W of a)u.delete(W),o.removeEventListener(W,Sn)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let W of o.assignedElements())for(let[D,te]of A)W.hasAttribute(D)||W.setAttribute(D,te)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(y!==null)return o.innerHTML=y,o;let N=o.firstChild,Xr=null,Lt=null,ct=null,At=ki(t).next().value;if(s&&At!==void 0&&At.key!==void 0&&At.key!==""){Xr=new Set,Lt=ga(e),ct=ga(t);for(let W of ki(t))N=yd(N,W,o,n,ct,Lt,Xr)}else for(let W of ki(t))n.unshift({prev:N,next:W,parent:o}),N=N?.nextSibling;for(;N;){let W=N.nextSibling;o.removeChild(N),N=W}return o}var On=new WeakMap;function Sn(e){let t=e.currentTarget;if(!On.has(t)){t.removeEventListener(e.type,Sn);return}let r=On.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,Sn);return}r.get(e.type)(e)}function gd(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let u=o.split(".");for(let a=0,p=s,f=e;a<u.length;a++)a===u.length-1?p[u[a]]=f[u[a]]:(p[u[a]]??={},f=f[u[a]],p=p[u[a]]);return s},{data:n})}}function ga(e){let t=new Map;if(e)for(let r of ki(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function yd(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let a=e.nextSibling;r.removeChild(e),e=a}if(s.size===0)return n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let u=s.get(t.key);if(!u&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!u&&e!==null){let a=document.createTextNode("");return r.insertBefore(a,e),n.unshift({prev:a,next:t,parent:r}),e}return!u||u===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e)}function*ki(e){for(let t of e.children)yield*ya(t)}function*ya(e){e.subtree!==void 0?yield*ya(e.subtree()):yield e}var Zo=class e{static start({init:t,update:r,view:n},i,s){if(!Ln())return new h(new An);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new h(new Oi(i));let u=new e(o,t(s),r,n);return new _(a=>u.send(a))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.setTimeout(()=>this.#n(n.all.toArray(),!0),0)}root;send(t){if(t instanceof wn){if(t[0]instanceof vi){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>u=>{let a=s(u);a instanceof _&&this.send(new Ke(a[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Go(i,r,n)}}else if(t instanceof Ke){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.clearTimeout(this.#t),this.#n()):this.#t||(this.#t=window.setTimeout(()=>this.#n()))}else if(t instanceof gn){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof bn)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[]){this.#t=void 0,this.#o(t);let r=this.#r(this.#e),n=(s,o=!1)=>u=>{let a=s(u);a instanceof _&&this.send(new Ke(a[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Go(i,r,n)}#o(t=[]){for(;this.#i.length>0;){let r=this.#i.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;){let r=t.shift(),n=u=>this.send(new Ke(u)),i=(u,a)=>this.root.dispatchEvent(new CustomEvent(u,{detail:a,bubbles:!0,composed:!0})),s=()=>{},o=this.root;r({dispatch:n,emit:i,select:s,root:o})}this.#i.length>0&&this.#o(t)}},ba=Zo.start;var Ko=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new _(u=>o.send(u))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#l=s,this.#n=new Map,this.#o=ua(this.#t),this.#u(r.all.toArray())}send(t){if(t instanceof xn){for(let r of t[0]){let n=this.#l.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof h||this.#r.push(i)}this.#u()}else if(t instanceof bi)this.#r=this.#r.concat(t[0].toArray()),this.#u(t[1].all.toArray());else if(!(t instanceof wn))if(t instanceof Ke)this.#r.push(t[0]),this.#u();else if(t instanceof gn){let r=new wi(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof yn){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof h)return;this.#r.push(n[0]),this.#u()}else if(t instanceof vn){let r=Gs(this.#l),n=new gi(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof kn&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#l;#u(t=[]){this.#a(t);let r=this.#i(this.#e),n=elements(this.#t,r);if(!xa(n)){let i=new xi(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#a(t=[]){for(;this.#r.length>0;){let r=this.#r.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;)t.shift()({dispatch:u=>this.send(new Ke(u)),emit:(u,a)=>this.root.dispatchEvent(new CustomEvent(u,{detail:a,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#a(t)}},bd=Ko.start,Ln=()=>globalThis.window&&window.document;var Vo=class extends c{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var Oi=class extends c{constructor(t){super(),this.selector=t}},An=class extends c{};function va(e,t,r){return new Vo(e,t,r,new w)}function ka(e,t,r){return Ge(!Ln(),new h(new An),()=>ba(e,t,r))}function q(e){return Ar(e)}function Sa(e,t){return we("h3",e,t)}function L(e,t){return we("div",e,t)}function Xo(e){return we("hr",e,l([]))}function fe(e,t){return we("p",e,t)}function jr(e,t){return we("a",e,t)}function X(e,t){return we("span",e,t)}function Ve(e,t){return we("button",e,t)}function La(e){return we("input",e,l([]))}function Aa(e,t){return we("textarea",e,l([Ar(t)]))}function Se(e,t){return aa(e,t)}function de(e){return Se("click",t=>new _(e))}function jn(e){return Se("mouseenter",t=>new _(e))}function En(e){return Se("mouseleave",t=>new _(e))}function yt(e){return Se("focus",t=>new _(e))}function Qo(e){return Se("blur",t=>new _(e))}function Od(e){let t=e;return ao("target",ao("value",lo))(t)}function eu(e){return Se("input",t=>{let r=Od(t);return R(r,e)})}function tu(e){return we("lustre-server-component",e,l([]))}function ru(e){return x("route",e)}var Er=class extends c{},Tr=class extends c{},Ai=class extends c{},ji=class extends c{},Ei=class extends c{},Ti=class extends c{},qi=class extends c{},zi=class extends c{},Mi=class extends c{};var Ci=class extends c{},Tn=class extends c{};function ja(e){return e instanceof qi?"connect":e instanceof Ei?"delete":e instanceof Er?"get":e instanceof Ai?"head":e instanceof zi?"options":e instanceof Mi?"patch":e instanceof Tr?"post":e instanceof ji?"put":e instanceof Ti?"trace":e[0]}function Ea(e){return e instanceof Ci?"http":"https"}function Ta(e){let t=ae(e);return t==="http"?new _(new Ci):t==="https"?new _(new Tn):new h(void 0)}var qr=class extends c{constructor(t,r,n,i,s,o,u,a){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=u,this.query=a}};function za(e){return new O(new $(Ea(e.scheme)),new w,new $(e.host),e.port,e.path,e.query,new w)}function iu(e){return Ae((()=>{let t=e.scheme,r=Tt(t,"");return Ta(r)})(),t=>Ae((()=>{let r=e.host;return tn(r,void 0)})(),r=>{let n=new qr(new Er,l([]),"",t,r,e.port,e.path,e.query);return new _(n)}))}function Ma(e,t,r){let n=no(e.headers,ae(t),r),i=e;return new qr(i.method,n,i.body,i.scheme,i.host,i.port,i.path,i.query)}function Ca(e,t){let r=e.method,n=e.headers,i=e.scheme,s=e.host,o=e.port,u=e.path,a=e.query;return new qr(r,n,t,i,s,o,u,a)}function Ia(e,t){let r=e;return new qr(t,r.headers,r.body,r.scheme,r.host,r.port,r.path,r.query)}function Na(e){let r=mi(e);return Ae(r,iu)}var ut=class extends c{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};var zr=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function Ii(e){return Promise.resolve(zr.wrap(e))}function Ba(e,t){return e.then(r=>t(zr.unwrap(r)))}function Ni(e,t){return e.then(r=>zr.wrap(t(zr.unwrap(r))))}function su(e,t){return e.catch(r=>t(r))}function Wa(e,t){return Ni(e,n=>(t(n),n))}function Bi(e,t){return Ba(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return Ii(new h(i))}})}async function Fa(e){try{return new _(await fetch(e))}catch(t){return new h(new Wi(t.toString()))}}function Pa(e){return new ut(e.status,F.fromArray([...e.headers]),e)}function Ja(e){let t=Po(za(e)),r=ja(e.method).toUpperCase(),n={headers:zd(e.headers),method:r};return r!=="GET"&&r!=="HEAD"&&(n.body=e.body),new globalThis.Request(t,n)}function zd(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function ou(e){let t;try{t=await e.body.text()}catch{return new h(new Di)}return new _(e.withFields({body:t}))}var Wi=class extends c{constructor(t){super(),this[0]=t}},Di=class extends c{};function Ha(e){let r=Ja(e),n=Fa(r);return Bi(n,i=>Ii(new _(Pa(i))))}function Ra(){return window.location.href||""}var Fi=class extends c{constructor(t){super(),this[0]=t}},uu=class extends c{constructor(t){super(),this[0]=t}},lu=class extends c{constructor(t){super(),this[0]=t}},Pi=class extends c{},au=class extends c{},cu=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},pu=class extends c{},fu=class extends c{constructor(t){super(),this.run=t}};function Ya(e){return zt(Na(e),t=>M((()=>{let r=Ra();return mi(r)})(),r=>{let n=(()=>{let s=r;return new O(s.scheme,s.userinfo,s.host,s.port,s.path,new w,new w)})(),i=(()=>{if(e.startsWith("/")){let s=n;return new O(s.scheme,s.userinfo,s.host,s.port,e,s.query,s.fragment)}else{let s=n;return new O(s.scheme,s.userinfo,s.host,s.port,n.path+"/"+e,s.query,s.fragment)}})();return iu(i)}))}function Ua(e,t,r){let n=Ha(e),i=Bi(n,ou),s=Ni(i,u=>{if(u.isOk()){let a=u[0];return t.run(new _(a))}else return t.run(new h(new Pi))}),o=su(s,u=>t.run(new h(new Pi)));Wa(o,r)}function Ji(e,t){return Be(r=>{let n=Ya(e);if(n.isOk()){let i=n[0];return Ua(i,t,r)}else return r(t.run(new h(new Fi(e))))})}function du(e,t,r){return Be(n=>{let i=Ya(e);if(i.isOk()){let o=i[0],u=Ia(o,new Tr),a=Ma(u,"Content-Type","application/json"),p=Ca(a,Wo(t));return Ua(p,r,n)}else return n(r.run(new h(new Fi(e))))})}function Cd(e){if(e instanceof ut&&200<=e.status&&e.status<=299){let t=e.status,r=e.body;return new _(r)}else{if(e instanceof ut&&e.status===401)return new h(new pu);if(e instanceof ut&&e.status===404)return new h(new au);if(e instanceof ut&&e.status===500){let t=e.body;return new h(new uu(t))}else{let t=e.status,r=e.body;return new h(new cu(t,r))}}}function Mr(e,t){return new fu(r=>{let i=Ae(r,Cd),s=Ae(i,o=>{let u=Bo(o,e);if(u.isOk()){let a=u[0];return new _(a)}else{let a=u[0];return new h(new lu(a))}});return t(s)})}var Nd={handle_external_links:!1,handle_internal_links:!0},Ga=window?.location?.href,mu=()=>Ga?new _(_u(new URL(Ga))):new h(void 0),$u=(e,t=Nd)=>{document.addEventListener("click",r=>{let n=Za(r.target);if(n)try{let i=new URL(n.href),s=_u(i),o=i.host!==window.location.host;return!t.handle_external_links&&o||!t.handle_internal_links&&!o?void 0:(r.preventDefault(),o||(window.history.pushState({},"",n.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",r=>{r.preventDefault();let n=new URL(window.location.href),i=_u(n);window.requestAnimationFrame(()=>{n.hash&&document.getElementById(n.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:r})=>{e(r)}),window.addEventListener("modem-replace",({detail:r})=>{e(r)})};var Za=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:Za(e.parentElement),_u=e=>new O(e.protocol?new $(e.protocol.slice(0,-1)):new w,new w,e.hostname?new $(e.hostname):new w,e.port?new $(Number(e.port)):new w,e.pathname,e.search?new $(e.search.slice(1)):new w,e.hash?new $(e.hash.slice(1)):new w);function Ka(e){return Be(t=>Ge(!Ln(),void 0,()=>$u(r=>{let i=e(r);return t(i)})))}var hu=class extends c{constructor(t,r,n){super(),this.audit_name=t,this.audit_formatted_name=r,this.in_scope_files=n}};function Va(){return b("audit_name",S,e=>b("audit_formatted_name",S,t=>b("in_scope_files",it(S),r=>Y(new hu(e,t,r)))))}var wu=class extends c{constructor(t,r,n){super(),this.date=t,this.time=r,this.offset=n}};var gu=class extends c{constructor(t){super(),this.minutes=t}},yu=class extends c{constructor(t){super(),this.unix_days=t}};var bu=class extends c{constructor(t){super(),this.microseconds=t}};function cc(e,t,r){return new wu(e,t,r)}function pc(e){return new yu(me(e,86400))}function fc(e){return e.unix_days*86400}function dc(e){return new bu(e)}var Gi=new gu(0);function Lu(e){return pc(e)}function Au(e){return fc(e)}function Zi(e){return Lu(me(e,1e3))}function ju(e){return Au(e)*1e3}function gc(e){let t=(e-ju(Zi(e)))*1e3;return dc(t)}function I_(e,t,r){return cc(e,t,r)}function yc(e){return I_(Zi(e),gc(e),Gi)}var Vi=class extends c{constructor(t,r,n,i,s,o){super(),this.parent_id=t,this.significance=r,this.user_id=n,this.message=i,this.expanded_message=s,this.modifier=o}};var Jt=class extends c{},Ht=class extends c{},Rt=class extends c{},Ir=class extends c{},Yt=class extends c{},Nr=class extends c{},Br=class extends c{},Wr=class extends c{},Dr=class extends c{},Fr=class extends c{},Pr=class extends c{},qn=class extends c{},zn=class extends c{},Jr=class extends c{};function B_(e){return e instanceof Jt?1:e instanceof Ht?2:e instanceof Rt?3:e instanceof Ir?4:e instanceof Yt?5:e instanceof Nr?6:e instanceof Br?7:e instanceof Wr?8:e instanceof Dr?9:e instanceof Fr?10:e instanceof Pr?11:12}function W_(e){return e instanceof zn?0:e instanceof Jr?1:2}function qu(e){return st(l([["p",xe(e.parent_id)],["s",Wt((()=>{let t=e.significance;return B_(t)})())],["u",xe(e.user_id)],["m",xe(e.message)],["x",na(e.expanded_message,xe)],["d",Wt((()=>{let t=e.modifier;return W_(t)})())]]))}var zu=class extends c{constructor(t,r,n,i,s,o,u,a){super(),this.note_id=t,this.parent_id=r,this.significance=n,this.user_name=i,this.message=s,this.expanded_message=o,this.time=u,this.edited=a}},Ut=class extends c{},Gt=class extends c{},Zt=class extends c{},Kt=class extends c{},Vt=class extends c{},Xt=class extends c{},Qt=class extends c{},Mn=class extends c{},er=class extends c{},tr=class extends c{},rr=class extends c{},nr=class extends c{},ir=class extends c{},sr=class extends c{},We=class extends c{},or=class extends c{},ur=class extends c{},Cn=class extends c{};function D_(e){if(e===0)return new Ut;if(e===1)return new Gt;if(e===2)return new Zt;if(e===3)return new Kt;if(e===4)return new Vt;if(e===5)return new Xt;if(e===6)return new Qt;if(e===7)return new Mn;if(e===8)return new er;if(e===9)return new tr;if(e===10)return new rr;if(e===11)return new nr;if(e===12)return new ir;if(e===13)return new sr;if(e===14)return new We;if(e===15)return new or;if(e===16)return new ur;if(e===17)return new Cn;throw ye("panic","o11a/computed_note",128,"significance_from_int","Invalid note significance found",{})}function bc(){return b("n",S,e=>b("p",S,t=>b("s",Oe,r=>b("u",S,n=>b("m",S,i=>b("x",zo(S),s=>b("t",Oe,o=>b("e",yr,u=>Y(new zu(e,t,D_(r),n,i,s,yc(o),u))))))))))}function vc(e){return e instanceof Ut?new w:e instanceof Gt?new $("Unanswered Question"):e instanceof Zt?new $("Answered"):e instanceof Kt?new $("Answer"):e instanceof Vt?new $("Incomplete ToDo"):e instanceof Xt?new $("Complete"):e instanceof Qt?new $("Completion"):e instanceof Mn?new $("Unconfirmed Finding"):e instanceof er?new $("Confirmed Finding"):e instanceof tr?new $("Rejected Finding"):e instanceof rr?new $("Confirmation"):e instanceof nr?new $("Rejection"):e instanceof ir?new $("Unanswered Dev Question"):e instanceof sr?new $("Answered Dev Question"):e instanceof We?new $("Info"):e instanceof or?new $("Incorrect Info"):e instanceof ur?new $("Rejection"):new $("Confirmation")}function kc(e){return e instanceof Ut?!1:e instanceof Gt||e instanceof Zt?!0:e instanceof Kt?!1:e instanceof Vt||e instanceof Xt?!0:e instanceof Qt?!1:e instanceof Mn||e instanceof er||e instanceof tr?!0:e instanceof rr||e instanceof nr?!1:e instanceof ir||e instanceof sr||e instanceof We||e instanceof or?!0:(e instanceof ur,!1)}var Oc="sud";var Cu=class extends c{constructor(t,r,n,i,s,o,u,a){super(),this.significance=t,this.line_number=r,this.line_number_text=n,this.line_tag=i,this.line_id=s,this.leading_spaces=o,this.elements=u,this.columns=a}},In=class extends c{constructor(t,r){super(),this.topic_id=t,this.topic_title=r}},Iu=class extends c{},Hr=class extends c{},Nn=class extends c{constructor(t,r,n){super(),this.node_id=t,this.node_declaration=r,this.tokens=n}},Bn=class extends c{constructor(t,r,n){super(),this.referenced_node_id=t,this.referenced_node_declaration=r,this.tokens=n}},Rr=class extends c{constructor(t){super(),this.element=t}},Nu=class extends c{constructor(t,r){super(),this.element=t,this.leading_spaces=r}},Bu=class extends c{constructor(t,r,n,i){super(),this.title=t,this.topic_id=r,this.kind=n,this.references=i}},Qi=class extends c{},es=class extends c{},ts=class extends c{},rs=class extends c{},ns=class extends c{},is=class extends c{},ss=class extends c{},os=class extends c{},us=class extends c{},ls=class extends c{},as=class extends c{},cs=class extends c{},ps=class extends c{},fs=class extends c{},Wu=class extends c{constructor(t,r){super(),this.title=t,this.topic_id=r}};function F_(){return b("type",S,e=>e==="single_declaration_line"?b("topic_id",S,t=>b("topic_title",S,r=>Y(new In(t,r)))):e==="non_empty_line"?Y(new Iu):e==="empty_line"?Y(new Hr):gr(new Hr,"PreProcessedLineSignificance"))}function Du(e){return e instanceof Qi?"contract":e instanceof es?"constructor":e instanceof ts?"function":e instanceof rs?"fallback":e instanceof ns?"receive":e instanceof is?"modifier":e instanceof ss?"variable":e instanceof os?"constant":e instanceof us?"enum":e instanceof ls?"enum_value":e instanceof as?"struct":e instanceof cs?"error":e instanceof ps?"event":"unknown"}function P_(e){return e==="contract"?new Qi:e==="constructor"?new es:e==="function"?new ts:e==="fallback"?new rs:e==="receive"?new ns:e==="modifier"?new is:e==="variable"?new ss:e==="constant"?new os:e==="enum"?new us:e==="enum_value"?new ls:e==="struct"?new as:e==="error"?new cs:e==="event"?new ps:e==="unknown"?new fs:new fs}function J_(){return b("title",S,e=>b("topic_id",S,t=>Y(new Wu(e,t))))}function Lc(){return b("title",S,e=>b("topic_id",S,t=>b("kind",S,r=>b("references",it(J_()),n=>Y(new Bu(e,t,P_(r),n))))))}function H_(){return b("type",S,e=>e==="pre_processed_declaration"?b("node_id",Oe,t=>b("node_declaration",Lc(),r=>b("tokens",S,n=>Y(new Nn(t,r,n))))):e==="pre_processed_reference"?b("referenced_node_id",Oe,t=>b("referenced_node_declaration",Lc(),r=>b("tokens",S,n=>Y(new Bn(t,r,n))))):e==="pre_processed_node"?b("element",S,t=>Y(new Rr(t))):e==="pre_processed_gap_node"?b("element",S,t=>b("leading_spaces",Oe,r=>Y(new Nu(t,r)))):gr(new Rr(""),"PreProcessedNode"))}function Ac(){return b("s",F_(),e=>b("n",Oe,t=>b("i",S,r=>b("l",Oe,n=>b("e",it(H_()),i=>b("c",Oe,s=>{let o=v(t);return Y(new Cu(e,t,o,"L"+o,r,n,i,s))}))))))}function Wn(e){e.focus()}function ds(e,t){return t in e.dataset?new _(e.dataset[t]):new h(void 0)}function De(e){return e.preventDefault()}function Fu(e){return e.ctrlKey}function Yr(e){return e.key}function Pu(e){return e.shiftKey}function lr(e){let t=document.querySelector(e);return t?new _(t):new h}function U_(){return globalThis}function G_(e){window.alert(e)}function Z_(e,t){let r=window.prompt(e,t);return r!==null?new _(r):new h}function Hu(e,t){return window.addEventListener(e,t)}function K_(e){return e.document}async function V_(){try{return new _(await window.navigator.wakeLock.request("screen"))}catch(e){return new h(e.toString())}}function X_(){return window.location.href}function Q_(e){try{return new _(e.location.href)}catch(t){return new h(t.toString())}}function em(e,t){e.location.href=t}function tm(){return window.location.origin}function rm(){return window.location.pathname}function nm(){return window.location.reload()}function im(e){return e.location.reload()}function sm(e){return e.focus()}function om(){let e=window.location.hash;return e==""?new h:new _(decodeURIComponent(e.slice(1)))}function um(){let e=window.location.search;return e==""?new h:new _(decodeURIComponent(e.slice(1)))}function lm(e){return e.innerHeight}function am(e){return e.innerWidth}function cm(e){return e.outerHeight}function pm(e){return e.outerWidth}function fm(e){return e.screenX}function dm(e){return e.screenY}function _m(e){return e.screenTop}function mm(e){return e.screenLeft}function $m(e){return e.scrollX}function hm(e){return e.scrollY}function xm(e,t,r){try{return new _(window.open(e,t,r))}catch(n){return new h(n.toString())}}function wm(e){e.close()}function gm(e){return e.closed}function ym(e){return window.queueMicrotask(e)}function bm(e){return window.requestAnimationFrame(e)}function vm(e){return window.cancelAnimationFrame(e)}function km(string){try{return new _(eval(string))}catch(e){return new h(e.toString())}}async function Om(e){try{return new _(await import(e))}catch(t){return new h(t.toString())}}var Ru=class extends c{constructor(t,r){super(),this.issue=t,this.cause=r}};function lt(e){return new Ru(e,l([]))}function _s(e){return new h(lt(e))}function qc(e){let t=m(Bt("error: ",e.issue),e.cause);return ne(t," <- ")}function zc(e){let t=ds(e,"lc"),r=M(t,dt);return Q(r,lt("Failed to read line count data"))}function Mc(e){return gt("cc",v(e))}function Cc(e){let t=ds(e,"cc"),r=M(t,dt);return Q(r,lt("Failed to read column count data"))}var Uu="deh",Dn="de",ms="line-container";function Bc(e){let t=lr("#L"+v(e)+"."+ms);return Q(t,lt("Failed to find non-empty line"))}function Wc(e,t){return lr(".dl"+v(e)+".dc"+v(t))}function Dc(e,t){return lr(".dl"+v(e)+".dc"+v(t)+" input")}var Gr=class extends c{constructor(t,r,n,i){super(),this.current_line_number=t,this.current_column_number=r,this.current_line_column_count=n,this.is_user_typing=i}};function Hc(){return new Gr(16,1,16,!1)}function Rc(e){let t=Yr(e);return t==="ArrowUp"?De(e):t==="ArrowDown"?De(e):t==="ArrowLeft"?De(e):t==="ArrowRight"?De(e):t==="PageUp"?De(e):t==="PageDown"?De(e):t==="Enter"?De(e):t==="e"?De(e):t==="Escape"?De(e):void 0}function Pc(e,t,r){let n=Fu(e),i=Yr(e);return n&&i==="e"?new _([t,B()]):r()}function Em(e,t,r){return new _([t,B()])}function Tm(e,t,r){return new _([t,B()])}function Yc(e,t){return M((()=>{let r=lr("#audit-page"),n=Q(r,lt("Failed to find audit page"));return M(n,zc)})(),r=>{if(t>0&&e===r)return _s("Line is "+v(r)+", cannot go further down");if(t<0&&e===1)return _s("Line is 1, cannot go further up");if(t===0)return _s("Step is zero");{let n=Eo(1,ai(r,e+t)),i=Bc(n);if(i.isOk()){let s=i[0];return R(Cc(s),o=>[n,o])}else return Yc(n,t>0&&n===r?-1:t>0||t<0&&n===1?1:t<0?-1:0)}})}function Gu(e,t){return Be(r=>{let n=(()=>{let i=Wc(e,t),s=Q(i,lt("Failed to find line discussion to focus"));return R(s,Wn)})()})}function qm(e,t,r){if(Yr(e)==="Escape"){let i=[t,Gu(t.current_line_number,t.current_column_number)];return new _(i)}else return r()}function Ur(e,t){return R(Yc(e.current_line_number,t),r=>{let n=r[0],i=r[1];return[(()=>{let s=e;return new Gr(s.current_line_number,s.current_column_number,i,s.is_user_typing)})(),Gu(n,ai(i,e.current_column_number))]})}function Jc(e,t){let r=(()=>{let i=Eo(1,e.current_column_number+t);return ai(i,e.current_line_column_count)})(),n=[e,Gu(e.current_line_number,r)];return new _(n)}function zm(e,t,r){let n=Pu(e),i=Yr(e);return!n&&i==="ArrowUp"?Ur(t,-1):!n&&i==="ArrowDown"?Ur(t,1):n&&i==="ArrowUp"?Ur(t,-5):n&&i==="ArrowDown"?Ur(t,5):i==="PageUp"?Ur(t,-20):i==="PageDown"?Ur(t,20):i==="ArrowLeft"?Jc(t,-1):i==="ArrowRight"?Jc(t,1):r()}function Uc(e,t){let r=t.is_user_typing?Pc(e,t,()=>qm(e,t,()=>new _([t,B()]))):zm(e,t,()=>Tm(e,t,()=>Pc(e,t,()=>Em(e,t,()=>new _([t,B()])))));if(r.isOk())return r[0];{let n=r[0];return nt(qc(n)),[t,B()]}}function $s(e){for(;;){let t=e;if(t===1)return"a";if(t===2)return"b";if(t===3)return"c";if(t===4)return"d";if(t===5)return"e";if(t===6)return"f";if(t===7)return"g";if(t===8)return"h";if(t===9)return"i";if(t===10)return"j";if(t===11)return"k";if(t===12)return"l";if(t===13)return"m";if(t===14)return"n";if(t===15)return"o";if(t===16)return"p";if(t===17)return"q";if(t===18)return"r";if(t===19)return"s";if(t===20)return"t";if(t===21)return"u";if(t===22)return"v";if(t===23)return"w";if(t===24)return"x";if(t===25)return"y";if(t===26)return"z";{let r=me(t-1,26),n=Me(t-1,26);if(r===0)e=n+1;else return $s(r)+$s(n+1)}}}function Fn(e,t){return g("dl"+e+" dc"+t)}function Zu(e){return gt("i",e)}function Ku(e){return gt("t",e)}function Vu(e){return gt("r",e?"1":"0")}function Gc(e,t,r){return e?t():r()}var hs="http://www.w3.org/2000/svg";function Xu(e){return Lr(hs,"line",e,l([]))}function Qu(e){return Lr(hs,"polyline",e,l([]))}function ar(e,t){return Lr(hs,"svg",e,t)}function re(e){return Lr(hs,"path",e,l([]))}function el(e){return ar(m(x("stroke-linejoin","round"),m(x("stroke-linecap","round"),m(x("stroke-width","2"),m(x("stroke","currentColor"),m(x("fill","none"),m(x("viewBox","0 0 24 24"),m(x("height","24"),m(x("width","24"),e)))))))),l([re(l([x("d","M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z")])),re(l([x("d","M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1")]))]))}function Zc(e){return ar(m(x("stroke-linejoin","round"),m(x("stroke-linecap","round"),m(x("stroke-width","2"),m(x("stroke","currentColor"),m(x("fill","none"),m(x("viewBox","0 0 24 24"),m(x("height","24"),m(x("width","24"),e)))))))),l([re(l([x("d","M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13")])),re(l([x("d","m8 6 2-2")])),re(l([x("d","m18 16 2-2")])),re(l([x("d","m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17")])),re(l([x("d","M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z")])),re(l([x("d","m15 5 4 4")]))]))}function Kc(e){return ar(m(x("stroke-linejoin","round"),m(x("stroke-linecap","round"),m(x("stroke-width","2"),m(x("stroke","currentColor"),m(x("fill","none"),m(x("viewBox","0 0 24 24"),m(x("height","24"),m(x("width","24"),e)))))))),l([re(l([x("d","m3 10 2.5-2.5L3 5")])),re(l([x("d","m3 19 2.5-2.5L3 14")])),re(l([x("d","M10 6h11")])),re(l([x("d","M10 12h11")])),re(l([x("d","M10 18h11")]))]))}function Vc(e){return ar(m(x("stroke-linejoin","round"),m(x("stroke-linecap","round"),m(x("stroke-width","2"),m(x("stroke","currentColor"),m(x("fill","none"),m(x("viewBox","0 0 24 24"),m(x("height","24"),m(x("width","24"),e)))))))),l([Qu(l([x("points","15 3 21 3 21 9")])),Qu(l([x("points","9 21 3 21 3 15")])),Xu(l([x("y2","10"),x("y1","3"),x("x2","14"),x("x1","21")])),Xu(l([x("y2","14"),x("y1","21"),x("x2","10"),x("x1","3")]))]))}function xs(e){return ar(m(x("stroke-linejoin","round"),m(x("stroke-linecap","round"),m(x("stroke-width","2"),m(x("stroke","currentColor"),m(x("fill","none"),m(x("viewBox","0 0 24 24"),m(x("height","24"),m(x("width","24"),e)))))))),l([re(l([x("d","M18 6 6 18")])),re(l([x("d","m6 6 12 12")]))]))}function Xc(e){return ar(m(x("stroke-linejoin","round"),m(x("stroke-linecap","round"),m(x("stroke-width","2"),m(x("stroke","currentColor"),m(x("fill","none"),m(x("viewBox","0 0 24 24"),m(x("height","24"),m(x("width","24"),e)))))))),l([re(l([x("d","M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z")])),re(l([x("d","m15 5 4 4")]))]))}function Qc(e){return Se("keydown",t=>{let r=b("ctrlKey",yr,i=>b("key",S,s=>Y([i,s]))),n=l([new V("","",l([]))]);return M((()=>{let i=ke(t,r);return Q(i,n)})(),i=>{let s=i[0],o=i[1];return s&&o==="Enter"?new _(e):new h(n)})})}var _e=class extends c{constructor(t,r,n,i,s,o,u,a,p,f,d,y,A,N){super(),this.is_reference=t,this.show_reference_discussion=r,this.user_name=n,this.line_number=i,this.column_number=s,this.topic_id=o,this.topic_title=u,this.current_note_draft=a,this.current_thread_id=p,this.active_thread=f,this.show_expanded_message_box=d,this.current_expanded_message_draft=y,this.expanded_messages=A,this.editing_note=N}},tl=class extends c{constructor(t,r,n,i){super(),this.current_thread_id=t,this.parent_note=r,this.prior_thread_id=n,this.prior_thread=i}},ws=class extends c{constructor(t){super(),this[0]=t}},Pn=class extends c{},gs=class extends c{constructor(t,r){super(),this.new_thread_id=t,this.parent_note=r}},ys=class extends c{},bs=class extends c{constructor(t){super(),this[0]=t}},vs=class extends c{constructor(t){super(),this[0]=t}},ks=class extends c{constructor(t){super(),this.for_note_id=t}},Os=class extends c{},Ss=class extends c{},Jn=class extends c{},Ls=class extends c{},Hn=class extends c{constructor(t){super(),this[0]=t}},As=class extends c{},js=class extends c{},Rn=class extends c{constructor(t,r){super(),this.note=t,this.topic_id=r}},Yn=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Un=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Gn=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Zn=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},ge=class extends c{};function ep(e,t,r,n,i){return new _e(i,!1,"guest",e,t,r,n,"",r,new w,!1,new w,hi(),new w)}function Pm(e){let t=e.active_thread;if(t instanceof $){let r=t[0];return L(l([]),l([L(l([g("flex justify-end width-full")]),l([Ve(l([de(new ys),g("icon-button flex gap-[.5rem] pl-[.5rem] pr-[.3rem] pt-[.3rem] pb-[.1rem] mb-[.25rem]")]),l([q("Close Thread"),xs(l([]))]))])),q("Current Thread: "),q(r.parent_note.message),(()=>{let n=r.parent_note.expanded_message;if(n instanceof $){let i=n[0];return L(l([g("mt-[.5rem]")]),l([fe(l([]),l([q(i)]))]))}else return ee(l([]))})(),Xo(l([g("mt-[.5rem]")]))]))}else return L(l([g("flex items-start justify-between width-full mb-[.5rem]")]),l([X(l([g("pt-[.1rem] underline")]),l([e.is_reference?jr(l([Or("/"+e.topic_id)]),l([q(e.topic_title)])):q(e.topic_title)])),L(l([]),l([e.is_reference?Ve(l([de(new js),g("icon-button p-[.3rem] mr-[.5rem]")]),l([xs(l([]))])):ee(l([])),Ve(l([de(new Ls),g("icon-button p-[.3rem] ")]),l([Vc(l([]))]))]))]))}function Jm(e){let t="input-border rounded-md text-[0.65rem] pb-[0.15rem] pt-1 px-[0.5rem]",r=vc(e);if(r instanceof $){let n=r[0];return X(l([g(t)]),l([q(n)]))}else return ee(l([]))}function Hm(e,t){return j(t,r=>L(l([g("line-discussion-item")]),l([L(l([g("flex justify-between mb-[.2rem]")]),l([L(l([g("flex gap-[.5rem] items-start")]),l([fe(l([]),l([q(r.user_name)])),Jm(r.significance)])),L(l([g("flex gap-[.5rem]")]),l([Ve(l([I("edit-message-button"),g("icon-button p-[.3rem]"),de(new Hn(new _(r)))]),l([Xc(l([]))])),r.expanded_message instanceof $?Ve(l([I("expand-message-button"),g("icon-button p-[.3rem]"),de(new ks(r.note_id))]),l([Kc(l([]))])):ee(l([])),kc(r.significance)?Ve(l([I("switch-thread-button"),g("icon-button p-[.3rem]"),de(new gs(r.note_id,r))]),l([el(l([]))])):ee(l([]))]))])),fe(l([]),l([q(r.message)])),Yo(e.expanded_messages,r.note_id)?L(l([g("mt-[.5rem]")]),l([fe(l([]),l([q((()=>{let i=r.expanded_message;return Tt(i,"")})())]))])):ee(l([])),Xo(l([g("mt-[.5rem]")]))])))}function Rm(e){let t="absolute overlay p-[.5rem] flex w-[100%] h-60 mt-2",r="grow text-[.95rem] resize-none p-[.3rem]";return L(l([I("expanded-message"),e.show_expanded_message_box?g(t+" show-exp"):g(t)]),l([Aa(l([I("expanded-message-box"),g(r),Ho("Write an expanded message body"),eu(n=>new vs(n)),yt(new Ss),Qo(new Jn),Qc(new Pn)]),(()=>{let n=e.current_expanded_message_draft;return Tt(n,"")})())]))}function Ym(e,t){if(t){if(e==="done")return[new Yt,"done"];if(e.startsWith("done: ")){let r=e.slice(6);return[new Yt,r]}else if(e.startsWith("a: ")){let r=e.slice(3);return[new Rt,r]}else if(e.startsWith("answer: ")){let r=e.slice(8);return[new Rt,r]}else if(e.startsWith("reject: ")){let r=e.slice(8);return[new Wr,r]}else if(e.startsWith("confirm: ")){let r=e.slice(9);return[new Br,r]}else if(e.startsWith("incorrect: ")){let r=e.slice(11);return[new Pr,r]}else if(e.startsWith("correct: ")){let r=e.slice(9);return[new qn,r]}else return[new Jt,e]}else if(e.startsWith("todo: ")){let r=e.slice(6);return[new Ir,r]}else if(e.startsWith("q: ")){let r=e.slice(3);return[new Ht,r]}else if(e.startsWith("question: ")){let r=e.slice(10);return[new Ht,r]}else if(e.startsWith("finding: ")){let r=e.slice(9);return[new Nr,r]}else if(e.startsWith("dev: ")){let r=e.slice(5);return[new Dr,r]}else if(e.startsWith("info: ")){let r=e.slice(6);return[new Fr,r]}else return[new Jt,e]}function Um(e){return e instanceof Kt?"a: ":e instanceof sr?"dev: ":e instanceof Zt?"q: ":e instanceof Ut?"":e instanceof Xt?"todo: ":e instanceof er?"finding: ":e instanceof rr?"confirm: ":e instanceof nr?"reject: ":e instanceof Vt?"todo: ":e instanceof We?"info: ":e instanceof Cn?"correct: ":e instanceof ur?"incorrect: ":e instanceof tr?"finding: ":e instanceof or?"info: ":e instanceof Qt?"done: ":e instanceof ir?"dev: ":e instanceof Gt?"q: ":"finding: "}function tp(e,t){if(t instanceof ws){let r=t[0];return[(()=>{let n=e;return new _e(n.is_reference,n.show_reference_discussion,n.user_name,n.line_number,n.column_number,n.topic_id,n.topic_title,r,n.current_thread_id,n.active_thread,n.show_expanded_message_box,n.current_expanded_message_draft,n.expanded_messages,n.editing_note)})(),new ge]}else if(t instanceof Pn){let r=Ym((()=>{let s=e.current_note_draft;return xr(s)})(),dr(e.active_thread)),n=r[0],i=r[1];return Gc(e.current_note_draft==="",()=>[e,new ge],()=>{let s=(()=>{let f=e.editing_note;if(f instanceof $){let d=f[0];return[new Jr,d.note_id]}else return[new zn,e.current_thread_id]})(),o=s[0],u=s[1],a=(()=>{let f=(()=>{let d=e.current_expanded_message_draft;return rn(d,xr)})();return f instanceof $&&f[0]===""?new w:f})(),p=new Vi(u,n,"user"+(()=>{let f=io(100);return v(f)})(),i,a,o);return[(()=>{let f=e;return new _e(f.is_reference,f.show_reference_discussion,f.user_name,f.line_number,f.column_number,f.topic_id,f.topic_title,"",f.current_thread_id,f.active_thread,!1,new w,f.expanded_messages,new w)})(),new Rn(p,e.topic_id)]})}else if(t instanceof gs){let r=t.new_thread_id,n=t.parent_note;return[(()=>{let i=e;return new _e(i.is_reference,i.show_reference_discussion,i.user_name,i.line_number,i.column_number,i.topic_id,i.topic_title,i.current_note_draft,r,new $(new tl(r,n,e.current_thread_id,e.active_thread)),i.show_expanded_message_box,i.current_expanded_message_draft,i.expanded_messages,i.editing_note)})(),new ge]}else if(t instanceof ys){let r=(()=>{let i=e.active_thread,s=rn(i,o=>o.prior_thread);return cl(s)})(),n=(()=>{let i=rn(r,s=>s.current_thread_id);return Tt(i,e.topic_id)})();return[(()=>{let i=e;return new _e(i.is_reference,i.show_reference_discussion,i.user_name,i.line_number,i.column_number,i.topic_id,i.topic_title,i.current_note_draft,n,r,i.show_expanded_message_box,i.current_expanded_message_draft,i.expanded_messages,i.editing_note)})(),new ge]}else if(t instanceof bs){let r=t[0];return[(()=>{let n=e;return new _e(n.is_reference,n.show_reference_discussion,n.user_name,n.line_number,n.column_number,n.topic_id,n.topic_title,n.current_note_draft,n.current_thread_id,n.active_thread,r,n.current_expanded_message_draft,n.expanded_messages,n.editing_note)})(),new ge]}else if(t instanceof vs){let r=t[0];return[(()=>{let n=e;return new _e(n.is_reference,n.show_reference_discussion,n.user_name,n.line_number,n.column_number,n.topic_id,n.topic_title,n.current_note_draft,n.current_thread_id,n.active_thread,n.show_expanded_message_box,new $(r),n.expanded_messages,n.editing_note)})(),new ge]}else if(t instanceof ks){let r=t.for_note_id;return Yo(e.expanded_messages,r)?[(()=>{let i=e;return new _e(i.is_reference,i.show_reference_discussion,i.user_name,i.line_number,i.column_number,i.topic_id,i.topic_title,i.current_note_draft,i.current_thread_id,i.active_thread,i.show_expanded_message_box,i.current_expanded_message_draft,ma(e.expanded_messages,r),i.editing_note)})(),new ge]:[(()=>{let i=e;return new _e(i.is_reference,i.show_reference_discussion,i.user_name,i.line_number,i.column_number,i.topic_id,i.topic_title,i.current_note_draft,i.current_thread_id,i.active_thread,i.show_expanded_message_box,i.current_expanded_message_draft,Uo(e.expanded_messages,r),i.editing_note)})(),new ge]}else{if(t instanceof Os)return[e,new Yn(e.line_number,e.column_number)];if(t instanceof Ss)return[(()=>{let r=e;return new _e(r.is_reference,r.show_reference_discussion,r.user_name,r.line_number,r.column_number,r.topic_id,r.topic_title,r.current_note_draft,r.current_thread_id,r.active_thread,!0,r.current_expanded_message_draft,r.expanded_messages,r.editing_note)})(),new Un(e.line_number,e.column_number)];if(t instanceof Jn)return[e,new Gn(e.line_number,e.column_number)];if(t instanceof Ls)return[e,new Zn(e.line_number,e.column_number)];if(t instanceof Hn){let r=t[0];if(r.isOk()){let n=r[0];return[(()=>{let i=e;return new _e(i.is_reference,i.show_reference_discussion,i.user_name,i.line_number,i.column_number,i.topic_id,i.topic_title,Um(n.significance)+n.message,i.current_thread_id,i.active_thread,n.expanded_message instanceof $,n.expanded_message,i.expanded_messages,new $(n))})(),new ge]}else return[e,new ge]}else return t instanceof As?[(()=>{let r=e;return new _e(r.is_reference,r.show_reference_discussion,r.user_name,r.line_number,r.column_number,r.topic_id,r.topic_title,"",r.current_thread_id,r.active_thread,!1,new w,r.expanded_messages,new w)})(),new ge]:[(()=>{let r=e;return new _e(r.is_reference,!e.show_reference_discussion,r.user_name,r.line_number,r.column_number,r.topic_id,r.topic_title,r.current_note_draft,r.current_thread_id,r.active_thread,r.show_expanded_message_box,r.current_expanded_message_draft,r.expanded_messages,r.editing_note)})(),new ge]}}function Gm(e,t){return Se("keydown",r=>{let n=b("ctrlKey",yr,s=>b("key",S,o=>Y([s,o]))),i=l([new V("","",l([]))]);return M((()=>{let s=ke(r,n);return Q(s,i)})(),s=>{let o=s[0],u=s[1];return o&&u==="Enter"?new _(e):u==="ArrowUp"?new _(t):new h(i)})})}function Zm(e,t){return L(l([g("flex justify-between items-center gap-[.35rem]")]),l([Ve(l([I("toggle-expanded-message-button"),g("icon-button p-[.3rem]"),de(new bs(!e.show_expanded_message_box))]),l([Zc(l([]))])),e.editing_note instanceof $?Ve(l([I("cancel-message-edit-button"),g("icon-button p-[.3rem]"),de(new As)]),l([xs(l([]))])):ee(l([])),La(l([I("new-comment-input"),g("inline-block w-full grow text-[0.9rem] pl-2 pb-[.2rem] p-[0.3rem] border-[none] border-t border-solid;"),Ho("Add a new comment"),eu(r=>new ws(r)),yt(new Os),Qo(new Jn),Gm(new Pn,new Hn(nn(t))),fa(e.current_note_draft)]))]))}function rp(e,t){nt("Rendering line discussion "+e.topic_title);let r=(()=>{let n=P(t,e.current_thread_id);return K(n,l([]))})();return L(l([g("absolute z-[3] w-[30rem] not-italic text-wrap select-text text left-[-.3rem]"),e.line_number<27?g("top-[1.4rem]"):g("bottom-[1.4rem]")]),l([e.is_reference&&!e.show_reference_discussion?ee(l([L(l([g("overlay p-[.5rem]")]),l([L(l([g("flex items-start justify-between width-full mb-[.5rem]")]),l([X(l([g("pt-[.1rem] underline")]),l([jr(l([Or("/"+e.topic_id)]),l([q(e.topic_title)]))])),Ve(l([de(new js),g("icon-button p-[.3rem]")]),l([el(l([]))]))])),L(l([g("flex flex-col overflow-auto max-h-[30rem] gap-[.5rem]")]),Pe(r,i=>k(i.significance,new We)?new _(fe(l([]),l([q(i.message+(dr(i.expanded_message)?"^":""))]))):new h(void 0)))]))])):ee(l([L(l([g("overlay p-[.5rem]")]),l([Pm(e),dr(e.active_thread)||et(r)>0?L(l([I("comment-list"),g("flex flex-col-reverse overflow-auto max-h-[30rem] gap-[.5rem] mb-[.5rem]")]),Hm(e,r)):ee(l([])),Zm(e,r)])),Rm(e)]))]))}var Es=class extends c{constructor(t,r,n){super(),this.line_number=t,this.column_number=r,this.model=n}};var vt=class extends c{constructor(t,r,n,i,s,o){super(),this.line_number=t,this.column_number=r,this.node_id=n,this.topic_id=i,this.topic_title=s,this.is_reference=o}},kt=class extends c{},Ot=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Zr=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Kn=class extends c{constructor(t,r,n){super(),this.line_number=t,this.column_number=r,this.update=n}};function Km(e,t){return new Kn(t.line_number,t.column_number,tp(t.model,e))}function Ts(e,t,r,n){if(n instanceof $){let i=n[0];if(t===i.line_number&&r===i.column_number){let o=rp(i.model,e);return Sr(o,u=>Km(u,i))}else return ee(l([]))}else return ee(l([]))}function Vm(e,t,r,n,i,s,o){let u=to(e,a=>!k(a.significance,new We));if(u.isOk()){let a=u[0];return X(l([g("inline-comment font-code code-extras font-code fade-in relative"),g("comment-preview"),g(Dn),x("tabindex","0"),Fn(v(n),v(i)),jn(new vt(n,i,new w,t,r,!1)),En(new kt),yt(new Zr(n,i))]),l([X(l([de(new Ot(n,i))]),l([q((()=>{if(rt(a.message)>40)return(()=>{let f=a.message;return he(f,0,37)})()+"...";{let f=a.message;return he(f,0,40)}})())])),Ts(o,n,i,s)]))}else return X(l([g("inline-comment font-code code-extras relative"),g("new-thread-preview"),g(Dn),x("tabindex","0"),Fn(v(n),v(i)),jn(new vt(n,i,new w,t,r,!1)),En(new kt),yt(new Zr(n,i))]),l([X(l([de(new Ot(n,i))]),l([q("Start new thread")])),Ts(o,n,i,s)]))}function Xm(e,t,r,n,i,s,o){return X(l([I(t.topic_id),g(Du(t.kind)),g("declaration-preview relative N"+v(e)),g(Dn),g(Uu),x("tabindex","0"),Zu(t.topic_id),Ku(t.title),Vu(!1),Fn(v(i),v(s)),jn(new vt(i,s,new $(e),t.topic_id,t.title,!1)),En(new kt),yt(new Zr(i,s))]),l([X(l([de(new Ot(i,s))]),l([q(r)])),Ts(n,i,s,o)]))}function Qm(e,t,r,n,i,s,o){return X(l([g(Du(t.kind)),g("reference-preview relative N"+v(e)),g(Dn),g(Uu),x("tabindex","0"),Zu(t.topic_id),Ku(t.title),Vu(!0),Fn(v(i),v(s)),jn(new vt(i,s,new $(e),t.topic_id,t.title,!1)),En(new kt),yt(new Zr(i,s))]),l([X(l([de(new Ot(i,s))]),l([q(r)])),Ts(n,i,s,o)]))}function sp(e,t,r){let n=$l(e.elements,0,(i,s)=>{if(s instanceof Nn){let o=s.node_id,u=s.node_declaration,a=s.tokens,p=i+1;return[p,Xm(o,u,a,t,e.line_number,p,r)]}else if(s instanceof Bn){let o=s.referenced_node_id,u=s.referenced_node_declaration,a=s.tokens,p=i+1;return[p,Qm(o,u,a,t,e.line_number,p,r)]}else if(s instanceof Rr){let o=s.element;return[i,X(l([x("dangerous-unescaped-html",o)]),l([]))]}else{let o=s.element;return[i,X(l([x("dangerous-unescaped-html",o)]),l([]))]}});return Ks(n)}function op(e,t,r){let n=rt(e),i=80-r;if(n<=i)return l([e+(t?"^":"")]);{let o=(()=>{let p=he(e,0,i);return Dl(p)})(),u=(()=>{let f=hr(o," "),d=K(f,["",o]),y=Ks(d);return rt(y)})(),a=he(e,u+1,n);return m(he(e,0,u),op(a,t,r))}}function e$(e,t){let r=e.message,n=op(r,!k(e.expanded_message,new w),t);return sn(n,(i,s)=>[e.note_id+v(s),i])}function t$(e,t,r){let n=(()=>{let s=P(e,r),o=K(s,l([]));return Pe(o,u=>u.parent_id===r?new _(u):new h(void 0))})(),i=(()=>{let o=qt(n,a=>k(a.significance,new We)),u=j(o,a=>e$(a,t));return _r(u)})();return[n,i]}function ip(e,t,r,n,i){let s=t$(e,t.leading_spaces,r),o=s[0],u=s[1],a=t.columns+1;return L(l([I(t.line_tag),g(ms),Mc(a)]),l([_a(ee,sn(u,(p,f)=>{let d=p[0],y=p[1],A=fe(l([g("loc flex")]),l([X(l([g("line-number code-extras relative")]),l([q(t.line_number_text),X(l([g("absolute code-extras pl-[.1rem] pt-[.15rem] text-[.9rem]")]),l([q($s(f+1))]))])),X(l([g("comment italic")]),l([q((()=>{let N=hl(" ",t.leading_spaces);return ne(N,"")})()+y)]))]));return[d,A]})),fe(l([g("loc flex")]),l([X(l([g("line-number code-extras relative")]),l([q(t.line_number_text)])),ee(sp(t,e,i)),Vm(o,r,n,t.line_number,a,i,e)]))]))}function r$(e,t,r){let n=t.significance;if(n instanceof Hr)return fe(l([g("loc"),I(t.line_tag)]),m(X(l([g("line-number code-extras relative")]),l([q(t.line_number_text)])),sp(t,e,r)));if(n instanceof In){let i=n.topic_id,s=n.topic_title;return ip(e,t,i,s,r)}else return ip(e,t,t.line_id,t.line_tag,r)}function up(e,t,r){return L(l([I("audit-page"),g("code-snippet"),gt("lc",(()=>{let i=et(e);return v(i)})())]),j(e,n=>r$(t,n,r)))}function lp(){return globalThis?.process?.platform==="win32"||globalThis?.Deno?.build?.os==="windows"}function i$(e){let t=(()=>{let r=se(e,"/");if(r.hasLength(1)&&r.head==="")return l([]);if(r.atLeastLength(1)&&r.head===""){let n=r.tail;return m("/",n)}else return r})();return qt(t,r=>r!=="")}function s$(e){let t=he(e,0,3),r=Fl(t),n=j(r,Ao);if(n.hasLength(3)&&(n.tail.tail.head===47||n.tail.tail.head===92)&&n.tail.head===58&&(n.head>=65&&n.head<=90||n.head>=97&&n.head<=122)){let i=n.head,s=n.tail.head,o=n.tail.tail.head,u=he(e,0,1),a=ae(u)+":/",p=_t(e,3);return[new $(a),p]}else return[new w,e]}function o$(e){let t=s$(e),r=t[0],n=t[1],i=(()=>{let o=se(n,"/");return on(o,u=>se(u,"\\"))})(),s=(()=>{if(r instanceof $){let o=r[0];return m(o,i)}else return i})();if(s.hasLength(1)&&s.head==="")return l([]);if(s.atLeastLength(1)&&s.head===""){let o=s.tail;return m("/",o)}else return s}function u$(e){return lp()?o$(e):i$(e)}function qs(e){return Ge(e==="/","",()=>{let r=u$(e),n=wl(r);return K(n,"")})}function ap(e,t,r){let n=(()=>{let o=P(r,e);return K(o,[l([]),l([])])})(),i=n[0],s=n[1];return L(l([I(e)]),l([fe(l([g("tree-item")]),l([q(qs(e))])),L(l([I(e+"-dirs"),g("nested-tree-items")]),j(i,o=>ap(o,t,r))),L(l([I(e+"-files"),g("nested-tree-items")]),j(s,o=>jr(l([g("tree-item tree-link"+(o===t?" underline":"")),Or("/"+o),Ro("prefetch")]),l([q(qs(o))]))))]))}function a$(e,t,r){let n=(()=>{let o=P(e,t);return K(o,[l([]),l([])])})(),i=n[0],s=n[1];return L(l([I("audit-files")]),l([L(l([I(t+"-files")]),j(s,o=>jr(l([g("tree-item tree-link"+(o===r?" underline":"")),Or("/"+o),Ro("prefetch")]),l([q(qs(o))])))),L(l([I(t+"-dirs")]),j(i,o=>ap(o,r,e)))]))}function rl(e,t,r,n,i){return L(l([I("tree-grid")]),l([L(l([I("file-tree")]),l([Sa(l([I("audit-tree-header")]),l([q(n+" files")])),a$(r,n,i)])),L(l([I("tree-resizer")]),l([])),L(l([I("file-contents")]),l([e])),dr(t)?L(l([I("panel-resizer")]),l([])):ee(l([])),(()=>{if(t instanceof $){let s=t[0];return L(l([I("side-panel")]),l([s]))}else return ee(l([]))})()]))}function c$(e){let r=se(e,"/"),n=Qs(r,et(se(e,"/"))-1),i=mr(n,l([]),(s,o,u)=>{if(u===0)return m(o,s);{let a=(()=>{let p=nn(s);return K(p,"")})();return m(a+"/"+o,s)}});return T(i)}function zs(e){return e+"/dashboard"}function nl(e,t,r){let n=zs(r),i=t===n?m(t,e):Xs(e,t)?m(n,e):m(t,m(n,e)),s=Xs(i,n)?i:m(n,i),u=(()=>{let f=on(s,c$);return ro(f)})(),a=j(u,p=>{let f=p+"/",d=qt(s,ct=>Nt(ct,f)),y=xl(d,ct=>{let At=_n(ct,f,"");return dn(At,"/")}),A=y[0],N=y[1],Xr=(()=>{let ct=j(A,At=>{let W=_n(At,f,""),D=(()=>{let te=se(W,"/"),Le=nn(te);return K(Le,"")})();return f+D});return ro(ct)})();return[p,[Xr,N]]});return Qn(a)}var oe=class extends c{constructor(t,r,n,i,s,o,u,a,p){super(),this.route=t,this.file_tree=r,this.audit_metadata=n,this.source_files=i,this.discussions=s,this.discussion_overlay_models=o,this.keyboard_model=u,this.selected_discussion=a,this.selected_node_id=p}},Kr=class extends c{},St=class extends c{constructor(t){super(),this.audit_name=t}},Vr=class extends c{constructor(t,r){super(),this.audit_name=t,this.page_path=r}},Ms=class extends c{constructor(t){super(),this.route=t}},Cs=class extends c{constructor(t,r){super(),this.audit_name=t,this.metadata=r}},Is=class extends c{constructor(t,r){super(),this.page_path=t,this.source_file=r}},Ns=class extends c{constructor(t,r){super(),this.audit_name=t,this.discussion=r}},Bs=class extends c{constructor(t){super(),this.audit_name=t}},Ws=class extends c{constructor(t){super(),this.browser_event=t}},Ds=class extends c{constructor(t,r,n,i,s,o){super(),this.line_number=t,this.column_number=r,this.node_id=n,this.topic_id=i,this.topic_title=s,this.is_reference=o}},Fs=class extends c{},Ps=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Js=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Hs=class extends c{constructor(t,r,n){super(),this.line_number=t,this.column_number=r,this.update=n}},Xn=class extends c{constructor(t){super(),this.updated_model=t}},Rs=class extends c{constructor(t){super(),this.error=t}};function fp(e){let t=Fo(e.path);if(t.hasLength(0))return new Kr;if(t.hasLength(1)&&t.head==="dashboard")return new Kr;if(t.hasLength(1)){let r=t.head;return new St(r)}else if(t.hasLength(2)&&t.tail.head==="dashboard"){let r=t.head;return new St(r)}else{let r=t.head;return new Vr(r,(()=>{let n=e.path;return _t(n,1)})())}}function f$(e){let t=fp(e);return new Ms(t)}function cp(e,t){if(e instanceof Kr)return Z();if(e instanceof St){let r=e.audit_name,n=(()=>{let i=P(t,r),s=R(i,o=>o.isOk()?o[0].in_scope_files:l([]));return K(s,l([]))})();return nl(n,zs(r),r)}else{let r=e.audit_name,n=e.page_path,i=(()=>{let s=P(t,r),o=R(s,u=>u.isOk()?u[0].in_scope_files:l([]));return K(o,l([]))})();return nl(i,n,r)}}function pp(e,t){let r=P(e.audit_metadata,t);return r.isOk()&&r[0].isOk()?B():Ji("/audit-metadata/"+t,Mr(Va(),n=>new Cs(t,n)))}function d$(e,t){let r=P(e.source_files,t);return r.isOk()&&r[0].isOk()?B():Ji("/source-file/"+t,Mr(it(Ac()),n=>new Is(t,n)))}function il(e){return Ji("/audit-discussion/"+e,Mr(it(bc()),t=>new Ns(e,t)))}function dp(e,t){if(t instanceof St){let r=t.audit_name;return $i(l([pp(e,r),il(r)]))}else if(t instanceof Vr){let r=t.audit_name,n=t.page_path;return $i(l([il(r),pp(e,r),d$(e,n)]))}else return B()}function _$(e){let t=(()=>{let n=mu();if(n.isOk()){let i=n[0];return fp(i)}else return new Kr})(),r=new oe(t,Z(),Z(),Z(),Z(),Z(),Hc(),new w,new w);return[r,$i(l([Ka(f$),Be(n=>Hu("keydown",i=>(Rc(i),n(new Ws(i))))),dp(r,r.route)]))]}function m$(e,t){if(t instanceof Ms){let r=t.route;return[(()=>{let n=e;return new oe(r,cp(r,e.audit_metadata),n.audit_metadata,n.source_files,n.discussions,n.discussion_overlay_models,n.keyboard_model,n.selected_discussion,n.selected_node_id)})(),dp(e,r)]}else if(t instanceof Cs){let r=t.audit_name,n=t.metadata,i=G(e.audit_metadata,r,n);return[(()=>{let s=e;return new oe(s.route,cp(e.route,i),i,s.source_files,s.discussions,s.discussion_overlay_models,s.keyboard_model,s.selected_discussion,s.selected_node_id)})(),B()]}else if(t instanceof Is){let r=t.page_path,n=t.source_file;return[(()=>{let i=e;return new oe(i.route,i.file_tree,i.audit_metadata,G(e.source_files,r,n),i.discussions,i.discussion_overlay_models,i.keyboard_model,i.selected_discussion,i.selected_node_id)})(),B()]}else if(t instanceof Ns){let r=t.audit_name,n=t.discussion;if(n.isOk()){let i=n[0];return[(()=>{let s=e;return new oe(s.route,s.file_tree,s.audit_metadata,s.source_files,G(e.discussions,r,eo(i,u=>u.parent_id)),s.discussion_overlay_models,s.keyboard_model,s.selected_discussion,s.selected_node_id)})(),B()]}else{let i=n[0];return nt("Failed to fetch discussion: "+wr(i)),[e,B()]}}else if(t instanceof Bs){let r=t.audit_name;return[e,il(r)]}else if(t instanceof Ws){let r=t.browser_event,n=Uc(r,e.keyboard_model),i=n[0],s=n[1];return[(()=>{let o=e;return new oe(o.route,o.file_tree,o.audit_metadata,o.source_files,o.discussions,o.discussion_overlay_models,i,o.selected_discussion,o.selected_node_id)})(),s]}else if(t instanceof Js){let r=t.line_number,n=t.column_number;return[(()=>{let i=e;return new oe(i.route,i.file_tree,i.audit_metadata,i.source_files,i.discussions,i.discussion_overlay_models,(()=>{let s=e.keyboard_model;return new Gr(r,n,s.current_line_column_count,s.is_user_typing)})(),i.selected_discussion,i.selected_node_id)})(),B()]}else if(t instanceof Ds){let r=t.line_number,n=t.column_number,i=t.node_id,s=t.topic_id,o=t.topic_title,u=t.is_reference,a=[r,n],p=P(e.discussion_overlay_models,a).isOk()?e.discussion_overlay_models:G(e.discussion_overlay_models,a,ep(r,n,s,o,u));return[(()=>{let f=e;return new oe(f.route,f.file_tree,f.audit_metadata,f.source_files,f.discussions,p,f.keyboard_model,new $(a),i)})(),B()]}else{if(t instanceof Fs)return[(()=>{let r=e;return new oe(r.route,r.file_tree,r.audit_metadata,r.source_files,r.discussions,r.discussion_overlay_models,r.keyboard_model,new w,new w)})(),B()];if(t instanceof Ps){let r=t.line_number,n=t.column_number;return Vn("clicked discussion entry","src/o11a_client.gleam",338),[e,Be(i=>{let s=(()=>{let o=Dc(r,n);return R(o,Wn)})();if(!(s.isOk()&&!s[0]))return nt("Failed to focus discussion input")})]}else if(t instanceof Hs){let r=t.line_number,n=t.column_number,i=t.update,s=i[0],o=i[1];if(o instanceof Rn){let u=o.note,a=o.topic_id;return[e,(()=>{let p=e.route;if(p instanceof Vr){let f=p.audit_name;return du("/submit-note/"+f,st(l([["topic_id",xe(a)],["note_submission",qu(u)]])),Mr(b("msg",S,d=>{let y=d==="success"?Y(void 0):gr(void 0,d);return Vn(y,"src/o11a_client.gleam",377)}),d=>{let y=(()=>{if(d.isOk()&&!d[0])return new Xn(s);{let A=d[0];return new Rs(A)}})();return Vn(y,"src/o11a_client.gleam",384)}))}else if(p instanceof St){let f=p.audit_name;return du("/submit-note/"+f,st(l([["topic_id",xe(a)],["note_submission",qu(u)]])),Mr(b("msg",S,d=>{let y=d==="success"?Y(void 0):gr(void 0,d);return Vn(y,"src/o11a_client.gleam",377)}),d=>{let y=(()=>{if(d.isOk()&&!d[0])return new Xn(s);{let A=d[0];return new Rs(A)}})();return Vn(y,"src/o11a_client.gleam",384)}))}else return B()})()]}else return o instanceof Yn?[(()=>{let u=e;return new oe(u.route,u.file_tree,u.audit_metadata,u.source_files,u.discussions,G(e.discussion_overlay_models,[r,n],s),u.keyboard_model,u.selected_discussion,u.selected_node_id)})(),B()]:o instanceof Un?[(()=>{let u=e;return new oe(u.route,u.file_tree,u.audit_metadata,u.source_files,u.discussions,G(e.discussion_overlay_models,[r,n],s),u.keyboard_model,u.selected_discussion,u.selected_node_id)})(),B()]:o instanceof Gn?[(()=>{let u=e;return new oe(u.route,u.file_tree,u.audit_metadata,u.source_files,u.discussions,G(e.discussion_overlay_models,[r,n],s),u.keyboard_model,u.selected_discussion,u.selected_node_id)})(),B()]:o instanceof Zn?[(()=>{let u=e;return new oe(u.route,u.file_tree,u.audit_metadata,u.source_files,u.discussions,G(e.discussion_overlay_models,[r,n],s),u.keyboard_model,u.selected_discussion,u.selected_node_id)})(),B()]:[(()=>{let u=e;return new oe(u.route,u.file_tree,u.audit_metadata,u.source_files,u.discussions,G(e.discussion_overlay_models,[r,n],s),u.keyboard_model,u.selected_discussion,u.selected_node_id)})(),B()]}else if(t instanceof Xn){let r=t.updated_model;return[(()=>{let n=e;return new oe(n.route,n.file_tree,n.audit_metadata,n.source_files,n.discussions,G(e.discussion_overlay_models,[r.line_number,r.column_number],r),n.keyboard_model,n.selected_discussion,n.selected_node_id)})(),B()]}else{let r=t.error;return So("Failed to submit note: "+wr(r)),[e,B()]}}}function $$(e){return Se(Oc,t=>{let r=l([new V("","",l([]))]);return M((()=>{let n=ke(t,Xl(l(["detail","audit_name"]),S));return Q(n,r)})(),n=>{let i=e(n);return new _(i)})})}function h$(e){if(e instanceof vt){let t=e.line_number,r=e.column_number,n=e.node_id,i=e.topic_id,s=e.topic_title,o=e.is_reference;return new Ds(t,r,n,i,s,o)}else{if(e instanceof kt)return new Fs;if(e instanceof Ot){let t=e.line_number,r=e.column_number;return new Ps(t,r)}else if(e instanceof Kn){let t=e.line_number,r=e.column_number,n=e.update;return new Hs(t,r,n)}else{let t=e.line_number,r=e.column_number;return new Js(t,r)}}}function x$(e){let t=e.route;if(t instanceof St){let r=t.audit_name;return L(l([]),l([tu(l([ru("/component-discussion/"+r)])),rl(fe(l([]),l([q("Dashboard")])),new w,e.file_tree,r,zs(r))]))}else if(t instanceof Vr){let r=t.audit_name,n=t.page_path;return L(l([]),l([tu(l([ru("/component-discussion/"+r),$$(i=>new Bs(i))])),rl((()=>{let i=up((()=>{let s=P(e.source_files,n),o=R(s,u=>u.isOk()?u[0]:l([]));return K(o,l([]))})(),(()=>{let s=P(e.discussions,r);return K(s,Z())})(),(()=>{let s=e.selected_discussion;if(s instanceof $){let o=s[0],u=P(e.discussion_overlay_models,o),a=R(u,p=>new $(new Es(o[0],o[1],p)));return K(a,new w)}else return new w})());return Sr(i,h$)})(),new w,e.file_tree,r,n)]))}else return fe(l([]),l([q("Home")]))}function _p(){nt("Starting client controller");let e=va(_$,m$,x$);return ka(e,"#app",void 0)}function Vn(e,t,r){let n="\x1B[90m",i="\x1B[39m",s=`${t}:${r}`,o=at(e);if(typeof process=="object"&&process.stderr?.write){let u=`${n}${s}${i}
${o}
`;process.stderr.write(u)}else if(typeof Deno=="object"){let u=`${n}${s}${i}
${o}
`;Deno.stderr.writeSync(new TextEncoder().encode(u))}else{let u=`${s}
${o}`;console.log(u)}return e}function w$(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];n==`
`?t+="\\n":n=="\r"?t+="\\r":n=="	"?t+="\\t":n=="\f"?t+="\\f":n=="\\"?t+="\\\\":n=='"'?t+='\\"':n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}return t+='"',t}function g$(e){let t="dict.from_list([",r=!0,n=[];return e.forEach((i,s)=>{n.push([s,i])}),n.sort(),n.forEach(([i,s])=>{r||(t=t+", "),t=t+"#("+at(i)+", "+at(s)+")",r=!1}),t+"])"}function y$(e){let t=Object.keys(e).map(r=>{let n=at(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function b$(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${at(s)}: ${at(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function at(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return w$(e);if(t==="bigint"||t==="number")return e.toString();if(Array.isArray(e))return`#(${e.map(at).join(", ")})`;if(e instanceof F)return`[${e.toArray().map(at).join(", ")}]`;if(e instanceof Et)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof ze)return v$(e);if(e instanceof c)return y$(e);if(k$(e))return g$(e);if(e instanceof Set)return`//js(Set(${[...e].map(at).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return b$(e)}function v$(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),r=pr(e,e.bitOffset,t),n=e.bitSize%8;if(n>0){let i=ll(e,t,e.bitSize,!1,!1),s=Array.from(r.rawBuffer),o=`${i}:size(${n})`;return s.length===0?`<<${o}>>`:`<<${Array.from(r.rawBuffer).join(", ")}, ${o}>>`}else return`<<${Array.from(r.rawBuffer).join(", ")}>>`}function k$(e){try{return e instanceof qe}catch{return!1}}_p();
