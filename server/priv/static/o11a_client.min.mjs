var c=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},F=class{static fromArray(t,r){let n=r||new Qr;for(let i=t.length-1;i>=0;--i)n=new zt(t[i],n);return n}[Symbol.iterator](){return new Rs(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof Qr}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function $(e,t){return new zt(e,t)}function l(e,t){return F.fromArray(e,t)}var Rs=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof Qr)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},Qr=class extends F{},zt=class extends F{constructor(t,r){super(),this.head=t,this.tail=r}},Ne=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Xr(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=Xr(this.rawBuffer,this.bitOffset,i),o=Xr(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=Xr(this.rawBuffer,this.bitOffset,r),s=Xr(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(sl("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(sl("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function Xr(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Mt=class{constructor(t){this.value=t}},il={};function sl(e,t){il[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),il[e]=!0)}function mr(e,t,r){if(r??=e.bitSize,ll(e,t,r),t===r)return new Ne(new Uint8Array);if(t===0&&r===e.bitSize)return e;t+=e.bitOffset,r+=e.bitOffset;let n=Math.trunc(t/8),s=Math.trunc((r+7)/8)-n,o;return n===0&&s===e.rawBuffer.byteLength?o=e.rawBuffer:o=new Uint8Array(e.rawBuffer.buffer,e.rawBuffer.byteOffset+n,s),new Ne(o,r-t,t%8)}function ul(e,t,r,n,i){if(ll(e,t,r),t===r)return 0;t+=e.bitOffset,r+=e.bitOffset;let s=t%8===0,o=r%8===0;if(s&&o)return $p(e,t/8,r/8,n,i);let u=r-t,a=Math.trunc(t/8),p=Math.trunc((r-1)/8);if(a==p){let f=255>>t%8,d=(8-r%8)%8,v=(e.rawBuffer[a]&f)>>d;if(i){let T=2**(u-1);v>=T&&(v-=T*2)}return v}return u<=53?wp(e.rawBuffer,t,r,n,i):gp(e.rawBuffer,t,r,n,i)}function $p(e,t,r,n,i){return r-t<=6?hp(e.rawBuffer,t,r,n,i):xp(e.rawBuffer,t,r,n,i)}function hp(e,t,r,n,i){let s=r-t,o=0;if(n)for(let u=t;u<r;u++)o*=256,o+=e[u];else for(let u=r-1;u>=t;u--)o*=256,o+=e[u];if(i){let u=2**(s*8-1);o>=u&&(o-=u*2)}return o}function xp(e,t,r,n,i){let s=r-t,o=0n;if(n)for(let u=t;u<r;u++)o*=256n,o+=BigInt(e[u]);else for(let u=r-1;u>=t;u--)o*=256n,o+=BigInt(e[u]);if(i){let u=1n<<BigInt(s*8-1);o>=u&&(o-=u*2n)}return Number(o)}function wp(e,t,r,n,i){let s=t%8===0,o=r-t,u=Math.trunc(t/8),a=0;if(n){if(!s){let p=8-t%8;a=e[u++]&(1<<p)-1,o-=p}for(;o>=8;)a*=256,a+=e[u++],o-=8;o>0&&(a*=2**o,a+=e[u]>>8-o)}else if(s){let p=r-t,f=1;for(;p>=8;)a+=e[u++]*f,f*=256,p-=8;a+=(e[u]>>8-p)*f}else{let p=t%8,f=8-p,d=r-t,v=1;for(;d>=8;){let T=e[u]<<p|e[u+1]>>f;a+=(T&255)*v,v*=256,d-=8,u++}if(d>0){let T=d-Math.max(0,d-f),I=(e[u]&(1<<f)-1)>>f-T;d-=T,d>0&&(I*=2**d,I+=e[u+1]>>8-d),a+=I*v}}if(i){let p=2**(r-t-1);a>=p&&(a-=p*2)}return a}function gp(e,t,r,n,i){let s=t%8===0,o=r-t,u=Math.trunc(t/8),a=0n;if(n){if(!s){let p=8-t%8;a=BigInt(e[u++]&(1<<p)-1),o-=p}for(;o>=8;)a*=256n,a+=BigInt(e[u++]),o-=8;o>0&&(a<<=BigInt(o),a+=BigInt(e[u]>>8-o))}else if(s){let p=r-t,f=0n;for(;p>=8;)a+=BigInt(e[u++])<<f,f+=8n,p-=8;a+=BigInt(e[u]>>8-p)<<f}else{let p=t%8,f=8-p,d=r-t,v=0n;for(;d>=8;){let T=e[u]<<p|e[u+1]>>f;a+=BigInt(T&255)<<v,v+=8n,d-=8,u++}if(d>0){let T=d-Math.max(0,d-f),I=(e[u]&(1<<f)-1)>>f-T;d-=T,d>0&&(I<<=d,I+=e[u+1]>>8-d),a+=BigInt(I)<<v}}if(i){let p=2n**BigInt(r-t-1);a>=p&&(a-=p*2n)}return Number(a)}function ll(e,t,r){if(t<0||t>e.bitSize||r<t||r>e.bitSize){let n=`Invalid bit array slice: start = ${t}, end = ${r}, bit size = ${e.bitSize}`;throw new globalThis.Error(n)}}var _r=class e extends c{static isResult(t){return t instanceof e}},_=class extends _r{constructor(t){super(),this[0]=t}isOk(){return!0}},h=class extends _r{constructor(t){super(),this[0]=t}isOk(){return!1}};function k(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!ol(n)||!ol(i)||!Ap(n,i)||bp(n,i)||vp(n,i)||kp(n,i)||Op(n,i)||Sp(n,i)||Lp(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[u,a]=yp(n);for(let p of u(n))r.push(a(n,p),a(i,p))}return!0}function yp(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function bp(e,t){return e instanceof Date&&(e>t||e<t)}function vp(e,t){return!(e instanceof Ne)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function kp(e,t){return Array.isArray(e)&&e.length!==t.length}function Op(e,t){return e instanceof Map&&e.size!==t.size}function Sp(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Lp(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function ol(e){return typeof e=="object"&&e!==null}function Ap(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function Ie(e,t){return t===0?0:e%t}function $e(e,t){return Math.trunc($r(e,t))}function $r(e,t){return t===0?0:e/t}function ye(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let u in s)o[u]=s[u];return o}var m=class extends c{constructor(t){super(),this[0]=t}},w=class extends c{};function hr(e){return!k(e,new w)}function en(e,t){if(e instanceof m){let r=e[0];return new _(r)}else return new h(t)}function Ct(e,t){return e instanceof m?e[0]:t}function tn(e,t){if(e instanceof m){let r=e[0];return new m(t(r))}else return new w}function al(e){return e instanceof m?e[0]:new w}function jp(e,t){return!k(P(t,e),new h(void 0))}function cl(e,t){return jp(t,e)}function G(e,t,r){return fl(t,r,e)}function Ep(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head[0],s=r.head[1];e=r.tail,t=G(n,i,s)}}}function Xn(e){return Ep(e,Z())}function Tp(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=$(i,n)}}}function qp(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return Tp(n,l([]));{let i=r.head[0];e=r.tail,t=$(i,n)}}}function Ys(e){return qp(Qn(e),l([]))}function Us(e,t){return pl(t,e)}function Gs(e){return e[1]}function dl(e,t){let r=e[0],n=e[1];return[r,t(n)]}function Mp(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function nt(e){return Mp(e,0)}function Zs(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=$(i,n)}}}function E(e){return Zs(e,l([]))}function Ks(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return!1;if(r.atLeastLength(1)&&k(r.head,n)){let i=r.head;return!0}else e=r.tail,t=n}}function rn(e){if(e.hasLength(0))return new h(void 0);{let t=e.head;return new _(t)}}function Cp(e){return(t,r)=>{let n=P(t,e(r));if(n.isOk()){let i=n[0];return G(t,e(r),$(r,i))}else return G(t,e(r),l([r]))}}function Np(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return E(s);{let o=n.head,u=n.tail,a=i(o)?$(o,s):s;e=u,t=i,r=a}}}function Nt(e,t){return Np(e,t,l([]))}function Ip(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return E(s);{let o=n.head,u=n.tail,a=(()=>{let p=i(o);if(p.isOk()){let f=p[0];return $(f,s)}else return s})();e=u,t=i,r=a}}}function Re(e,t){return Ip(e,t,l([]))}function Bp(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return E(s);{let o=n.head;e=n.tail,t=i,r=$(i(o),s)}}}function A(e,t){return Bp(e,t,l([]))}function Wp(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return E(u);{let a=i.head,p=i.tail,f=$(s(a,o),u);e=p,t=s,r=o+1,n=f}}}function nn(e,t){return Wp(e,t,0,l([]))}function Dp(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return E(s);if(n.hasLength(0))return E(s);{let u=n.head;e=n.tail,t=i-1,r=$(u,s)}}}function Vs(e,t){return Dp(e,t,l([]))}function Fp(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=$(i,n)}}}function _t(e,t){return Fp(E(e),t)}function Pp(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return E(n);{let i=r.head;e=r.tail,t=Zs(i,n)}}}function xr(e){return Pp(e,l([]))}function sn(e,t){let r=A(e,t);return xr(r)}function le(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Xs(e,t){return le(e,Z(),Cp(t))}function ml(e,t,r){let n=le(e,[t,l([])],(i,s)=>{let o=i[0],u=i[1],a=r(o,s),p=a[0],f=a[1];return[p,$(f,u)]});return dl(n,E)}function Jp(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return s;{let a=i.head;e=i.tail,t=o(s,a,u),r=o,n=u+1}}}function wr(e,t,r){return Jp(e,t,r,0)}function Qs(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new h(void 0);{let i=r.head,s=r.tail;if(n(i))return new _(i);e=s,t=n}}}function Hp(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return E(s);{let o=n.head,u=n.tail;cl(i,o)?(e=u,t=i,r=s):(e=u,t=G(i,o,void 0),r=$(o,s))}}}function eo(e){return Hp(e,Z(),l([]))}function Rp(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return s;e=n,t=i-1,r=$(n,s)}}function $l(e,t){return Rp(e,t,l([]))}function Yp(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.atLeastLength(1)&&k(i.head[0],s)){let a=i.head[0],p=i.tail;return Zs(u,$([a,o],p))}else if(i.atLeastLength(1)){let a=i.head;e=i.tail,t=s,r=o,n=$(a,u)}else return E($([s,o],u))}}function to(e,t,r){return Yp(e,t,r,l([]))}function Up(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return[E(o),E(u)];{let a=i.head,p=i.tail;s(a)?(e=p,t=s,r=$(a,o),n=u):(e=p,t=s,r=o,n=$(a,u))}}}function hl(e,t){return Up(e,t,l([]),l([]))}function Gp(e,t){if(e.hasLength(0))return new h(void 0);{let r=e.head,n=e.tail;return new _(le(n,r,t))}}function xl(e){return Gp(e,(t,r)=>r)}function wl(e){return!!e.isOk()}function J(e,t){if(e.isOk()){let r=e[0];return new _(t(r))}else{let r=e[0];return new h(r)}}function it(e,t){if(e.isOk()){let r=e[0];return new _(r)}else{let r=e[0];return new h(t(r))}}function M(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new h(r)}}function je(e,t){return M(e,t)}function K(e,t){return e.isOk()?e[0]:t}function Q(e,t){if(e.isOk()){let r=e[0];return new _(r)}else return new h(t)}function It(e,t){if(e.isOk()){let r=e[0];return new _(r)}else{let r=e[0];return t(r)}}function an(e,t){return io(e,t)}function yl(e){let r=e,n=gr(r),i=E(n);return Ee(i)}var V=class extends c{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function Qp(e,t){return it(e,r=>A(r,t))}function oo(e){return lo(e)}function bl(e){return t=>{if(e.hasLength(0))return new h(l([new V("another type",ce(t),l([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new _(s)}else return bl(n)(t)}}}function ef(e,t){let r=t,n=bl(l([lo,o=>J(vl(o),y)])),i=(()=>{let o=n(r);if(o.isOk())return o[0];{let u=l(["<",ce(r),">"]),a=Ee(u);return a}})(),s=e;return new V(s.expected,s.found,$(i,e.path))}function uo(e,t){return r=>{let n=new V("field","nothing",l([]));return M(kl(r,e),i=>{let o=en(i,l([n])),u=M(o,t);return Qp(u,a=>ef(a,e))})}}var Ol=new WeakMap,ao=new DataView(new ArrayBuffer(8)),co=0;function po(e){let t=Ol.get(e);if(t!==void 0)return t;let r=co++;return co===2147483647&&(co=0),Ol.set(e,r),r}function fo(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function mo(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Ll(e){ao.setFloat64(0,e);let t=ao.getInt32(0),r=ao.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function rf(e){return mo(e.toString())}function nf(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return po(e);if(e instanceof Date)return Ll(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+Te(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+Te(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+fo(Te(n),Te(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+fo(Te(o),mo(s))|0}}return r}function Te(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Ll(e);case"string":return mo(e);case"bigint":return rf(e);case"object":return nf(e);case"symbol":return po(e);case"function":return po(e);default:return 0}}var Ue=5,$o=Math.pow(2,Ue),sf=$o-1,of=$o/2,uf=$o/4,pe=0,Ye=1,be=2,Wt=3,ho={type:be,bitmap:0,array:[]};function cn(e,t){return e>>>t&sf}function ni(e,t){return 1<<cn(e,t)}function lf(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function xo(e,t){return lf(e&t-1)}function qe(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function af(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function _o(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Al(e,t,r,n,i,s){let o=Te(t);if(o===n)return{type:Wt,hash:o,array:[{type:pe,k:t,v:r},{type:pe,k:i,v:s}]};let u={val:!1};return pn(wo(ho,e,o,t,r,u),e,n,i,s,u)}function pn(e,t,r,n,i,s){switch(e.type){case Ye:return cf(e,t,r,n,i,s);case be:return wo(e,t,r,n,i,s);case Wt:return pf(e,t,r,n,i,s)}}function cf(e,t,r,n,i,s){let o=cn(r,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:Ye,size:e.size+1,array:qe(e.array,o,{type:pe,k:n,v:i})};if(u.type===pe)return k(n,u.k)?i===u.v?e:{type:Ye,size:e.size,array:qe(e.array,o,{type:pe,k:n,v:i})}:(s.val=!0,{type:Ye,size:e.size,array:qe(e.array,o,Al(t+Ue,u.k,u.v,r,n,i))});let a=pn(u,t+Ue,r,n,i,s);return a===u?e:{type:Ye,size:e.size,array:qe(e.array,o,a)}}function wo(e,t,r,n,i,s){let o=ni(r,t),u=xo(e.bitmap,o);if(e.bitmap&o){let a=e.array[u];if(a.type!==pe){let f=pn(a,t+Ue,r,n,i,s);return f===a?e:{type:be,bitmap:e.bitmap,array:qe(e.array,u,f)}}let p=a.k;return k(n,p)?i===a.v?e:{type:be,bitmap:e.bitmap,array:qe(e.array,u,{type:pe,k:n,v:i})}:(s.val=!0,{type:be,bitmap:e.bitmap,array:qe(e.array,u,Al(t+Ue,p,a.v,r,n,i))})}else{let a=e.array.length;if(a>=of){let p=new Array(32),f=cn(r,t);p[f]=wo(ho,t+Ue,r,n,i,s);let d=0,v=e.bitmap;for(let T=0;T<32;T++){if(v&1){let I=e.array[d++];p[T]=I}v=v>>>1}return{type:Ye,size:a+1,array:p}}else{let p=af(e.array,u,{type:pe,k:n,v:i});return s.val=!0,{type:be,bitmap:e.bitmap|o,array:p}}}}function pf(e,t,r,n,i,s){if(r===e.hash){let o=go(e,n);if(o!==-1)return e.array[o].v===i?e:{type:Wt,hash:r,array:qe(e.array,o,{type:pe,k:n,v:i})};let u=e.array.length;return s.val=!0,{type:Wt,hash:r,array:qe(e.array,u,{type:pe,k:n,v:i})}}return pn({type:be,bitmap:ni(e.hash,t),array:[e]},t,r,n,i,s)}function go(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(k(t,e.array[n].k))return n;return-1}function ri(e,t,r,n){switch(e.type){case Ye:return ff(e,t,r,n);case be:return df(e,t,r,n);case Wt:return _f(e,n)}}function ff(e,t,r,n){let i=cn(r,t),s=e.array[i];if(s!==void 0){if(s.type!==pe)return ri(s,t+Ue,r,n);if(k(n,s.k))return s}}function df(e,t,r,n){let i=ni(r,t);if(!(e.bitmap&i))return;let s=xo(e.bitmap,i),o=e.array[s];if(o.type!==pe)return ri(o,t+Ue,r,n);if(k(n,o.k))return o}function _f(e,t){let r=go(e,t);if(!(r<0))return e.array[r]}function yo(e,t,r,n){switch(e.type){case Ye:return mf(e,t,r,n);case be:return $f(e,t,r,n);case Wt:return hf(e,n)}}function mf(e,t,r,n){let i=cn(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===pe){if(!k(s.k,n))return e}else if(o=yo(s,t+Ue,r,n),o===s)return e;if(o===void 0){if(e.size<=uf){let u=e.array,a=new Array(e.size-1),p=0,f=0,d=0;for(;p<i;){let v=u[p];v!==void 0&&(a[f]=v,d|=1<<p,++f),++p}for(++p;p<u.length;){let v=u[p];v!==void 0&&(a[f]=v,d|=1<<p,++f),++p}return{type:be,bitmap:d,array:a}}return{type:Ye,size:e.size-1,array:qe(e.array,i,o)}}return{type:Ye,size:e.size,array:qe(e.array,i,o)}}function $f(e,t,r,n){let i=ni(r,t);if(!(e.bitmap&i))return e;let s=xo(e.bitmap,i),o=e.array[s];if(o.type!==pe){let u=yo(o,t+Ue,r,n);return u===o?e:u!==void 0?{type:be,bitmap:e.bitmap,array:qe(e.array,s,u)}:e.bitmap===i?void 0:{type:be,bitmap:e.bitmap^i,array:_o(e.array,s)}}return k(n,o.k)?e.bitmap===i?void 0:{type:be,bitmap:e.bitmap^i,array:_o(e.array,s)}:e}function hf(e,t){let r=go(e,t);if(r<0)return e;if(e.array.length!==1)return{type:Wt,hash:e.hash,array:_o(e.array,r)}}function jl(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===pe){t(s.v,s.k);continue}jl(s,t)}}}var ze=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=ri(this.root,0,Te(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?ho:this.root,s=pn(i,0,Te(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=yo(this.root,0,Te(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:ri(this.root,0,Te(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){jl(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+fo(Te(r),Te(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!k(t.get(n,!r),r))throw Sl}),!0}catch(r){if(r===Sl)return!1;throw r}}},Sl=Symbol();var ii=void 0,El={};function H(e){return e}function mt(e){return/^[-+]?(\d+)$/.test(e)?new _(parseInt(e)):new h(ii)}function y(e){return e.toString()}function si(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let r=t.indexOf("e");return r>=0?t.slice(0,r)+".0"+t.slice(r):t+".0"}}function no(e,t,r){return typeof e.replaceAll<"u"?e.replaceAll(t,r):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)}function st(e){if(e==="")return 0;let t=oi(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function gr(e){let t=oi(e);return t?F.fromArray(Array.from(t).map(r=>r.segment)):F.fromArray(e.match(/./gsu))}var Tl;function oi(e){if(globalThis.Intl&&Intl.Segmenter)return Tl||=new Intl.Segmenter,Tl.segment(e)[Symbol.iterator]()}function ui(e){let t,r=oi(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new _([t,e.slice(t.length)]):new h(ii)}function Dt(e){return[e.charCodeAt(0)|0,e.slice(1)]}function ae(e){return e.toLowerCase()}function io(e,t){return e+t}function so(e,t){return F.fromArray(e.split(t))}function ie(e,t){let r=e[Symbol.iterator](),n=r.next().value||"",i=r.next();for(;!i.done;)n=n+t+i.value,i=r.next();return n}function Ee(e){let t="";for(let r of e)t=t+r;return t}function vo(e,t,r){if(r<=0||t>=e.length)return"";let n=oi(e);if(n){for(;t-- >0;)n.next();let i="";for(;r-- >0;){let s=n.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+r).join("")}function se(e,t,r){return e.slice(t,t+r)}function fn(e,t){return e.indexOf(t)>=0}function Ft(e,t){return e.startsWith(t)}function yr(e,t){let r=e.indexOf(t);if(r>=0){let n=e.slice(0,r),i=e.slice(r+t.length);return new _([n,i])}else return new h(ii)}var zl=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),wf=new RegExp(`^[${zl}]*`),gf=new RegExp(`[${zl}]*$`);function Ml(e){return e.replace(wf,"")}function Cl(e){return e.replace(gf,"")}function ot(e){console.log(e)}function ko(e){typeof process=="object"&&process.stdout?.write?process.stdout.write(e):typeof Deno=="object"?Deno.stdout.writeSync(new TextEncoder().encode(e)):console.log(e)}function on(e){return Math.floor(e)}function Oo(e){return Math.round(e)}function un(){let e=Math.random();return e===1?un():e}function Nl(e){return new Mt(e)}function Il(e){return F.fromArray(Array.from(e).map(t=>t.codePointAt(0)))}function So(e){return e.value}function Z(){return ze.new()}function Qn(e){return F.fromArray(e.entries())}function pl(e,t){return t.delete(e)}function P(e,t){let r=e.get(t,El);return r===El?new h(ii):new _(r)}function fl(e,t,r){return r.set(e,t)}function ce(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof _r)return"Result";if(e instanceof F)return"List";if(e instanceof Ne)return"BitArray";if(e instanceof ze)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function Lo(e,t){return yf(e,ce(t))}function yf(e,t){return new h(F.fromArray([new V(e,t,F.fromArray([]))]))}function lo(e){return typeof e=="string"?new _(e):Lo("String",e)}function vl(e){return Number.isInteger(e)?new _(e):Lo("Int",e)}function kl(e,t){let r=()=>Lo("Dict",e);if(e instanceof ze||e instanceof WeakMap||e instanceof Map){let n=P(e,t);return new _(n.isOk()?new m(n[0]):new w)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?ql(e,t,()=>new _(new w)):ql(e,t,r)}function ql(e,t,r){try{return t in e?new _(new m(e[t])):r()}catch{return r()}}function Ge(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return bf(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return si(e);if(Array.isArray(e))return`#(${e.map(Ge).join(", ")})`;if(e instanceof F)return Sf(e);if(e instanceof Mt)return Lf(e);if(e instanceof Ne)return`<<${Bl(e,"")}>>`;if(e instanceof c)return Of(e);if(e instanceof ze)return vf(e);if(e instanceof Set)return`//js(Set(${[...e].map(Ge).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return kf(e)}function bf(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];switch(n){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}}return t+='"',t}function vf(e){let t="dict.from_list([",r=!0;return e.forEach((n,i)=>{r||(t=t+", "),t=t+"#("+Ge(i)+", "+Ge(n)+")",r=!1}),t+"])"}function kf(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${Ge(s)}: ${Ge(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function Of(e){let t=Object.keys(e).map(r=>{let n=Ge(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Sf(e){return`[${e.toArray().map(Ge).join(", ")}]`}function Lf(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function Bl(e,t){if(e.bitSize===0)return t;for(let r=0;r<e.byteSize-1;r++)t+=e.byteAt(r).toString(),t+=", ";if(e.byteSize*8===e.bitSize)t+=e.byteAt(e.byteSize-1).toString();else{let r=e.bitSize%8;t+=e.byteAt(e.byteSize-1)>>8-r,t+=`:size(${r})`}return t}function jf(e){return-1*e}function ei(e){return e>=0?Oo(e):0-Oo(jf(e))}function li(e,t){return e<t?e:t}function Ao(e,t){return e>t?e:t}function ro(e){let t=un()*e,r=on(t);return ei(r)}function Wl(e){let r=e,n=yl(r);return n}function dn(e,t,r){let i=e,s=no(i,t,r);return s}function xe(e,t,r){if(r<0)return"";if(t<0){let s=st(e)+t;return s<0?"":vo(e,s,r)}else return vo(e,t,r)}function Pt(e,t){let n=e,i=an(n,t);return i}function ai(e){let r=Ee(e);return r}function br(e){let r=Ml(e);return Cl(r)}function $t(e,t){for(;;){let r=e,n=t;if(n>0){let s=ui(r);if(s.isOk())e=s[0][1],t=n-1;else return r}else return r}}function oe(e,t){if(t==="")return gr(e);{let n=e,i=so(n,t);return A(i,H)}}function Tf(e){let r=Il(e);return A(r,Nl)}function Dl(e){return Tf(e)}function vr(e){let t=Ge(e);return t}function Jl(e,t){if(e instanceof ze||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new _(new w):new _(new m(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof F){let n=0;for(let i of e){if(n===t)return new _(new m(i));n++}return new h("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new _(new m(e[t])):new _(new w):new h(r?"Indexable":"Dict")}function Hl(e,t,r,n,i){if(!(e instanceof F||Array.isArray(e))){let o=new We("List",ce(e),i);return[i,F.fromArray([o])]}let s=[];for(let o of e){let u=t(o),[a,p]=u;if(p instanceof zt){let[f,d]=r(u,n.toString());return[i,d]}s.push(a),n++}return[F.fromArray(s),i]}function Rl(e){return Number.isInteger(e)?new _(e):new h(0)}function Yl(e){return typeof e=="string"?new _(e):new h(0)}function Ul(e){return e==null}var We=class extends c{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},ve=class extends c{constructor(t){super(),this.function=t}};function ke(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new _(n):new h(i)}function Y(e){return new ve(t=>[e,l([])])}function Cf(e,t){return new ve(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function Nf(e,t,r){for(;;){let n=e,i=t,s=r;if(s.hasLength(0))return i;{let o=s.head,u=s.tail,a=o.function(n),p=a;if(a[1].hasLength(0))return p;e=n,t=i,r=u}}}function If(e,t){return new ve(r=>{let n=e.function(r),i=n;return n[1].hasLength(0)?i:Nf(r,i,t)})}function To(e){return new ve(t=>{if(Ul(t))return[new w,l([])];{let n=e.function(t),i=n[0],s=n[1];return[new m(i),s]}})}function Gl(e,t){return l([new We(e,ce(t),l([]))])}function Zl(e,t,r){let n=r(e);return n.isOk()?[n[0],l([])]:[n[0],l([new We(t,ce(e),l([]))])]}function Bf(e){return k(!0,e)?[!0,l([])]:k(!1,e)?[!1,l([])]:[!1,Gl("Bool",e)]}function Wf(e){return Zl(e,"Int",Rl)}function mn(e,t){return new ve(r=>[e,Gl(t,r)])}var kr=new ve(Bf),Oe=new ve(Wf);function Df(e){return Zl(e,"String",Yl)}var L=new ve(Df);function ut(e){return new ve(t=>Hl(t,e.function,(r,n)=>_n(r,l([n])),0,l([])))}function _n(e,t){let r=If(L,l([Cf(Oe,y)])),n=A(t,s=>{let o=s,u=ke(o,r);return u.isOk()?u[0]:"<"+ce(o)+">"}),i=A(e[1],s=>{let o=s;return new We(o.expected,o.found,_t(n,s.path))});return[e[0],i]}function Kl(e,t,r,n,i){for(;;){let s=e,o=t,u=r,a=n,p=i;if(s.hasLength(0)){let f=u(a);return _n(f,E(o))}else{let f=s.head,d=s.tail,v=Jl(a,f);if(v.isOk()&&v[0]instanceof m){let T=v[0][0];e=d,t=$(f,o),r=u,n=T,i=p}else{if(v.isOk()&&v[0]instanceof w)return p(a,$(f,o));{let T=v[0],Tt=[u(a)[0],l([new We(T,ce(a),l([]))])];return _n(Tt,E(o))}}}}}function qo(e,t,r){return new ve(n=>{let i=Kl(e,l([]),t.function,n,(f,d)=>{let I=[t.function(f)[0],l([new We("Field","Nothing",l([]))])];return _n(I,E(d))}),s=i[0],o=i[1],u=r(s).function(n),a=u[0],p=u[1];return[a,_t(o,p)]})}function Vl(e,t){return new ve(r=>Kl(e,l([]),t.function,r,(n,i)=>{let u=[t.function(n)[0],l([new We("Field","Nothing",l([]))])];return _n(u,E(i))}))}function b(e,t,r){return qo(l([e]),t,r)}function zo(e){return JSON.stringify(e)}function Xl(e){return Object.fromEntries(e)}function Ql(){return null}function ea(e){try{let t=JSON.parse(e);return new _(t)}catch(t){return new h(Ff(t,e))}}function Ff(e,t){return Pf(e)?new pi:Jf(e,t)}function Pf(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Jf(e,t){let r=[Hf,Rf,Uf,Yf];for(let n of r){let i=n(e,t);if(i)return i}return new ht("",0)}function Hf(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=ci(r[1]);return new ht(n,-1)}function Rf(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=ci(r[1]),i=Number(r[2]);return new ht(n,i)}function Yf(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=Gf(i,s,t),u=ci(t[o]);return new ht(u,o)}function Uf(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=ci(r[2]);return new ht(n,0)}function ci(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function Gf(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var pi=class extends c{},ht=class extends c{constructor(t){super(),this[0]=t}};var Mo=class extends c{constructor(t){super(),this[0]=t}};function Zf(e,t){return je(ea(e),r=>{let n=ke(r,t);return it(n,i=>new Mo(i))})}function No(e,t){return Zf(e,t)}function Io(e){return zo(e)}function Se(e){return e}function Jt(e){return e}function ta(){return Ql()}function ra(e,t){if(e instanceof m){let r=e[0];return t(r)}else return ta()}function xt(e){return Xl(e)}var O=class extends c{constructor(t,r,n,i,s,o,u){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=u}};function Qf(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function Ke(e,t){return new _((()=>{let r=t;return new O(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new m(e))})())}function ed(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("#")&&u===0){let a=s.slice(1);return Ke(a,o)}else if(s.startsWith("#")){let a=s.slice(1),p=se(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,d.host,d.port,d.path,new m(p),d.fragment)})();return Ke(a,f)}else{if(s==="")return new _((()=>{let a=o;return new O(a.scheme,a.userinfo,a.host,a.port,a.path,new m(i),a.fragment)})());{let p=Dt(s)[1];e=i,t=p,r=o,n=u+1}}}}function wt(e,t){return ed(e,e,t,0)}function td(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("?")){let a=s.slice(1),p=se(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,d.host,d.port,p,d.query,d.fragment)})();return wt(a,f)}else if(s.startsWith("#")){let a=s.slice(1),p=se(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,d.host,d.port,p,d.query,d.fragment)})();return Ke(a,f)}else{if(s==="")return new _((()=>{let a=o;return new O(a.scheme,a.userinfo,a.host,a.port,i,a.query,a.fragment)})());{let p=Dt(s)[1];e=i,t=p,r=o,n=u+1}}}}function Sr(e,t){return td(e,e,t,0)}function Ze(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let o=n.slice(1),u=(()=>{let a=i;return new O(a.scheme,a.userinfo,a.host,new m(s),a.path,a.query,a.fragment)})();return wt(o,u)}else if(n.startsWith("#")){let o=n.slice(1),u=(()=>{let a=i;return new O(a.scheme,a.userinfo,a.host,new m(s),a.path,a.query,a.fragment)})();return Ke(o,u)}else if(n.startsWith("/")){let o=(()=>{let u=i;return new O(u.scheme,u.userinfo,u.host,new m(s),u.path,u.query,u.fragment)})();return Sr(n,o)}else return n===""?new _((()=>{let o=i;return new O(o.scheme,o.userinfo,o.host,new m(s),o.path,o.query,o.fragment)})()):new h(void 0)}}function di(e,t){if(e.startsWith(":0")){let r=e.slice(2);return Ze(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return Ze(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return Ze(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return Ze(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return Ze(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return Ze(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return Ze(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return Ze(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return Ze(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return Ze(r,t,9)}else{if(e.startsWith(":"))return new h(void 0);if(e.startsWith("?")){let r=e.slice(1);return wt(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return Ke(r,t)}else return e.startsWith("/")?Sr(e,t):e===""?new _(t):new h(void 0)}}function na(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s==="")return new _((()=>{let a=o;return new O(a.scheme,a.userinfo,new m(i),a.port,a.path,a.query,a.fragment)})());if(s.startsWith(":")){let a=se(i,0,u),p=(()=>{let f=o;return new O(f.scheme,f.userinfo,new m(a),f.port,f.path,f.query,f.fragment)})();return di(s,p)}else if(s.startsWith("/")){let a=se(i,0,u),p=(()=>{let f=o;return new O(f.scheme,f.userinfo,new m(a),f.port,f.path,f.query,f.fragment)})();return Sr(s,p)}else if(s.startsWith("?")){let a=s.slice(1),p=se(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,new m(p),d.port,d.path,d.query,d.fragment)})();return wt(a,f)}else if(s.startsWith("#")){let a=s.slice(1),p=se(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,new m(p),d.port,d.path,d.query,d.fragment)})();return Ke(a,f)}else{let p=Dt(s)[1];e=i,t=p,r=o,n=u+1}}}function rd(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s==="")return new _((()=>{let a=o;return new O(a.scheme,a.userinfo,new m(s),a.port,a.path,a.query,a.fragment)})());if(s.startsWith("]")&&u===0){let a=s.slice(1);return di(a,o)}else if(s.startsWith("]")){let a=s.slice(1),p=se(i,0,u+1),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,new m(p),d.port,d.path,d.query,d.fragment)})();return di(a,f)}else{if(s.startsWith("/")&&u===0)return Sr(s,o);if(s.startsWith("/")){let a=se(i,0,u),p=(()=>{let f=o;return new O(f.scheme,f.userinfo,new m(a),f.port,f.path,f.query,f.fragment)})();return Sr(s,p)}else if(s.startsWith("?")&&u===0){let a=s.slice(1);return wt(a,o)}else if(s.startsWith("?")){let a=s.slice(1),p=se(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,new m(p),d.port,d.path,d.query,d.fragment)})();return wt(a,f)}else if(s.startsWith("#")&&u===0){let a=s.slice(1);return Ke(a,o)}else if(s.startsWith("#")){let a=s.slice(1),p=se(i,0,u),f=(()=>{let d=o;return new O(d.scheme,d.userinfo,new m(p),d.port,d.path,d.query,d.fragment)})();return Ke(a,f)}else{let a=Dt(s),p=a[0],f=a[1];if(Qf(p))e=i,t=f,r=o,n=u+1;else return na(i,i,o,0)}}}}function nd(e,t){return rd(e,e,t,0)}function id(e,t){return na(e,e,t,0)}function Or(e,t){if(e.startsWith("["))return nd(e,t);if(e.startsWith(":")){let r=(()=>{let n=t;return new O(n.scheme,n.userinfo,new m(""),n.port,n.path,n.query,n.fragment)})();return di(e,r)}else return e===""?new _((()=>{let r=t;return new O(r.scheme,r.userinfo,new m(""),r.port,r.path,r.query,r.fragment)})()):id(e,t)}function sd(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("@")&&u===0){let a=s.slice(1);return Or(a,o)}else if(s.startsWith("@")){let a=s.slice(1),p=se(i,0,u),f=(()=>{let d=o;return new O(d.scheme,new m(p),d.host,d.port,d.path,d.query,d.fragment)})();return Or(a,f)}else{if(s==="")return Or(i,o);if(s.startsWith("/"))return Or(i,o);if(s.startsWith("?"))return Or(i,o);if(s.startsWith("#"))return Or(i,o);{let p=Dt(s)[1];e=i,t=p,r=o,n=u+1}}}}function od(e,t){return sd(e,e,t,0)}function Bo(e,t){if(e==="//")return new _((()=>{let r=t;return new O(r.scheme,r.userinfo,new m(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return od(r,t)}else return Sr(e,t)}function ud(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("/")&&u===0)return Bo(s,o);if(s.startsWith("/")){let a=se(i,0,u),p=(()=>{let f=o;return new O(new m(ae(a)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment)})();return Bo(s,p)}else if(s.startsWith("?")&&u===0){let a=s.slice(1);return wt(a,o)}else if(s.startsWith("?")){let a=s.slice(1),p=se(i,0,u),f=(()=>{let d=o;return new O(new m(ae(p)),d.userinfo,d.host,d.port,d.path,d.query,d.fragment)})();return wt(a,f)}else if(s.startsWith("#")&&u===0){let a=s.slice(1);return Ke(a,o)}else if(s.startsWith("#")){let a=s.slice(1),p=se(i,0,u),f=(()=>{let d=o;return new O(new m(ae(p)),d.userinfo,d.host,d.port,d.path,d.query,d.fragment)})();return Ke(a,f)}else{if(s.startsWith(":")&&u===0)return new h(void 0);if(s.startsWith(":")){let a=s.slice(1),p=se(i,0,u),f=(()=>{let d=o;return new O(new m(ae(p)),d.userinfo,d.host,d.port,d.path,d.query,d.fragment)})();return Bo(a,f)}else{if(s==="")return new _((()=>{let a=o;return new O(a.scheme,a.userinfo,a.host,a.port,i,a.query,a.fragment)})());{let p=Dt(s)[1];e=i,t=p,r=o,n=u+1}}}}}function ld(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return E(n);{let i=r.head,s=r.tail,o=i===""||i==="."?n:i===".."&&n.hasLength(0)?l([]):i===".."&&n.atLeastLength(1)?n.tail:$(i,n);e=s,t=o}}}function ad(e){return ld(e,l([]))}function Wo(e){return ad(oe(e,"/"))}function Do(e){let t=(()=>{let u=e.fragment;if(u instanceof m){let a=u[0];return l(["#",a])}else return l([])})(),r=(()=>{let u=e.query;if(u instanceof m){let a=u[0];return $("?",$(a,t))}else return t})(),n=$(e.path,r),i=(()=>{let u=e.host,a=Ft(e.path,"/");if(u instanceof m&&!a&&u[0]!==""){let p=u[0];return $("/",n)}else return n})(),s=(()=>{let u=e.host,a=e.port;if(u instanceof m&&a instanceof m){let p=a[0];return $(":",$(y(p),i))}else return i})(),o=(()=>{let u=e.scheme,a=e.userinfo,p=e.host;if(u instanceof m&&a instanceof m&&p instanceof m){let f=u[0],d=a[0],v=p[0];return $(f,$("://",$(d,$("@",$(v,s)))))}else if(u instanceof m&&a instanceof w&&p instanceof m){let f=u[0],d=p[0];return $(f,$("://",$(d,s)))}else if(u instanceof m&&a instanceof m&&p instanceof w){let f=u[0];return $(f,$(":",s))}else if(u instanceof m&&a instanceof w&&p instanceof w){let f=u[0];return $(f,$(":",s))}else if(u instanceof w&&a instanceof w&&p instanceof m){let f=p[0];return $("//",$(f,s))}else return s})();return ai(o)}var cd=new O(new w,new w,new w,new w,"",new w,new w);function _i(e){return ud(e,e,cd,0)}function Ve(e,t,r){return e?t:r()}var $n=class extends c{constructor(t){super(),this.all=t}};function ia(e){return new $n(l([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function Fe(e){return ia((t,r,n,i)=>e(t))}function D(){return new $n(l([]))}function mi(e){return new $n(le(e,l([]),(t,r)=>{let n=r.all;return _t(t,n)}))}var yt=class extends c{constructor(t){super(),this.content=t}},U=class extends c{constructor(t,r,n,i,s,o,u){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=u}},Xe=class extends c{constructor(t){super(),this.subtree=t}},bt=class extends c{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},Lr=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function $d(e){if(e instanceof bt)return new h(void 0);{let t=e[0],r=e[1],n=$t(t,2);return new _([n,r])}}function hd(e,t,r){return wr(e,t,(n,i,s)=>{let o=r+"-"+y(s);return sa(i,n,o)})}function sa(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof yt)return i;if(n instanceof Xe){let o=n.subtree;e=o(),t=i,r=s}else{let o=n.attrs,u=n.children,a=le(o,i,(p,f)=>{let d=$d(f);if(d.isOk()){let v=d[0][0],T=d[0][1];return G(p,s+"-"+v,T)}else return p});return hd(u,a,s)}}}function oa(e){return sa(e,Z(),"0")}function x(e,t){return new bt(e,t,!1)}function la(e,t){return new Lr("on"+e,t)}function aa(e,t){if(e instanceof bt){let r=e[0],n=e[1],i=e.as_property;return new bt(r,n,i)}else{let r=e[0],n=e[1];return new Lr(r,i=>J(n(i),t))}}function ca(e){return x("style",le(e,"",(t,r)=>{let n=r[0],i=r[1];return t+n+":"+i+";"}))}function g(e){return x("class",e)}function vt(e,t){return x("data-"+e,t)}function N(e){return x("id",e)}function pa(e){return x("value",e)}function Po(e){return x("placeholder",e)}function Ar(e){return x("href",e)}function Jo(e){return x("rel",e)}function we(e,t,r){return e==="area"?new U("","",e,t,l([]),!1,!0):e==="base"?new U("","",e,t,l([]),!1,!0):e==="br"?new U("","",e,t,l([]),!1,!0):e==="col"?new U("","",e,t,l([]),!1,!0):e==="embed"?new U("","",e,t,l([]),!1,!0):e==="hr"?new U("","",e,t,l([]),!1,!0):e==="img"?new U("","",e,t,l([]),!1,!0):e==="input"?new U("","",e,t,l([]),!1,!0):e==="link"?new U("","",e,t,l([]),!1,!0):e==="meta"?new U("","",e,t,l([]),!1,!0):e==="param"?new U("","",e,t,l([]),!1,!0):e==="source"?new U("","",e,t,l([]),!1,!0):e==="track"?new U("","",e,t,l([]),!1,!0):e==="wbr"?new U("","",e,t,l([]),!1,!0):new U("","",e,t,r,!1,!1)}function fa(e,t){if(e instanceof U){let r=e.namespace,n=e.tag,i=e.attrs,s=e.children,o=e.self_closing,u=e.void;return new U(t,r,n,i,s,o,u)}else if(e instanceof Xe){let r=e.subtree;return new Xe(()=>fa(r(),t))}else return e}function da(e,t){return e(A(t,r=>{let n=r[0],i=r[1];return fa(i,n)}))}function Er(e,t,r,n){return new U("",e,t,r,n,!1,!1)}function Tr(e){return new yt(e)}function ee(e){return we("lustre-fragment",l([ca(l([["display","contents"]]))]),e)}function jr(e,t){if(e instanceof yt){let r=e.content;return new yt(r)}else if(e instanceof Xe){let r=e.subtree;return new Xe(()=>jr(r(),t))}else{let r=e.key,n=e.namespace,i=e.tag,s=e.attrs,o=e.children,u=e.self_closing,a=e.void;return new Xe(()=>new U(r,n,i,A(s,p=>aa(p,t)),A(o,p=>jr(p,t)),u,a))}}var hn=class extends c{constructor(t){super(),this.dict=t}};function $i(){return new hn(Z())}function Ho(e,t){let r=e.dict,n=P(r,t);return wl(n)}function _a(e,t){return new hn(Us(e.dict,t))}var xd=void 0;function Ro(e,t){return new hn(G(e.dict,t,xd))}var hi=class extends c{constructor(t){super(),this[0]=t}},xi=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},wi=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function ha(e){return k(e.created,Z())&&k(e.removed,$i())&&k(e.updated,Z())}var xn=class extends c{constructor(t){super(),this[0]=t}},yi=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},wn=class extends c{constructor(t){super(),this[0]=t}},Qe=class extends c{constructor(t){super(),this[0]=t}},gn=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},yn=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};var bn=class extends c{},vn=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},kn=class extends c{constructor(t){super(),this[0]=t}},bi=class extends c{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Yo(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:u}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let a=document.createTextNode(o.content);u.replaceChild(a,s),n??=a}else{let a=document.createTextNode(o.content);u.appendChild(a),n??=a}else if(o.tag!==void 0){let a=gd({prev:s,next:o,dispatch:r,stack:i});s?s!==a&&u.replaceChild(a,s):u.appendChild(a),n??=a}}return n}function gd({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),u;if(On.has(o))u=On.get(o);else{let B=new Map;On.set(o,B),u=B}let a=s?new Set(u.keys()):null,p=s?new Set(Array.from(e.attributes,B=>B.name)):null,f=null,d=null,v=null;if(s&&t.tag==="textarea"){let B=t.children[Symbol.iterator]().next().value?.content;B!==void 0&&(o.value=B)}let T=[];for(let B of t.attrs){let W=B[0],te=B[1];if(B.as_property)o[W]!==te&&(o[W]=te),s&&p.delete(W);else if(W.startsWith("on")){let Ae=W.slice(2),Hs=r(te,Ae==="input");u.has(Ae)||o.addEventListener(Ae,Sn),u.set(Ae,Hs),s&&a.delete(Ae)}else if(W.startsWith("data-lustre-on-")){let Ae=W.slice(15),Hs=r(yd);u.has(Ae)||o.addEventListener(Ae,Sn),u.set(Ae,Hs),o.setAttribute(W,te),s&&(a.delete(Ae),p.delete(W))}else W.startsWith("delegate:data-")||W.startsWith("delegate:aria-")?(o.setAttribute(W,te),T.push([W.slice(10),te])):W==="class"?f=f===null?te:f+" "+te:W==="style"?d=d===null?te:d+te:W==="dangerous-unescaped-html"?v=te:(o.getAttribute(W)!==te&&o.setAttribute(W,te),(W==="value"||W==="selected")&&(o[W]=te),s&&p.delete(W))}if(f!==null&&(o.setAttribute("class",f),s&&p.delete("class")),d!==null&&(o.setAttribute("style",d),s&&p.delete("style")),s){for(let B of p)o.removeAttribute(B);for(let B of a)u.delete(B),o.removeEventListener(B,Sn)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let B of o.assignedElements())for(let[W,te]of T)B.hasAttribute(W)||B.setAttribute(W,te)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(v!==null)return o.innerHTML=v,o;let I=o.firstChild,Vr=null,Tt=null,ft=null,qt=vi(t).next().value;if(s&&qt!==void 0&&qt.key!==void 0&&qt.key!==""){Vr=new Set,Tt=wa(e),ft=wa(t);for(let B of vi(t))I=bd(I,B,o,n,ft,Tt,Vr)}else for(let B of vi(t))n.unshift({prev:I,next:B,parent:o}),I=I?.nextSibling;for(;I;){let B=I.nextSibling;o.removeChild(I),I=B}return o}var On=new WeakMap;function Sn(e){let t=e.currentTarget;if(!On.has(t)){t.removeEventListener(e.type,Sn);return}let r=On.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,Sn);return}r.get(e.type)(e)}function yd(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let u=o.split(".");for(let a=0,p=s,f=e;a<u.length;a++)a===u.length-1?p[u[a]]=f[u[a]]:(p[u[a]]??={},f=f[u[a]],p=p[u[a]]);return s},{data:n})}}function wa(e){let t=new Map;if(e)for(let r of vi(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function bd(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let a=e.nextSibling;r.removeChild(e),e=a}if(s.size===0)return n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let u=s.get(t.key);if(!u&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!u&&e!==null){let a=document.createTextNode("");return r.insertBefore(a,e),n.unshift({prev:a,next:t,parent:r}),e}return!u||u===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e)}function*vi(e){for(let t of e.children)yield*ga(t)}function*ga(e){e.subtree!==void 0?yield*ga(e.subtree()):yield e}var Uo=class e{static start({init:t,update:r,view:n},i,s){if(!Ln())return new h(new An);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new h(new ki(i));let u=new e(o,t(s),r,n);return new _(a=>u.send(a))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.setTimeout(()=>this.#n(n.all.toArray(),!0),0)}root;send(t){if(t instanceof wn){if(t[0]instanceof bi){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>u=>{let a=s(u);a instanceof _&&this.send(new Qe(a[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Yo(i,r,n)}}else if(t instanceof Qe){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.clearTimeout(this.#t),this.#n()):this.#t||(this.#t=window.setTimeout(()=>this.#n()))}else if(t instanceof gn){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof bn)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[]){this.#t=void 0,this.#o(t);let r=this.#r(this.#e),n=(s,o=!1)=>u=>{let a=s(u);a instanceof _&&this.send(new Qe(a[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Yo(i,r,n)}#o(t=[]){for(;this.#i.length>0;){let r=this.#i.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;){let r=t.shift(),n=u=>this.send(new Qe(u)),i=(u,a)=>this.root.dispatchEvent(new CustomEvent(u,{detail:a,bubbles:!0,composed:!0})),s=()=>{},o=this.root;r({dispatch:n,emit:i,select:s,root:o})}this.#i.length>0&&this.#o(t)}},ya=Uo.start;var Go=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new _(u=>o.send(u))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#l=s,this.#n=new Map,this.#o=oa(this.#t),this.#u(r.all.toArray())}send(t){if(t instanceof xn){for(let r of t[0]){let n=this.#l.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof h||this.#r.push(i)}this.#u()}else if(t instanceof yi)this.#r=this.#r.concat(t[0].toArray()),this.#u(t[1].all.toArray());else if(!(t instanceof wn))if(t instanceof Qe)this.#r.push(t[0]),this.#u();else if(t instanceof gn){let r=new xi(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof yn){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof h)return;this.#r.push(n[0]),this.#u()}else if(t instanceof vn){let r=Ys(this.#l),n=new wi(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof kn&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#l;#u(t=[]){this.#a(t);let r=this.#i(this.#e),n=elements(this.#t,r);if(!ha(n)){let i=new hi(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#a(t=[]){for(;this.#r.length>0;){let r=this.#r.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;)t.shift()({dispatch:u=>this.send(new Qe(u)),emit:(u,a)=>this.root.dispatchEvent(new CustomEvent(u,{detail:a,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#a(t)}},vd=Go.start,Ln=()=>globalThis.window&&window.document;var Zo=class extends c{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var ki=class extends c{constructor(t){super(),this.selector=t}},An=class extends c{};function ba(e,t,r){return new Zo(e,t,r,new w)}function va(e,t,r){return Ve(!Ln(),new h(new An),()=>ya(e,t,r))}function q(e){return Tr(e)}function Oa(e,t){return we("h3",e,t)}function S(e,t){return we("div",e,t)}function Ko(e){return we("hr",e,l([]))}function fe(e,t){return we("p",e,t)}function qr(e,t){return we("a",e,t)}function X(e,t){return we("span",e,t)}function et(e,t){return we("button",e,t)}function Sa(e){return we("input",e,l([]))}function La(e,t){return we("textarea",e,l([Tr(t)]))}function Le(e,t){return la(e,t)}function de(e){return Le("click",t=>new _(e))}function jn(e){return Le("mouseenter",t=>new _(e))}function En(e){return Le("mouseleave",t=>new _(e))}function kt(e){return Le("focus",t=>new _(e))}function Ot(e){return Le("blur",t=>new _(e))}function Sd(e){let t=e;return uo("target",uo("value",oo))(t)}function Vo(e){return Le("input",t=>{let r=Sd(t);return J(r,e)})}function Xo(e){return we("lustre-server-component",e,l([]))}function Qo(e){return x("route",e)}var zr=class extends c{},Mr=class extends c{},Li=class extends c{},Ai=class extends c{},ji=class extends c{},Ei=class extends c{},Ti=class extends c{},qi=class extends c{},zi=class extends c{};var Mi=class extends c{},Tn=class extends c{};function Aa(e){return e instanceof Ti?"connect":e instanceof ji?"delete":e instanceof zr?"get":e instanceof Li?"head":e instanceof qi?"options":e instanceof zi?"patch":e instanceof Mr?"post":e instanceof Ai?"put":e instanceof Ei?"trace":e[0]}function ja(e){return e instanceof Mi?"http":"https"}function Ea(e){let t=ae(e);return t==="http"?new _(new Mi):t==="https"?new _(new Tn):new h(void 0)}var Cr=class extends c{constructor(t,r,n,i,s,o,u,a){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=u,this.query=a}};function qa(e){return new O(new m(ja(e.scheme)),new w,new m(e.host),e.port,e.path,e.query,new w)}function tu(e){return je((()=>{let t=e.scheme,r=Ct(t,"");return Ea(r)})(),t=>je((()=>{let r=e.host;return en(r,void 0)})(),r=>{let n=new Cr(new zr,l([]),"",t,r,e.port,e.path,e.query);return new _(n)}))}function za(e,t,r){let n=to(e.headers,ae(t),r),i=e;return new Cr(i.method,n,i.body,i.scheme,i.host,i.port,i.path,i.query)}function Ma(e,t){let r=e.method,n=e.headers,i=e.scheme,s=e.host,o=e.port,u=e.path,a=e.query;return new Cr(r,n,t,i,s,o,u,a)}function Ca(e,t){let r=e;return new Cr(t,r.headers,r.body,r.scheme,r.host,r.port,r.path,r.query)}function Na(e){let r=_i(e);return je(r,tu)}var at=class extends c{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};var Nr=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function Ci(e){return Promise.resolve(Nr.wrap(e))}function Ia(e,t){return e.then(r=>t(Nr.unwrap(r)))}function Ni(e,t){return e.then(r=>Nr.wrap(t(Nr.unwrap(r))))}function ru(e,t){return e.catch(r=>t(r))}function Ba(e,t){return Ni(e,n=>(t(n),n))}function Ii(e,t){return Ia(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return Ci(new h(i))}})}async function Da(e){try{return new _(await fetch(e))}catch(t){return new h(new Bi(t.toString()))}}function Fa(e){return new at(e.status,F.fromArray([...e.headers]),e)}function Pa(e){let t=Do(qa(e)),r=Aa(e.method).toUpperCase(),n={headers:Md(e.headers),method:r};return r!=="GET"&&r!=="HEAD"&&(n.body=e.body),new globalThis.Request(t,n)}function Md(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function nu(e){let t;try{t=await e.body.text()}catch{return new h(new Wi)}return new _(e.withFields({body:t}))}var Bi=class extends c{constructor(t){super(),this[0]=t}},Wi=class extends c{};function Ja(e){let r=Pa(e),n=Da(r);return Ii(n,i=>Ci(new _(Fa(i))))}function Ha(){return window.location.href||""}var Di=class extends c{constructor(t){super(),this[0]=t}},iu=class extends c{constructor(t){super(),this[0]=t}},su=class extends c{constructor(t){super(),this[0]=t}},Fi=class extends c{},ou=class extends c{},uu=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},lu=class extends c{},au=class extends c{constructor(t){super(),this.run=t}};function Ra(e){return It(Na(e),t=>M((()=>{let r=Ha();return _i(r)})(),r=>{let n=(()=>{let s=r;return new O(s.scheme,s.userinfo,s.host,s.port,s.path,new w,new w)})(),i=(()=>{if(e.startsWith("/")){let s=n;return new O(s.scheme,s.userinfo,s.host,s.port,e,s.query,s.fragment)}else{let s=n;return new O(s.scheme,s.userinfo,s.host,s.port,n.path+"/"+e,s.query,s.fragment)}})();return tu(i)}))}function Ya(e,t,r){let n=Ja(e),i=Ii(n,nu),s=Ni(i,u=>{if(u.isOk()){let a=u[0];return t.run(new _(a))}else return t.run(new h(new Fi))}),o=ru(s,u=>t.run(new h(new Fi)));Ba(o,r)}function Pi(e,t){return Fe(r=>{let n=Ra(e);if(n.isOk()){let i=n[0];return Ya(i,t,r)}else return r(t.run(new h(new Di(e))))})}function Ua(e,t,r){return Fe(n=>{let i=Ra(e);if(i.isOk()){let o=i[0],u=Ca(o,new Mr),a=za(u,"Content-Type","application/json"),p=Ma(a,Io(t));return Ya(p,r,n)}else return n(r.run(new h(new Di(e))))})}function Nd(e){if(e instanceof at&&200<=e.status&&e.status<=299){let t=e.status,r=e.body;return new _(r)}else{if(e instanceof at&&e.status===401)return new h(new lu);if(e instanceof at&&e.status===404)return new h(new ou);if(e instanceof at&&e.status===500){let t=e.body;return new h(new iu(t))}else{let t=e.status,r=e.body;return new h(new uu(t,r))}}}function qn(e,t){return new au(r=>{let i=je(r,Nd),s=je(i,o=>{let u=No(o,e);if(u.isOk()){let a=u[0];return new _(a)}else{let a=u[0];return new h(new su(a))}});return t(s)})}var Bd={handle_external_links:!1,handle_internal_links:!0},Ga=window?.location?.href,pu=()=>Ga?new _(cu(new URL(Ga))):new h(void 0),fu=(e,t=Bd)=>{document.addEventListener("click",r=>{let n=Za(r.target);if(n)try{let i=new URL(n.href),s=cu(i),o=i.host!==window.location.host;return!t.handle_external_links&&o||!t.handle_internal_links&&!o?void 0:(r.preventDefault(),o||(window.history.pushState({},"",n.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",r=>{r.preventDefault();let n=new URL(window.location.href),i=cu(n);window.requestAnimationFrame(()=>{n.hash&&document.getElementById(n.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:r})=>{e(r)}),window.addEventListener("modem-replace",({detail:r})=>{e(r)})};var Za=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:Za(e.parentElement),cu=e=>new O(e.protocol?new m(e.protocol.slice(0,-1)):new w,new w,e.hostname?new m(e.hostname):new w,e.port?new m(Number(e.port)):new w,e.pathname,e.search?new m(e.search.slice(1)):new w,e.hash?new m(e.hash.slice(1)):new w);function Ka(e){return Fe(t=>Ve(!Ln(),void 0,()=>fu(r=>{let i=e(r);return t(i)})))}var du=class extends c{constructor(t,r,n){super(),this.audit_name=t,this.audit_formatted_name=r,this.in_scope_files=n}};function Va(){return b("audit_name",L,e=>b("audit_formatted_name",L,t=>b("in_scope_files",ut(L),r=>Y(new du(e,t,r)))))}var mu=class extends c{constructor(t,r,n){super(),this.date=t,this.time=r,this.offset=n}};var $u=class extends c{constructor(t){super(),this.minutes=t}},hu=class extends c{constructor(t){super(),this.unix_days=t}};var xu=class extends c{constructor(t){super(),this.microseconds=t}};function cc(e,t,r){return new mu(e,t,r)}function pc(e){return new hu($e(e,86400))}function fc(e){return e.unix_days*86400}function dc(e){return new xu(e)}var Ui=new $u(0);function vu(e){return pc(e)}function ku(e){return fc(e)}function Gi(e){return vu($e(e,1e3))}function Ou(e){return ku(e)*1e3}function gc(e){let t=(e-Ou(Gi(e)))*1e3;return dc(t)}function I_(e,t,r){return cc(e,t,r)}function yc(e){return I_(Gi(e),gc(e),Ui)}var Ki=class extends c{constructor(t,r,n,i,s,o){super(),this.parent_id=t,this.significance=r,this.user_id=n,this.message=i,this.expanded_message=s,this.modifier=o}};var Ut=class extends c{},Gt=class extends c{},Zt=class extends c{},Br=class extends c{},Kt=class extends c{},Wr=class extends c{},Dr=class extends c{},Fr=class extends c{},Pr=class extends c{},Jr=class extends c{},Hr=class extends c{},zn=class extends c{},Mn=class extends c{},Rr=class extends c{};function W_(e){return e instanceof Ut?1:e instanceof Gt?2:e instanceof Zt?3:e instanceof Br?4:e instanceof Kt?5:e instanceof Wr?6:e instanceof Dr?7:e instanceof Fr?8:e instanceof Pr?9:e instanceof Jr?10:e instanceof Hr?11:12}function D_(e){return e instanceof Mn?0:e instanceof Rr?1:2}function bc(e){return xt(l([["p",Se(e.parent_id)],["s",Jt((()=>{let t=e.significance;return W_(t)})())],["u",Se(e.user_id)],["m",Se(e.message)],["x",ra(e.expanded_message,Se)],["d",Jt((()=>{let t=e.modifier;return D_(t)})())]]))}var Au=class extends c{constructor(t,r,n,i,s,o,u,a){super(),this.note_id=t,this.parent_id=r,this.significance=n,this.user_name=i,this.message=s,this.expanded_message=o,this.time=u,this.edited=a}},Vt=class extends c{},Xt=class extends c{},Qt=class extends c{},er=class extends c{},tr=class extends c{},rr=class extends c{},nr=class extends c{},Cn=class extends c{},ir=class extends c{},sr=class extends c{},or=class extends c{},ur=class extends c{},lr=class extends c{},ar=class extends c{},Pe=class extends c{},cr=class extends c{},pr=class extends c{},Nn=class extends c{};function F_(e){if(e===0)return new Vt;if(e===1)return new Xt;if(e===2)return new Qt;if(e===3)return new er;if(e===4)return new tr;if(e===5)return new rr;if(e===6)return new nr;if(e===7)return new Cn;if(e===8)return new ir;if(e===9)return new sr;if(e===10)return new or;if(e===11)return new ur;if(e===12)return new lr;if(e===13)return new ar;if(e===14)return new Pe;if(e===15)return new cr;if(e===16)return new pr;if(e===17)return new Nn;throw ye("panic","o11a/computed_note",128,"significance_from_int","Invalid note significance found",{})}function vc(){return b("n",L,e=>b("p",L,t=>b("s",Oe,r=>b("u",L,n=>b("m",L,i=>b("x",To(L),s=>b("t",Oe,o=>b("e",kr,u=>Y(new Au(e,t,F_(r),n,i,s,yc(o),u))))))))))}function kc(e){return e instanceof Vt?new w:e instanceof Xt?new m("Unanswered Question"):e instanceof Qt?new m("Answered"):e instanceof er?new m("Answer"):e instanceof tr?new m("Incomplete ToDo"):e instanceof rr?new m("Complete"):e instanceof nr?new m("Completion"):e instanceof Cn?new m("Unconfirmed Finding"):e instanceof ir?new m("Confirmed Finding"):e instanceof sr?new m("Rejected Finding"):e instanceof or?new m("Confirmation"):e instanceof ur?new m("Rejection"):e instanceof lr?new m("Unanswered Dev Question"):e instanceof ar?new m("Answered Dev Question"):e instanceof Pe?new m("Info"):e instanceof cr?new m("Incorrect Info"):e instanceof pr?new m("Rejection"):new m("Confirmation")}function Oc(e){return e instanceof Vt?!1:e instanceof Xt||e instanceof Qt?!0:e instanceof er?!1:e instanceof tr||e instanceof rr?!0:e instanceof nr?!1:e instanceof Cn||e instanceof ir||e instanceof sr?!0:e instanceof or||e instanceof ur?!1:e instanceof lr||e instanceof ar||e instanceof Pe||e instanceof cr?!0:(e instanceof pr,!1)}var Sc="sud";var Eu=class extends c{constructor(t,r,n,i,s,o,u,a){super(),this.significance=t,this.line_number=r,this.line_number_text=n,this.line_tag=i,this.line_id=s,this.leading_spaces=o,this.elements=u,this.columns=a}},In=class extends c{constructor(t,r){super(),this.topic_id=t,this.topic_title=r}},Tu=class extends c{},Yr=class extends c{},Bn=class extends c{constructor(t,r,n){super(),this.node_id=t,this.node_declaration=r,this.tokens=n}},Wn=class extends c{constructor(t,r,n){super(),this.referenced_node_id=t,this.referenced_node_declaration=r,this.tokens=n}},Ur=class extends c{constructor(t){super(),this.element=t}},qu=class extends c{constructor(t,r){super(),this.element=t,this.leading_spaces=r}},zu=class extends c{constructor(t,r,n,i){super(),this.title=t,this.topic_id=r,this.kind=n,this.references=i}},Xi=class extends c{},Qi=class extends c{},es=class extends c{},ts=class extends c{},rs=class extends c{},ns=class extends c{},is=class extends c{},ss=class extends c{},os=class extends c{},us=class extends c{},ls=class extends c{},as=class extends c{},cs=class extends c{},ps=class extends c{},Mu=class extends c{constructor(t,r){super(),this.title=t,this.topic_id=r}};function P_(){return b("type",L,e=>e==="single_declaration_line"?b("topic_id",L,t=>b("topic_title",L,r=>Y(new In(t,r)))):e==="non_empty_line"?Y(new Tu):e==="empty_line"?Y(new Yr):mn(new Yr,"PreProcessedLineSignificance"))}function Cu(e){return e instanceof Xi?"contract":e instanceof Qi?"constructor":e instanceof es?"function":e instanceof ts?"fallback":e instanceof rs?"receive":e instanceof ns?"modifier":e instanceof is?"variable":e instanceof ss?"constant":e instanceof os?"enum":e instanceof us?"enum_value":e instanceof ls?"struct":e instanceof as?"error":e instanceof cs?"event":"unknown"}function J_(e){return e==="contract"?new Xi:e==="constructor"?new Qi:e==="function"?new es:e==="fallback"?new ts:e==="receive"?new rs:e==="modifier"?new ns:e==="variable"?new is:e==="constant"?new ss:e==="enum"?new os:e==="enum_value"?new us:e==="struct"?new ls:e==="error"?new as:e==="event"?new cs:e==="unknown"?new ps:new ps}function H_(){return b("title",L,e=>b("topic_id",L,t=>Y(new Mu(e,t))))}function Ac(){return b("title",L,e=>b("topic_id",L,t=>b("kind",L,r=>b("references",ut(H_()),n=>Y(new zu(e,t,J_(r),n))))))}function R_(){return b("type",L,e=>e==="pre_processed_declaration"?b("node_id",Oe,t=>b("node_declaration",Ac(),r=>b("tokens",L,n=>Y(new Bn(t,r,n))))):e==="pre_processed_reference"?b("referenced_node_id",Oe,t=>b("referenced_node_declaration",Ac(),r=>b("tokens",L,n=>Y(new Wn(t,r,n))))):e==="pre_processed_node"?b("element",L,t=>Y(new Ur(t))):e==="pre_processed_gap_node"?b("element",L,t=>b("leading_spaces",Oe,r=>Y(new qu(t,r)))):mn(new Ur(""),"PreProcessedNode"))}function jc(){return b("s",P_(),e=>b("n",Oe,t=>b("i",L,r=>b("l",Oe,n=>b("e",ut(R_()),i=>b("c",Oe,s=>{let o=y(t);return Y(new Eu(e,t,o,"L"+o,r,n,i,s))}))))))}function Dn(e){e.focus()}function fs(e,t){return t in e.dataset?new _(e.dataset[t]):new h(void 0)}function Je(e){return e.preventDefault()}function Nu(e){return e.ctrlKey}function Lt(e){return e.key}function Iu(e){return e.shiftKey}function fr(e){let t=document.querySelector(e);return t?new _(t):new h}function G_(){return globalThis}function Z_(e){window.alert(e)}function K_(e,t){let r=window.prompt(e,t);return r!==null?new _(r):new h}function Du(e,t){return window.addEventListener(e,t)}function V_(e){return e.document}async function X_(){try{return new _(await window.navigator.wakeLock.request("screen"))}catch(e){return new h(e.toString())}}function Q_(){return window.location.href}function em(e){try{return new _(e.location.href)}catch(t){return new h(t.toString())}}function tm(e,t){e.location.href=t}function rm(){return window.location.origin}function nm(){return window.location.pathname}function im(){return window.location.reload()}function sm(e){return e.location.reload()}function om(e){return e.focus()}function um(){let e=window.location.hash;return e==""?new h:new _(decodeURIComponent(e.slice(1)))}function lm(){let e=window.location.search;return e==""?new h:new _(decodeURIComponent(e.slice(1)))}function am(e){return e.innerHeight}function cm(e){return e.innerWidth}function pm(e){return e.outerHeight}function fm(e){return e.outerWidth}function dm(e){return e.screenX}function _m(e){return e.screenY}function mm(e){return e.screenTop}function $m(e){return e.screenLeft}function hm(e){return e.scrollX}function xm(e){return e.scrollY}function wm(e,t,r){try{return new _(window.open(e,t,r))}catch(n){return new h(n.toString())}}function gm(e){e.close()}function ym(e){return e.closed}function bm(e){return window.queueMicrotask(e)}function vm(e){return window.requestAnimationFrame(e)}function km(e){return window.cancelAnimationFrame(e)}function Om(string){try{return new _(eval(string))}catch(e){return new h(e.toString())}}async function Sm(e){try{return new _(await import(e))}catch(t){return new h(t.toString())}}var Fu=class extends c{constructor(t,r){super(),this.issue=t,this.cause=r}};function ct(e){return new Fu(e,l([]))}function ds(e){return new h(ct(e))}function qc(e){let t=$(Pt("error: ",e.issue),e.cause);return ie(t," <- ")}function zc(e){let t=fs(e,"lc"),r=M(t,mt);return Q(r,ct("Failed to read line count data"))}function Mc(e){return vt("cc",y(e))}function Cc(e){let t=fs(e,"cc"),r=M(t,mt);return Q(r,ct("Failed to read column count data"))}var Ju="deh",Fn="de",_s="line-container";function Bc(e){let t=fr("#L"+y(e)+"."+_s);return Q(t,ct("Failed to find non-empty line"))}function Wc(e,t){return fr(".dl"+y(e)+".dc"+y(t))}function Dc(e,t){return fr(".dl"+y(e)+".dc"+y(t)+" input")}var ms=class extends c{constructor(t,r,n,i){super(),this.current_line_number=t,this.current_column_number=r,this.current_line_column_count=n,this.is_user_typing=i}};function Hc(){return new ms(16,1,16,!1)}function Rc(e){let t=Lt(e);return t==="ArrowUp"?Je(e):t==="ArrowDown"?Je(e):t==="ArrowLeft"?Je(e):t==="ArrowRight"?Je(e):t==="PageUp"?Je(e):t==="PageDown"?Je(e):t==="Enter"?Je(e):t==="e"?Je(e):t==="Escape"?Je(e):void 0}function Pc(e,t,r){let n=Nu(e),i=Lt(e);return n&&i==="e"?new _([t,D()]):r()}function Tm(e,t,r){return new _([t,D()])}function qm(e,t,r){return new _([t,D()])}function Yc(e,t){return M((()=>{let r=fr("#audit-page"),n=Q(r,ct("Failed to find audit page"));return M(n,zc)})(),r=>{if(t>0&&e===r)return ds("Line is "+y(r)+", cannot go further down");if(t<0&&e===1)return ds("Line is 1, cannot go further up");if(t===0)return ds("Step is zero");{let n=Ao(1,li(r,e+t)),i=Bc(n);if(i.isOk()){let s=i[0];return J(Cc(s),o=>[n,o])}else return Yc(n,t>0&&n===r?-1:t>0||t<0&&n===1?1:t<0?-1:0)}})}function Hu(e,t){return Fe(r=>{let n=(()=>{let i=Wc(e,t),s=Q(i,ct("Failed to find line discussion to focus"));return J(s,Dn)})()})}function zm(e,t,r){if(Lt(e)==="Escape"){let i=[t,Hu(t.current_line_number,t.current_column_number)];return new _(i)}else return r()}function Gr(e,t){return J(Yc(e.current_line_number,t),r=>{let n=r[0],i=r[1];return[(()=>{let s=e;return new ms(s.current_line_number,s.current_column_number,i,s.is_user_typing)})(),Hu(n,li(i,e.current_column_number))]})}function Jc(e,t){let r=(()=>{let i=Ao(1,e.current_column_number+t);return li(i,e.current_line_column_count)})(),n=[e,Hu(e.current_line_number,r)];return new _(n)}function Mm(e,t,r){let n=Iu(e),i=Lt(e);return!n&&i==="ArrowUp"?Gr(t,-1):!n&&i==="ArrowDown"?Gr(t,1):n&&i==="ArrowUp"?Gr(t,-5):n&&i==="ArrowDown"?Gr(t,5):i==="PageUp"?Gr(t,-20):i==="PageDown"?Gr(t,20):i==="ArrowLeft"?Jc(t,-1):i==="ArrowRight"?Jc(t,1):r()}function Uc(e,t){let r=t.is_user_typing?Pc(e,t,()=>zm(e,t,()=>new _([t,D()]))):Mm(e,t,()=>qm(e,t,()=>Pc(e,t,()=>Tm(e,t,()=>new _([t,D()])))));if(r.isOk())return r[0];{let n=r[0];return ot(qc(n)),[t,D()]}}function $s(e){for(;;){let t=e;if(t===1)return"a";if(t===2)return"b";if(t===3)return"c";if(t===4)return"d";if(t===5)return"e";if(t===6)return"f";if(t===7)return"g";if(t===8)return"h";if(t===9)return"i";if(t===10)return"j";if(t===11)return"k";if(t===12)return"l";if(t===13)return"m";if(t===14)return"n";if(t===15)return"o";if(t===16)return"p";if(t===17)return"q";if(t===18)return"r";if(t===19)return"s";if(t===20)return"t";if(t===21)return"u";if(t===22)return"v";if(t===23)return"w";if(t===24)return"x";if(t===25)return"y";if(t===26)return"z";{let r=$e(t-1,26),n=Ie(t-1,26);if(r===0)e=n+1;else return $s(r)+$s(n+1)}}}function Pn(e,t){return g("dl"+e+" dc"+t)}function Ru(e){return vt("i",e)}function Yu(e){return vt("t",e)}function Uu(e){return vt("r",e?"1":"0")}function Gc(e,t,r){return e?t():r()}var hs="http://www.w3.org/2000/svg";function Gu(e){return Er(hs,"line",e,l([]))}function Zu(e){return Er(hs,"polyline",e,l([]))}function dr(e,t){return Er(hs,"svg",e,t)}function re(e){return Er(hs,"path",e,l([]))}function Ku(e){return dr($(x("stroke-linejoin","round"),$(x("stroke-linecap","round"),$(x("stroke-width","2"),$(x("stroke","currentColor"),$(x("fill","none"),$(x("viewBox","0 0 24 24"),$(x("height","24"),$(x("width","24"),e)))))))),l([re(l([x("d","M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z")])),re(l([x("d","M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1")]))]))}function Zc(e){return dr($(x("stroke-linejoin","round"),$(x("stroke-linecap","round"),$(x("stroke-width","2"),$(x("stroke","currentColor"),$(x("fill","none"),$(x("viewBox","0 0 24 24"),$(x("height","24"),$(x("width","24"),e)))))))),l([re(l([x("d","M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13")])),re(l([x("d","m8 6 2-2")])),re(l([x("d","m18 16 2-2")])),re(l([x("d","m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17")])),re(l([x("d","M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z")])),re(l([x("d","m15 5 4 4")]))]))}function Kc(e){return dr($(x("stroke-linejoin","round"),$(x("stroke-linecap","round"),$(x("stroke-width","2"),$(x("stroke","currentColor"),$(x("fill","none"),$(x("viewBox","0 0 24 24"),$(x("height","24"),$(x("width","24"),e)))))))),l([re(l([x("d","m3 10 2.5-2.5L3 5")])),re(l([x("d","m3 19 2.5-2.5L3 14")])),re(l([x("d","M10 6h11")])),re(l([x("d","M10 12h11")])),re(l([x("d","M10 18h11")]))]))}function Vc(e){return dr($(x("stroke-linejoin","round"),$(x("stroke-linecap","round"),$(x("stroke-width","2"),$(x("stroke","currentColor"),$(x("fill","none"),$(x("viewBox","0 0 24 24"),$(x("height","24"),$(x("width","24"),e)))))))),l([Zu(l([x("points","15 3 21 3 21 9")])),Zu(l([x("points","9 21 3 21 3 15")])),Gu(l([x("y2","10"),x("y1","3"),x("x2","14"),x("x1","21")])),Gu(l([x("y2","14"),x("y1","21"),x("x2","10"),x("x1","3")]))]))}function xs(e){return dr($(x("stroke-linejoin","round"),$(x("stroke-linecap","round"),$(x("stroke-width","2"),$(x("stroke","currentColor"),$(x("fill","none"),$(x("viewBox","0 0 24 24"),$(x("height","24"),$(x("width","24"),e)))))))),l([re(l([x("d","M18 6 6 18")])),re(l([x("d","m6 6 12 12")]))]))}function Xc(e){return dr($(x("stroke-linejoin","round"),$(x("stroke-linecap","round"),$(x("stroke-width","2"),$(x("stroke","currentColor"),$(x("fill","none"),$(x("viewBox","0 0 24 24"),$(x("height","24"),$(x("width","24"),e)))))))),l([re(l([x("d","M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z")])),re(l([x("d","m15 5 4 4")]))]))}function Qc(e){return Le("keydown",t=>{let r=b("ctrlKey",kr,i=>b("key",L,s=>Y([i,s]))),n=l([new V("","",l([]))]);return M((()=>{let i=ke(t,r);return Q(i,n)})(),i=>{let s=i[0],o=i[1];return s&&o==="Enter"?new _(e):new h(n)})})}var _e=class extends c{constructor(t,r,n,i,s,o,u,a,p,f,d,v,T,I){super(),this.is_reference=t,this.show_reference_discussion=r,this.user_name=n,this.line_number=i,this.column_number=s,this.topic_id=o,this.topic_title=u,this.current_note_draft=a,this.current_thread_id=p,this.active_thread=f,this.show_expanded_message_box=d,this.current_expanded_message_draft=v,this.expanded_messages=T,this.editing_note=I}},Vu=class extends c{constructor(t,r,n,i){super(),this.current_thread_id=t,this.parent_note=r,this.prior_thread_id=n,this.prior_thread=i}},ws=class extends c{constructor(t){super(),this[0]=t}},Jn=class extends c{},gs=class extends c{constructor(t,r){super(),this.new_thread_id=t,this.parent_note=r}},ys=class extends c{},bs=class extends c{constructor(t){super(),this[0]=t}},vs=class extends c{constructor(t){super(),this[0]=t}},ks=class extends c{constructor(t){super(),this.for_note_id=t}},Os=class extends c{},Ss=class extends c{},Hn=class extends c{},Ls=class extends c{},Rn=class extends c{constructor(t){super(),this[0]=t}},As=class extends c{},js=class extends c{},Yn=class extends c{constructor(t,r){super(),this.note=t,this.topic_id=r}},Un=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Gn=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Zn=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Kn=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},ge=class extends c{};function ep(e,t,r,n,i){return new _e(i,!1,"guest",e,t,r,n,"",r,new w,!1,new w,$i(),new w)}function Jm(e){let t=e.active_thread;if(t instanceof m){let r=t[0];return S(l([]),l([S(l([g("flex justify-end width-full")]),l([et(l([de(new ys),g("icon-button flex gap-[.5rem] pl-[.5rem] pr-[.3rem] pt-[.3rem] pb-[.1rem] mb-[.25rem]")]),l([q("Close Thread"),xs(l([]))]))])),q("Current Thread: "),q(r.parent_note.message),(()=>{let n=r.parent_note.expanded_message;if(n instanceof m){let i=n[0];return S(l([g("mt-[.5rem]")]),l([fe(l([]),l([q(i)]))]))}else return ee(l([]))})(),Ko(l([g("mt-[.5rem]")]))]))}else return S(l([g("flex items-start justify-between width-full mb-[.5rem]")]),l([X(l([g("pt-[.1rem] underline")]),l([e.is_reference?qr(l([Ar("/"+e.topic_id)]),l([q(e.topic_title)])):q(e.topic_title)])),S(l([]),l([e.is_reference?et(l([de(new js),g("icon-button p-[.3rem] mr-[.5rem]")]),l([xs(l([]))])):ee(l([])),et(l([de(new Ls),g("icon-button p-[.3rem] ")]),l([Vc(l([]))]))]))]))}function Hm(e){let t="input-border rounded-md text-[0.65rem] pb-[0.15rem] pt-1 px-[0.5rem]",r=kc(e);if(r instanceof m){let n=r[0];return X(l([g(t)]),l([q(n)]))}else return ee(l([]))}function Rm(e,t){return A(t,r=>S(l([g("line-discussion-item")]),l([S(l([g("flex justify-between mb-[.2rem]")]),l([S(l([g("flex gap-[.5rem] items-start")]),l([fe(l([]),l([q(r.user_name)])),Hm(r.significance)])),S(l([g("flex gap-[.5rem]")]),l([et(l([N("edit-message-button"),g("icon-button p-[.3rem]"),de(new Rn(new _(r)))]),l([Xc(l([]))])),r.expanded_message instanceof m?et(l([N("expand-message-button"),g("icon-button p-[.3rem]"),de(new ks(r.note_id))]),l([Kc(l([]))])):ee(l([])),Oc(r.significance)?et(l([N("switch-thread-button"),g("icon-button p-[.3rem]"),de(new gs(r.note_id,r))]),l([Ku(l([]))])):ee(l([]))]))])),fe(l([]),l([q(r.message)])),Ho(e.expanded_messages,r.note_id)?S(l([g("mt-[.5rem]")]),l([fe(l([]),l([q((()=>{let i=r.expanded_message;return Ct(i,"")})())]))])):ee(l([])),Ko(l([g("mt-[.5rem]")]))])))}function Ym(e){let t="absolute overlay p-[.5rem] flex w-[100%] h-60 mt-2",r="grow text-[.95rem] resize-none p-[.3rem]";return S(l([N("expanded-message"),e.show_expanded_message_box?g(t+" show-exp"):g(t)]),l([La(l([N("expanded-message-box"),g(r),Po("Write an expanded message body"),Vo(n=>new vs(n)),kt(new Ss),Ot(new Hn),Qc(new Jn)]),(()=>{let n=e.current_expanded_message_draft;return Ct(n,"")})())]))}function Um(e,t){if(t){if(e==="done")return[new Kt,"done"];if(e.startsWith("done: ")){let r=e.slice(6);return[new Kt,r]}else if(e.startsWith("a: ")){let r=e.slice(3);return[new Zt,r]}else if(e.startsWith("answer: ")){let r=e.slice(8);return[new Zt,r]}else if(e.startsWith("reject: ")){let r=e.slice(8);return[new Fr,r]}else if(e.startsWith("confirm: ")){let r=e.slice(9);return[new Dr,r]}else if(e.startsWith("incorrect: ")){let r=e.slice(11);return[new Hr,r]}else if(e.startsWith("correct: ")){let r=e.slice(9);return[new zn,r]}else return[new Ut,e]}else if(e.startsWith("todo: ")){let r=e.slice(6);return[new Br,r]}else if(e.startsWith("q: ")){let r=e.slice(3);return[new Gt,r]}else if(e.startsWith("question: ")){let r=e.slice(10);return[new Gt,r]}else if(e.startsWith("finding: ")){let r=e.slice(9);return[new Wr,r]}else if(e.startsWith("dev: ")){let r=e.slice(5);return[new Pr,r]}else if(e.startsWith("info: ")){let r=e.slice(6);return[new Jr,r]}else return[new Ut,e]}function Gm(e){return e instanceof er?"a: ":e instanceof ar?"dev: ":e instanceof Qt?"q: ":e instanceof Vt?"":e instanceof rr?"todo: ":e instanceof ir?"finding: ":e instanceof or?"confirm: ":e instanceof ur?"reject: ":e instanceof tr?"todo: ":e instanceof Pe?"info: ":e instanceof Nn?"correct: ":e instanceof pr?"incorrect: ":e instanceof sr?"finding: ":e instanceof cr?"info: ":e instanceof nr?"done: ":e instanceof lr?"dev: ":e instanceof Xt?"q: ":"finding: "}function tp(e,t){if(t instanceof ws){let r=t[0];return[(()=>{let n=e;return new _e(n.is_reference,n.show_reference_discussion,n.user_name,n.line_number,n.column_number,n.topic_id,n.topic_title,r,n.current_thread_id,n.active_thread,n.show_expanded_message_box,n.current_expanded_message_draft,n.expanded_messages,n.editing_note)})(),new ge]}else if(t instanceof Jn){let r=Um((()=>{let s=e.current_note_draft;return br(s)})(),hr(e.active_thread)),n=r[0],i=r[1];return Gc(e.current_note_draft==="",()=>[e,new ge],()=>{let s=(()=>{let f=e.editing_note;if(f instanceof m){let d=f[0];return[new Rr,d.note_id]}else return[new Mn,e.current_thread_id]})(),o=s[0],u=s[1],a=(()=>{let f=(()=>{let d=e.current_expanded_message_draft;return tn(d,br)})();return f instanceof m&&f[0]===""?new w:f})(),p=new Ki(u,n,"user"+(()=>{let f=ro(100);return y(f)})(),i,a,o);return[(()=>{let f=e;return new _e(f.is_reference,f.show_reference_discussion,f.user_name,f.line_number,f.column_number,f.topic_id,f.topic_title,"",f.current_thread_id,f.active_thread,!1,new w,f.expanded_messages,new w)})(),new Yn(p,e.topic_id)]})}else if(t instanceof gs){let r=t.new_thread_id,n=t.parent_note;return[(()=>{let i=e;return new _e(i.is_reference,i.show_reference_discussion,i.user_name,i.line_number,i.column_number,i.topic_id,i.topic_title,i.current_note_draft,r,new m(new Vu(r,n,e.current_thread_id,e.active_thread)),i.show_expanded_message_box,i.current_expanded_message_draft,i.expanded_messages,i.editing_note)})(),new ge]}else if(t instanceof ys){let r=(()=>{let i=e.active_thread,s=tn(i,o=>o.prior_thread);return al(s)})(),n=(()=>{let i=tn(r,s=>s.current_thread_id);return Ct(i,e.topic_id)})();return[(()=>{let i=e;return new _e(i.is_reference,i.show_reference_discussion,i.user_name,i.line_number,i.column_number,i.topic_id,i.topic_title,i.current_note_draft,n,r,i.show_expanded_message_box,i.current_expanded_message_draft,i.expanded_messages,i.editing_note)})(),new ge]}else if(t instanceof bs){let r=t[0];return[(()=>{let n=e;return new _e(n.is_reference,n.show_reference_discussion,n.user_name,n.line_number,n.column_number,n.topic_id,n.topic_title,n.current_note_draft,n.current_thread_id,n.active_thread,r,n.current_expanded_message_draft,n.expanded_messages,n.editing_note)})(),new ge]}else if(t instanceof vs){let r=t[0];return[(()=>{let n=e;return new _e(n.is_reference,n.show_reference_discussion,n.user_name,n.line_number,n.column_number,n.topic_id,n.topic_title,n.current_note_draft,n.current_thread_id,n.active_thread,n.show_expanded_message_box,new m(r),n.expanded_messages,n.editing_note)})(),new ge]}else if(t instanceof ks){let r=t.for_note_id;return Ho(e.expanded_messages,r)?[(()=>{let i=e;return new _e(i.is_reference,i.show_reference_discussion,i.user_name,i.line_number,i.column_number,i.topic_id,i.topic_title,i.current_note_draft,i.current_thread_id,i.active_thread,i.show_expanded_message_box,i.current_expanded_message_draft,_a(e.expanded_messages,r),i.editing_note)})(),new ge]:[(()=>{let i=e;return new _e(i.is_reference,i.show_reference_discussion,i.user_name,i.line_number,i.column_number,i.topic_id,i.topic_title,i.current_note_draft,i.current_thread_id,i.active_thread,i.show_expanded_message_box,i.current_expanded_message_draft,Ro(e.expanded_messages,r),i.editing_note)})(),new ge]}else{if(t instanceof Os)return[e,new Un(e.line_number,e.column_number)];if(t instanceof Ss)return[(()=>{let r=e;return new _e(r.is_reference,r.show_reference_discussion,r.user_name,r.line_number,r.column_number,r.topic_id,r.topic_title,r.current_note_draft,r.current_thread_id,r.active_thread,!0,r.current_expanded_message_draft,r.expanded_messages,r.editing_note)})(),new Gn(e.line_number,e.column_number)];if(t instanceof Hn)return[e,new Zn(e.line_number,e.column_number)];if(t instanceof Ls)return[e,new Kn(e.line_number,e.column_number)];if(t instanceof Rn){let r=t[0];if(r.isOk()){let n=r[0];return[(()=>{let i=e;return new _e(i.is_reference,i.show_reference_discussion,i.user_name,i.line_number,i.column_number,i.topic_id,i.topic_title,Gm(n.significance)+n.message,i.current_thread_id,i.active_thread,n.expanded_message instanceof m,n.expanded_message,i.expanded_messages,new m(n))})(),new ge]}else return[e,new ge]}else return t instanceof As?[(()=>{let r=e;return new _e(r.is_reference,r.show_reference_discussion,r.user_name,r.line_number,r.column_number,r.topic_id,r.topic_title,"",r.current_thread_id,r.active_thread,!1,new w,r.expanded_messages,new w)})(),new ge]:[(()=>{let r=e;return new _e(r.is_reference,!e.show_reference_discussion,r.user_name,r.line_number,r.column_number,r.topic_id,r.topic_title,r.current_note_draft,r.current_thread_id,r.active_thread,r.show_expanded_message_box,r.current_expanded_message_draft,r.expanded_messages,r.editing_note)})(),new ge]}}function Zm(e,t){return Le("keydown",r=>{let n=b("ctrlKey",kr,s=>b("key",L,o=>Y([s,o]))),i=l([new V("","",l([]))]);return M((()=>{let s=ke(r,n);return Q(s,i)})(),s=>{let o=s[0],u=s[1];return o&&u==="Enter"?new _(e):u==="ArrowUp"?new _(t):new h(i)})})}function Km(e,t){return S(l([g("flex justify-between items-center gap-[.35rem]")]),l([et(l([N("toggle-expanded-message-button"),g("icon-button p-[.3rem]"),de(new bs(!e.show_expanded_message_box))]),l([Zc(l([]))])),e.editing_note instanceof m?et(l([N("cancel-message-edit-button"),g("icon-button p-[.3rem]"),de(new As)]),l([xs(l([]))])):ee(l([])),Sa(l([N("new-comment-input"),g("inline-block w-full grow text-[0.9rem] pl-2 pb-[.2rem] p-[0.3rem] border-[none] border-t border-solid;"),Po("Add a new comment"),Vo(r=>new ws(r)),kt(new Os),Ot(new Hn),Zm(new Jn,new Rn(rn(t))),pa(e.current_note_draft)]))]))}function rp(e,t){ot("Rendering line discussion "+e.topic_title);let r=(()=>{let n=P(t,e.current_thread_id);return K(n,l([]))})();return S(l([g("absolute z-[3] w-[30rem] not-italic text-wrap select-text text left-[-.3rem]"),e.line_number<27?g("top-[1.4rem]"):g("bottom-[1.4rem]")]),l([e.is_reference&&!e.show_reference_discussion?ee(l([S(l([g("overlay p-[.5rem]")]),l([S(l([g("flex items-start justify-between width-full mb-[.5rem]")]),l([X(l([g("pt-[.1rem] underline")]),l([qr(l([Ar("/"+e.topic_id)]),l([q(e.topic_title)]))])),et(l([de(new js),g("icon-button p-[.3rem]")]),l([Ku(l([]))]))])),S(l([g("flex flex-col overflow-auto max-h-[30rem] gap-[.5rem]")]),Re(r,i=>k(i.significance,new Pe)?new _(fe(l([]),l([q(i.message+(hr(i.expanded_message)?"^":""))]))):new h(void 0)))]))])):ee(l([S(l([g("overlay p-[.5rem]")]),l([Jm(e),hr(e.active_thread)||nt(r)>0?S(l([N("comment-list"),g("flex flex-col-reverse overflow-auto max-h-[30rem] gap-[.5rem] mb-[.5rem]")]),Rm(e,r)):ee(l([])),Km(e,r)])),Ym(e)]))]))}var Vn=class extends c{constructor(t,r,n){super(),this.line_number=t,this.column_number=r,this.model=n}};var Me=class extends c{constructor(t,r,n,i,s,o,u){super(),this.kind=t,this.line_number=r,this.column_number=n,this.node_id=i,this.topic_id=s,this.topic_title=o,this.is_reference=u}},Ce=class extends c{constructor(t){super(),this.kind=t}},jt=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Xu=class extends c{constructor(t,r,n){super(),this.line_number=t,this.column_number=r,this.update=n}},me=class extends c{},At=class extends c{};function Vm(e,t){return new Xu(t.line_number,t.column_number,tp(t.model,e))}function Es(e,t,r,n){if(n instanceof m){let i=n[0];if(t===i.line_number&&r===i.column_number){let o=rp(i.model,e);return jr(o,u=>Vm(u,i))}else return ee(l([]))}else return ee(l([]))}function Xm(e,t,r,n,i,s,o){let u=Qs(e,a=>!k(a.significance,new Pe));if(u.isOk()){let a=u[0];return X(l([g("inline-comment font-code code-extras font-code fade-in relative"),g("comment-preview"),g(Fn),x("tabindex","0"),Pn(y(n),y(i)),jn(new Me(new me,n,i,new w,t,r,!1)),En(new Ce(new me)),kt(new Me(new At,n,i,new w,t,r,!1)),Ot(new Ce(new At))]),l([X(l([de(new jt(n,i))]),l([q((()=>{if(st(a.message)>40)return(()=>{let f=a.message;return xe(f,0,37)})()+"...";{let f=a.message;return xe(f,0,40)}})())])),Es(o,n,i,s)]))}else return X(l([g("inline-comment font-code code-extras relative"),g("new-thread-preview"),g(Fn),x("tabindex","0"),Pn(y(n),y(i)),jn(new Me(new me,n,i,new w,t,r,!1)),En(new Ce(new me)),kt(new Me(new At,n,i,new w,t,r,!1)),Ot(new Ce(new At))]),l([X(l([de(new jt(n,i))]),l([q("Start new thread")])),Es(o,n,i,s)]))}function Qm(e,t,r,n,i,s,o){return X(l([N(t.topic_id),g(Cu(t.kind)),g("declaration-preview relative N"+y(e)),g(Fn),g(Ju),x("tabindex","0"),Ru(t.topic_id),Yu(t.title),Uu(!1),Pn(y(i),y(s)),jn(new Me(new me,i,s,new m(e),t.topic_id,t.title,!1)),En(new Ce(new me)),kt(new Me(new me,i,s,new m(e),t.topic_id,t.title,!1)),Ot(new Ce(new At))]),l([X(l([de(new jt(i,s))]),l([q(r)])),Es(n,i,s,o)]))}function e$(e,t,r,n,i,s,o){return X(l([g(Cu(t.kind)),g("reference-preview relative N"+y(e)),g(Fn),g(Ju),x("tabindex","0"),Ru(t.topic_id),Yu(t.title),Uu(!0),Pn(y(i),y(s)),jn(new Me(new me,i,s,new m(e),t.topic_id,t.title,!0)),En(new Ce(new me)),kt(new Me(new me,i,s,new m(e),t.topic_id,t.title,!0)),Ot(new Ce(new At))]),l([X(l([de(new jt(i,s))]),l([q(r)])),Es(n,i,s,o)]))}function sp(e,t,r){let n=ml(e.elements,0,(i,s)=>{if(s instanceof Bn){let o=s.node_id,u=s.node_declaration,a=s.tokens,p=i+1;return[p,Qm(o,u,a,t,e.line_number,p,r)]}else if(s instanceof Wn){let o=s.referenced_node_id,u=s.referenced_node_declaration,a=s.tokens,p=i+1;return[p,e$(o,u,a,t,e.line_number,p,r)]}else if(s instanceof Ur){let o=s.element;return[i,X(l([x("dangerous-unescaped-html",o)]),l([]))]}else{let o=s.element;return[i,X(l([x("dangerous-unescaped-html",o)]),l([]))]}});return Gs(n)}function op(e,t,r){let n=st(e),i=80-r;if(n<=i)return l([e+(t?"^":"")]);{let o=(()=>{let p=xe(e,0,i);return Wl(p)})(),u=(()=>{let f=yr(o," "),d=K(f,["",o]),v=Gs(d);return st(v)})(),a=xe(e,u+1,n);return $(xe(e,0,u),op(a,t,r))}}function t$(e,t){let r=e.message,n=op(r,!k(e.expanded_message,new w),t);return nn(n,(i,s)=>[e.note_id+y(s),i])}function r$(e,t,r){let n=(()=>{let s=P(e,r),o=K(s,l([]));return Re(o,u=>u.parent_id===r?new _(u):new h(void 0))})(),i=(()=>{let o=Nt(n,a=>k(a.significance,new Pe)),u=A(o,a=>t$(a,t));return xr(u)})();return[n,i]}function ip(e,t,r,n,i){let s=r$(e,t.leading_spaces,r),o=s[0],u=s[1],a=t.columns+1;return S(l([N(t.line_tag),g(_s),Mc(a)]),l([da(ee,nn(u,(p,f)=>{let d=p[0],v=p[1],T=fe(l([g("loc flex")]),l([X(l([g("line-number code-extras relative")]),l([q(t.line_number_text),X(l([g("absolute code-extras pl-[.1rem] pt-[.15rem] text-[.9rem]")]),l([q($s(f+1))]))])),X(l([g("comment italic")]),l([q((()=>{let I=$l(" ",t.leading_spaces);return ie(I,"")})()+v)]))]));return[d,T]})),fe(l([g("loc flex")]),l([X(l([g("line-number code-extras relative")]),l([q(t.line_number_text)])),ee(sp(t,e,i)),Xm(o,r,n,t.line_number,a,i,e)]))]))}function n$(e,t,r){let n=t.significance;if(n instanceof Yr)return fe(l([g("loc"),N(t.line_tag)]),$(X(l([g("line-number code-extras relative")]),l([q(t.line_number_text)])),sp(t,e,r)));if(n instanceof In){let i=n.topic_id,s=n.topic_title;return ip(e,t,i,s,r)}else return ip(e,t,t.line_id,t.line_tag,r)}function up(e,t,r){return S(l([N("audit-page"),g("code-snippet"),vt("lc",(()=>{let i=nt(e);return y(i)})())]),A(e,n=>n$(t,n,r)))}function lp(){return globalThis?.process?.platform==="win32"||globalThis?.Deno?.build?.os==="windows"}function s$(e){let t=(()=>{let r=oe(e,"/");if(r.hasLength(1)&&r.head==="")return l([]);if(r.atLeastLength(1)&&r.head===""){let n=r.tail;return $("/",n)}else return r})();return Nt(t,r=>r!=="")}function o$(e){let t=xe(e,0,3),r=Dl(t),n=A(r,So);if(n.hasLength(3)&&(n.tail.tail.head===47||n.tail.tail.head===92)&&n.tail.head===58&&(n.head>=65&&n.head<=90||n.head>=97&&n.head<=122)){let i=n.head,s=n.tail.head,o=n.tail.tail.head,u=xe(e,0,1),a=ae(u)+":/",p=$t(e,3);return[new m(a),p]}else return[new w,e]}function u$(e){let t=o$(e),r=t[0],n=t[1],i=(()=>{let o=oe(n,"/");return sn(o,u=>oe(u,"\\"))})(),s=(()=>{if(r instanceof m){let o=r[0];return $(o,i)}else return i})();if(s.hasLength(1)&&s.head==="")return l([]);if(s.atLeastLength(1)&&s.head===""){let o=s.tail;return $("/",o)}else return s}function l$(e){return lp()?u$(e):s$(e)}function Ts(e){return Ve(e==="/","",()=>{let r=l$(e),n=xl(r);return K(n,"")})}function ap(e,t,r){let n=(()=>{let o=P(r,e);return K(o,[l([]),l([])])})(),i=n[0],s=n[1];return S(l([N(e)]),l([fe(l([g("tree-item")]),l([q(Ts(e))])),S(l([N(e+"-dirs"),g("nested-tree-items")]),A(i,o=>ap(o,t,r))),S(l([N(e+"-files"),g("nested-tree-items")]),A(s,o=>qr(l([g("tree-item tree-link"+(o===t?" underline":"")),Ar("/"+o),Jo("prefetch")]),l([q(Ts(o))]))))]))}function c$(e,t,r){let n=(()=>{let o=P(e,t);return K(o,[l([]),l([])])})(),i=n[0],s=n[1];return S(l([N("audit-files")]),l([S(l([N(t+"-files")]),A(s,o=>qr(l([g("tree-item tree-link"+(o===r?" underline":"")),Ar("/"+o),Jo("prefetch")]),l([q(Ts(o))])))),S(l([N(t+"-dirs")]),A(i,o=>ap(o,r,e)))]))}function Qu(e,t,r,n,i){return S(l([N("tree-grid")]),l([S(l([N("file-tree")]),l([Oa(l([N("audit-tree-header")]),l([q(n+" files")])),c$(r,n,i)])),S(l([N("tree-resizer")]),l([])),S(l([N("file-contents")]),l([e])),hr(t)?S(l([N("panel-resizer")]),l([])):ee(l([])),(()=>{if(t instanceof m){let s=t[0];return S(l([N("side-panel")]),l([s]))}else return ee(l([]))})()]))}function p$(e){let r=oe(e,"/"),n=Vs(r,nt(oe(e,"/"))-1),i=wr(n,l([]),(s,o,u)=>{if(u===0)return $(o,s);{let a=(()=>{let p=rn(s);return K(p,"")})();return $(a+"/"+o,s)}});return E(i)}function qs(e){return e+"/dashboard"}function el(e,t,r){let n=qs(r),i=t===n?$(t,e):Ks(e,t)?$(n,e):$(t,$(n,e)),s=Ks(i,n)?i:$(n,i),u=(()=>{let f=sn(s,p$);return eo(f)})(),a=A(u,p=>{let f=p+"/",d=Nt(s,ft=>Ft(ft,f)),v=hl(d,ft=>{let qt=dn(ft,f,"");return fn(qt,"/")}),T=v[0],I=v[1],Vr=(()=>{let ft=A(T,qt=>{let B=dn(qt,f,""),W=(()=>{let te=oe(B,"/"),Ae=rn(te);return K(Ae,"")})();return f+W});return eo(ft)})();return[p,[Vr,I]]});return Xn(a)}var ne=class extends c{constructor(t,r,n,i,s,o,u,a,p,f){super(),this.route=t,this.file_tree=r,this.audit_metadata=n,this.source_files=i,this.discussions=s,this.discussion_overlay_models=o,this.keyboard_model=u,this.selected_discussion=a,this.selected_node_id=p,this.focused_discussion=f}},Zr=class extends c{},Et=class extends c{constructor(t){super(),this.audit_name=t}},Kr=class extends c{constructor(t,r){super(),this.audit_name=t,this.page_path=r}},zs=class extends c{constructor(t){super(),this.route=t}},Ms=class extends c{constructor(t,r){super(),this.audit_name=t,this.metadata=r}},Cs=class extends c{constructor(t,r){super(),this.page_path=t,this.source_file=r}},Ns=class extends c{constructor(t,r){super(),this.audit_name=t,this.discussion=r}},Is=class extends c{constructor(t){super(),this.audit_name=t}},Bs=class extends c{constructor(t){super(),this.browser_event=t}},Ws=class extends c{constructor(t,r,n,i,s,o,u){super(),this.kind=t,this.line_number=r,this.column_number=n,this.node_id=i,this.topic_id=s,this.topic_title=o,this.is_reference=u}},Ds=class extends c{constructor(t){super(),this.kind=t}},Fs=class extends c{constructor(t,r){super(),this.line_number=t,this.column_number=r}},Ps=class extends c{constructor(t,r,n){super(),this.line_number=t,this.column_number=r,this.update=n}},Js=class extends c{constructor(t){super(),this.updated_model=t}},rl=class extends c{constructor(t){super(),this.error=t}};function dp(e){let t=Wo(e.path);if(t.hasLength(0))return new Zr;if(t.hasLength(1)&&t.head==="dashboard")return new Zr;if(t.hasLength(1)){let r=t.head;return new Et(r)}else if(t.hasLength(2)&&t.tail.head==="dashboard"){let r=t.head;return new Et(r)}else{let r=t.head;return new Kr(r,(()=>{let n=e.path;return $t(n,1)})())}}function d$(e){let t=dp(e);return new zs(t)}function cp(e,t){if(e instanceof Zr)return Z();if(e instanceof Et){let r=e.audit_name,n=(()=>{let i=P(t,r),s=J(i,o=>o.isOk()?o[0].in_scope_files:l([]));return K(s,l([]))})();return el(n,qs(r),r)}else{let r=e.audit_name,n=e.page_path,i=(()=>{let s=P(t,r),o=J(s,u=>u.isOk()?u[0].in_scope_files:l([]));return K(o,l([]))})();return el(i,n,r)}}function pp(e,t){let r=P(e.audit_metadata,t);return r.isOk()&&r[0].isOk()?D():Pi("/audit-metadata/"+t,qn(Va(),n=>new Ms(t,n)))}function _$(e,t){let r=P(e.source_files,t);return r.isOk()&&r[0].isOk()?D():Pi("/source-file/"+t,qn(ut(jc()),n=>new Cs(t,n)))}function nl(e){return Pi("/audit-discussion/"+e,qn(ut(vc()),t=>new Ns(e,t)))}function _p(e,t){if(t instanceof Et){let r=t.audit_name;return mi(l([pp(e,r),nl(r)]))}else if(t instanceof Kr){let r=t.audit_name,n=t.page_path;return mi(l([nl(r),pp(e,r),_$(e,n)]))}else return D()}function m$(e){let t=(()=>{let n=pu();if(n.isOk()){let i=n[0];return dp(i)}else return new Zr})(),r=new ne(t,Z(),Z(),Z(),Z(),Z(),Hc(),new w,new w,new w);return[r,mi(l([Ka(d$),Fe(n=>Du("keydown",i=>(Rc(i),n(new Bs(i))))),_p(r,r.route)]))]}function fp(e,t,r,n){return Ua("/submit-note/"+e,xt(l([["topic_id",Se(t)],["note_submission",bc(r)]])),qn(b("msg",L,i=>i==="success"?Y(void 0):mn(void 0,i)),i=>{if(i.isOk()&&!i[0])return new Js(n);{let s=i[0];return new rl(s)}}))}function $$(e,t){if(t instanceof zs){let r=t.route;return[(()=>{let n=e;return new ne(r,cp(r,e.audit_metadata),n.audit_metadata,n.source_files,n.discussions,n.discussion_overlay_models,n.keyboard_model,n.selected_discussion,n.selected_node_id,n.focused_discussion)})(),_p(e,r)]}else if(t instanceof Ms){let r=t.audit_name,n=t.metadata,i=G(e.audit_metadata,r,n);return[(()=>{let s=e;return new ne(s.route,cp(e.route,i),i,s.source_files,s.discussions,s.discussion_overlay_models,s.keyboard_model,s.selected_discussion,s.selected_node_id,s.focused_discussion)})(),D()]}else if(t instanceof Cs){let r=t.page_path,n=t.source_file;return[(()=>{let i=e;return new ne(i.route,i.file_tree,i.audit_metadata,G(e.source_files,r,n),i.discussions,i.discussion_overlay_models,i.keyboard_model,i.selected_discussion,i.selected_node_id,i.focused_discussion)})(),D()]}else if(t instanceof Ns){let r=t.audit_name,n=t.discussion;if(n.isOk()){let i=n[0];return[(()=>{let s=e;return new ne(s.route,s.file_tree,s.audit_metadata,s.source_files,G(e.discussions,r,Xs(i,u=>u.parent_id)),s.discussion_overlay_models,s.keyboard_model,s.selected_discussion,s.selected_node_id,s.focused_discussion)})(),D()]}else{let i=n[0];return ot("Failed to fetch discussion: "+vr(i)),[e,D()]}}else if(t instanceof Is){let r=t.audit_name;return[e,nl(r)]}else if(t instanceof Bs){let r=t.browser_event;tl("user entered key "+Lt(r),"src/o11a_client.gleam",272);let n=Uc(r,e.keyboard_model),i=n[0],s=n[1];return[(()=>{let o=e;return new ne(o.route,o.file_tree,o.audit_metadata,o.source_files,o.discussions,o.discussion_overlay_models,i,o.selected_discussion,o.selected_node_id,o.focused_discussion)})(),s]}else if(t instanceof Ws){let r=t.kind,n=t.line_number,i=t.column_number,s=t.node_id,o=t.topic_id,u=t.topic_title,a=t.is_reference;tl("user selected discussion entry","src/o11a_client.gleam",287),tl(r,"src/o11a_client.gleam",288);let p=[n,i],f=P(e.discussion_overlay_models,p).isOk()?e.discussion_overlay_models:G(e.discussion_overlay_models,p,ep(n,i,o,u,a));return[(()=>{if(r instanceof me){let d=e;return new ne(d.route,d.file_tree,d.audit_metadata,d.source_files,d.discussions,f,d.keyboard_model,new m(p),s,d.focused_discussion)}else{let d=e;return new ne(d.route,d.file_tree,d.audit_metadata,d.source_files,d.discussions,f,d.keyboard_model,d.selected_discussion,s,new m(p))}})(),D()]}else if(t instanceof Ds){let r=t.kind;return[(()=>{if(r instanceof me){let n=e;return new ne(n.route,n.file_tree,n.audit_metadata,n.source_files,n.discussions,n.discussion_overlay_models,n.keyboard_model,new w,new w,n.focused_discussion)}else{let n=e;return new ne(n.route,n.file_tree,n.audit_metadata,n.source_files,n.discussions,n.discussion_overlay_models,n.keyboard_model,n.selected_discussion,new w,new w)}})(),D()]}else if(t instanceof Fs){let r=t.line_number,n=t.column_number;return[e,Fe(i=>{let s=(()=>{let o=Dc(r,n);return J(o,Dn)})();if(!(s.isOk()&&!s[0]))return ot("Failed to focus discussion input")})]}else if(t instanceof Ps){let r=t.line_number,n=t.column_number,i=t.update,s=i[0],o=i[1];if(o instanceof Yn){let u=o.note,a=o.topic_id;return[e,(()=>{let p=e.route;if(p instanceof Kr){let f=p.audit_name;return fp(f,a,u,s)}else if(p instanceof Et){let f=p.audit_name;return fp(f,a,u,s)}else return D()})()]}else return o instanceof Un?[(()=>{let u=e;return new ne(u.route,u.file_tree,u.audit_metadata,u.source_files,u.discussions,G(e.discussion_overlay_models,[r,n],s),u.keyboard_model,u.selected_discussion,u.selected_node_id,u.focused_discussion)})(),D()]:o instanceof Gn?[(()=>{let u=e;return new ne(u.route,u.file_tree,u.audit_metadata,u.source_files,u.discussions,G(e.discussion_overlay_models,[r,n],s),u.keyboard_model,u.selected_discussion,u.selected_node_id,u.focused_discussion)})(),D()]:o instanceof Zn?[(()=>{let u=e;return new ne(u.route,u.file_tree,u.audit_metadata,u.source_files,u.discussions,G(e.discussion_overlay_models,[r,n],s),u.keyboard_model,u.selected_discussion,u.selected_node_id,u.focused_discussion)})(),D()]:o instanceof Kn?[(()=>{let u=e;return new ne(u.route,u.file_tree,u.audit_metadata,u.source_files,u.discussions,G(e.discussion_overlay_models,[r,n],s),u.keyboard_model,u.selected_discussion,u.selected_node_id,u.focused_discussion)})(),D()]:[(()=>{let u=e;return new ne(u.route,u.file_tree,u.audit_metadata,u.source_files,u.discussions,G(e.discussion_overlay_models,[r,n],s),u.keyboard_model,u.selected_discussion,u.selected_node_id,u.focused_discussion)})(),D()]}else if(t instanceof Js){let r=t.updated_model;return[(()=>{let n=e;return new ne(n.route,n.file_tree,n.audit_metadata,n.source_files,n.discussions,G(e.discussion_overlay_models,[r.line_number,r.column_number],r),n.keyboard_model,n.selected_discussion,n.selected_node_id,n.focused_discussion)})(),D()]}else{let r=t.error;return ko("Failed to submit note: "+vr(r)),[e,D()]}}function h$(e){let t=e.focused_discussion,r=e.selected_discussion;if(t instanceof m){let n=t[0],i=P(e.discussion_overlay_models,n),s=J(i,o=>new m(new Vn(n[0],n[1],o)));return K(s,new w)}else if(r instanceof m){let n=r[0],i=P(e.discussion_overlay_models,n),s=J(i,o=>new m(new Vn(n[0],n[1],o)));return K(s,new w)}else return new w}function x$(e){return Le(Sc,t=>{let r=l([new V("","",l([]))]);return M((()=>{let n=ke(t,Vl(l(["detail","audit_name"]),L));return Q(n,r)})(),n=>{let i=e(n);return new _(i)})})}function w$(e){if(e instanceof Me){let t=e.kind,r=e.line_number,n=e.column_number,i=e.node_id,s=e.topic_id,o=e.topic_title,u=e.is_reference;return new Ws(t,r,n,i,s,o,u)}else if(e instanceof Ce){let t=e.kind;return new Ds(t)}else if(e instanceof jt){let t=e.line_number,r=e.column_number;return new Fs(t,r)}else{let t=e.line_number,r=e.column_number,n=e.update;return new Ps(t,r,n)}}function g$(e){let t=e.route;if(t instanceof Et){let r=t.audit_name;return S(l([]),l([Xo(l([Qo("/component-discussion/"+r)])),Qu(fe(l([]),l([q("Dashboard")])),new w,e.file_tree,r,qs(r))]))}else if(t instanceof Kr){let r=t.audit_name,n=t.page_path;return S(l([]),l([Xo(l([Qo("/component-discussion/"+r),x$(i=>new Is(i))])),Qu((()=>{let i=up((()=>{let s=P(e.source_files,n),o=J(s,u=>u.isOk()?u[0]:l([]));return K(o,l([]))})(),(()=>{let s=P(e.discussions,r);return K(s,Z())})(),h$(e));return jr(i,w$)})(),new w,e.file_tree,r,n)]))}else return fe(l([]),l([q("Home")]))}function mp(){ot("Starting client controller");let e=ba(m$,$$,g$);return va(e,"#app",void 0)}function tl(e,t,r){let n="\x1B[90m",i="\x1B[39m",s=`${t}:${r}`,o=pt(e);if(typeof process=="object"&&process.stderr?.write){let u=`${n}${s}${i}
${o}
`;process.stderr.write(u)}else if(typeof Deno=="object"){let u=`${n}${s}${i}
${o}
`;Deno.stderr.writeSync(new TextEncoder().encode(u))}else{let u=`${s}
${o}`;console.log(u)}return e}function y$(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];n==`
`?t+="\\n":n=="\r"?t+="\\r":n=="	"?t+="\\t":n=="\f"?t+="\\f":n=="\\"?t+="\\\\":n=='"'?t+='\\"':n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}return t+='"',t}function b$(e){let t="dict.from_list([",r=!0,n=[];return e.forEach((i,s)=>{n.push([s,i])}),n.sort(),n.forEach(([i,s])=>{r||(t=t+", "),t=t+"#("+pt(i)+", "+pt(s)+")",r=!1}),t+"])"}function v$(e){let t=Object.keys(e).map(r=>{let n=pt(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function k$(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${pt(s)}: ${pt(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function pt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return y$(e);if(t==="bigint"||t==="number")return e.toString();if(Array.isArray(e))return`#(${e.map(pt).join(", ")})`;if(e instanceof F)return`[${e.toArray().map(pt).join(", ")}]`;if(e instanceof Mt)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof Ne)return O$(e);if(e instanceof c)return v$(e);if(S$(e))return b$(e);if(e instanceof Set)return`//js(Set(${[...e].map(pt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return k$(e)}function O$(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),r=mr(e,e.bitOffset,t),n=e.bitSize%8;if(n>0){let i=ul(e,t,e.bitSize,!1,!1),s=Array.from(r.rawBuffer),o=`${i}:size(${n})`;return s.length===0?`<<${o}>>`:`<<${Array.from(r.rawBuffer).join(", ")}, ${o}>>`}else return`<<${Array.from(r.rawBuffer).join(", ")}>>`}function S$(e){try{return e instanceof ze}catch{return!1}}mp();
